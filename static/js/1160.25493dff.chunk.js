"use strict";(self.webpackChunk_decode_crm_client=self.webpackChunk_decode_crm_client||[]).push([[1160],{37829:function(e,n,i){i(66509);var a=i(92761),r=i(91576),l=i(55294);n.Z=function(e){var n=e.loading;return(0,l.jsx)(a.Z,{sx:{zIndex:"9999999"},open:n,children:(0,l.jsx)(r.Z,{})})}},89941:function(e,n,i){i.d(n,{Z:function(){return v}});var a=i(75782),r=i(68901),l=(i(66509),i(1103)),s=i(29376),t=i(29332),o=i(88285),d=i(35831),c=i(37306),u=i(82240),x=i(6267),f=i(91636),m=i(50704),b=i(55294),y=(0,m.ZP)("div")((function(){return{borderRadius:"8px"}})),h=((0,m.ZP)("div")((function(){return{height:"100%",width:"100%"}})),(0,m.ZP)("div")((function(){return{display:"flex",flexDirection:"column",height:"100%",overflow:"scroll"}})),["showCard","cardTitle","columns","rows","toolBar","density","actionComponent","headerClassName","cellClassName","hidePagination","totalPage","page","onChangePage","autoHeight","sx"]),p=[{systemValue:"en",language:l._},{systemValue:"cn",language:s.U},{systemValue:"cnTw",language:s.U}];function v(e){var n=(0,f.Z)().currentLang,i=e.showCard,l=void 0!==i&&i,s=e.cardTitle,m=e.columns,v=void 0===m?[]:m,g=e.rows,Z=void 0===g?[]:g,j=e.toolBar,C=e.density,N=void 0===C?"compact":C,I=e.actionComponent,k=e.headerClassName,w=e.cellClassName,S=e.hidePagination,q=void 0===S||S,A=e.totalPage,R=void 0===A?1:A,P=e.page,B=void 0===P?1:P,O=e.onChangePage,X=void 0===O?function(){}:O,Y=e.autoHeight,M=void 0!==Y&&Y,T=e.sx,_=(0,r.Z)(e,h),D=p.find((function(e){return e.systemValue===n.value})),G=(0,a.Z)({rows:Z,columns:k||w?v.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{headerClassName:k,cellClassName:w})})):v,density:N,components:j||I?{Toolbar:function(){return(0,b.jsxs)(d.Z,{direction:"row",alignItems:"center",sx:{backgroundColor:"#F4F6F8"},children:[j?(0,b.jsx)(t.n,{}):(0,b.jsx)("span",{}),I&&(0,b.jsx)(c.Z,{sx:{p:16,flexGrow:1},children:I()})]})}}:null},_);return D.language&&(G.localeText=D.language.components.MuiDataGrid.defaultProps.localeText),l?(0,b.jsxs)(c.Z,{sx:{width:"100%",display:"flex",flexDirection:"column"},children:[(0,b.jsxs)(y,{sx:{flexGrow:1,borderRadius:0,flex:1},children:[s&&(0,b.jsx)(u.Z,{title:s,sx:{mb:3}}),(0,b.jsx)(o._,(0,a.Z)((0,a.Z)({disableColumnFilter:!0,disableColumnSelector:!0,disableColumnMenu:!0,sortingMode:"server",ColumnSortedAscendingIcon:null,sx:(0,a.Z)({"& .MuiDataGrid-sortIcon":{display:"none"}},T)},G),{},{autoHeight:M}))]}),!q&&(0,b.jsx)(c.Z,{sx:{display:"flex",justifyContent:"center",py:2},children:(0,b.jsx)(x.Z,{count:R,shape:"rounded",page:B,onChange:function(e,n){X(n),window.scrollTo({top:0,behavior:"smooth"})}})})]}):(0,b.jsxs)(c.Z,{sx:{height:"100%",width:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,b.jsx)(y,{sx:{flexGrow:1,borderRadius:0,flex:1},children:(0,b.jsx)(o._,(0,a.Z)((0,a.Z)({disableColumnFilter:!0,disableColumnSelector:!0,disableColumnMenu:!0,sortingMode:"server",ColumnSortedAscendingIcon:null,sx:(0,a.Z)({"& .MuiDataGrid-sortIcon":{display:"none"}},T)},G),{},{autoHeight:M}))}),!q&&(0,b.jsx)(c.Z,{sx:{display:"flex",justifyContent:"center",py:2,backgroundColor:"rgb(32,32,51)"},children:(0,b.jsx)(x.Z,{count:R,shape:"rounded",page:B,onChange:function(e,n){X(n),window.scrollTo({top:0,behavior:"smooth"})}})})]})}},71160:function(e,n,i){i.r(n),i.d(n,{default:function(){return j}});var a=i(99932),r=i(78450),l=i(75782),s=i(52398),t=i(66509),o=i(37306),d=i(99507),c=i(66175),u=i(41623),x=(i(20137),i(1127)),f=(i(89941),i(52314)),m=i(37829),b=i(91636),y=i(74),h=(i(98160),i(52692),i(17841)),p=(i(61439),i(42211)),v=i(57227),g=i(55294),Z=function(e){return!e||(0,v.default)(e,"any",{strictMode:!0})};function j(e){e.setStep;var n=(0,p.useSearchParams)(),i=(0,s.Z)(n,1)[0].get("id"),v=(0,b.Z)().t,j=(0,t.useState)({isSelfAccount:!1}),C=(0,s.Z)(j,2),N=C[0],I=C[1],k=(0,t.useState)({amount:""}),w=(0,s.Z)(k,2),S=(w[0],w[1],(0,u.s0)()),q=(0,t.useState)({}),A=(0,s.Z)(q,2),R=A[0],P=A[1],B=(0,t.useState)({}),O=(0,s.Z)(B,2),X=(O[0],O[1],(0,t.useState)(null)),Y=(0,s.Z)(X,2),M=(Y[0],Y[1],(0,t.useState)(!1)),T=(0,s.Z)(M,2),_=T[0],D=T[1],G=(0,t.useState)(null),F=(0,s.Z)(G,2),L=F[0],z=F[1],U=(0,y.nXt)().data,V=(0,y.vLk)().data,E=(0,y.c08)(),H=E.data,W=E.isLoading,J=E.create,K=E.update,Q=(E.mutate,(0,y._i7)().data,(0,y.a9L)(null===N||void 0===N?void 0:N.currency).data),$=c.object().shape((0,l.Z)({accountNumberOrIban:c.string().required(v("IsRequired",{field:v("accountNumberOrIban")})),region:c.string().required(v("IsRequired",{field:v("region")})),currency:c.string().required(v("IsRequired",{field:v("currency")})),city:c.string().required(v("IsRequired",{field:v("city")})),address1:c.string().required(v("IsRequired",{field:v("address")})),displayName:c.string().required(v("IsRequired",{field:v("displayName")})),name:c.string().required(v("IsRequired",{field:v("name")})),accountName:c.string().required(v("IsRequired",{field:v("accountName")}))},"CNY"===(null===N||void 0===N?void 0:N.currency)?{phone:c.string().test("mobile text",v("mobileNumberfailText"),Z).required(v("IsRequired",{field:v("bankLinkMobile")}))}:{phone:c.string()})),ee=(v("date/time"),v("type"),v("amount"),v("status"),function(){var e=(0,r.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D(!0),e.prev=1,!i){e.next=7;break}return e.next=5,K(i,n);case 5:e.next=9;break;case 7:return e.next=9,J(n);case 9:I({}),S("/crm/fiat"),D(!1),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(1);case 16:D(!1);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(n){return e.apply(this,arguments)}}()),ne=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:$.validate(N).then((function(e){P({}),ee(N)})).catch((function(e){P({}),P((function(n){return n[e.path]=e.message,(0,l.Z)({},n)}))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,t.useEffect)((function(){var e=null===H||void 0===H?void 0:H.find((function(e){return Number(e.id)===Number(i)}));z(e),I((0,l.Z)((0,l.Z)({},e),{},{isSelfAccount:!1})||{})}),[W]),(0,t.useEffect)((function(){I((function(e){return null!==L&&e.currency!==(null===L||void 0===L?void 0:L.currency)&&(e.name="",e.displayName="",e.accountName="",e.address1="",e.address2="",e.city="",e.state="",e.branchOrABARoutingCode="",e.accountName="",e.phone=""),(0,l.Z)({},e)}))}),[null===N||void 0===N?void 0:N.currency]),(0,t.useEffect)((function(){console.log(N)}),[N]);c.object().shape({forexAccountBalance:c.string().required(),amount:c.string().required()});return(0,g.jsxs)(o.Z,{children:[(0,g.jsx)(x.dz,{values:N,setValues:I,errors:R,children:(0,g.jsxs)(o.Z,{sx:{width:600,mx:"auto",my:4},children:[(0,g.jsx)(d.Z,{children:v("createWithdrawalRules")}),(0,g.jsx)(x.Nz,{field:"currency",options:V.map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{label:(0,g.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,g.jsx)(f.Z,{type:"country",code:e.entity})," ",(0,g.jsx)(o.Z,{sx:{ml:1},children:e.label})]})})})),placeholder:v("currency")+"*",sx:{my:2,width:"100%"},size:"middle",labelColor:"background.default"}),["AUD","GBP","EUR","SGD","USD"].includes(null===N||void 0===N?void 0:N.currency)||void 0===(null===N||void 0===N?void 0:N.currency)?(0,g.jsx)(x.o7,{field:"name",label:v("bankName")+"*",sx:{my:2}}):(0,g.jsx)(x.N2,{options:Q.map((function(e){return{value:e[":bank"].name,label:e[":bank"].name}})),field:"name",label:v("bankName"),sx:{my:1}}),"CNY"===(null===N||void 0===N?void 0:N.currency)?(0,g.jsx)(x.XI,{field:"displayName",label:v("displayName")+"*",sx:{my:2}}):(0,g.jsx)(x.o7,{field:"displayName",label:v("displayName")+"*",sx:{my:2}}),"CNY"===(null===N||void 0===N?void 0:N.currency)?(0,g.jsx)(x.XI,{field:"accountName",label:v("accountName")+"*",sx:{my:2}}):(0,g.jsx)(x.o7,{field:"accountName",label:v("accountName")+"*",sx:{my:2}}),"CNY"===(null===N||void 0===N?void 0:N.currency)&&(0,g.jsx)(x.XI,{field:"phone",label:v("bankLinkMobile"),sx:{my:2}}),"CNY"===(null===N||void 0===N?void 0:N.currency)?(0,g.jsx)(x.XI,{field:"address1",label:v("bankAdderss1")+"*",sx:{my:2}}):(0,g.jsx)(x.o7,{field:"address1",label:v("bankAdderss1")+"*",sx:{my:2}}),"CNY"===(null===N||void 0===N?void 0:N.currency)?(0,g.jsx)(x.XI,{field:"address2",label:v("bankAdderss2"),sx:{my:2}}):(0,g.jsx)(x.o7,{field:"address2",label:v("bankAdderss2"),sx:{my:2}}),"CNY"===(null===N||void 0===N?void 0:N.currency)?(0,g.jsx)(x.XI,{field:"city",label:v("bankCity")+"*",sx:{my:2}}):(0,g.jsx)(x.o7,{field:"city",label:v("bankCity")+"*",sx:{my:2}}),"CNY"===(null===N||void 0===N?void 0:N.currency)?(0,g.jsx)(x.XI,{field:"state",label:v("bankProvince"),sx:{my:2}}):(0,g.jsx)(x.o7,{field:"state",label:v("bankProvince"),sx:{my:2}}),"CNY"===(null===N||void 0===N?void 0:N.currency)?(0,g.jsx)(x.XI,{field:"postcode",label:v("bankZipCode"),sx:{my:2}}):(0,g.jsx)(x.o7,{field:"postcode",label:v("bankZipCode"),sx:{my:2}}),(0,g.jsx)(x.N2,{field:"region",options:U,label:v("bankCountry")+"*",sx:{my:1,width:"100%"},getOptionLabel:function(e){return""===e?"":e.label?v("".concat(e.label)):v("countrys.".concat(e))},size:"middle"}),"CNY"===(null===N||void 0===N?void 0:N.currency)?(0,g.jsx)(x.XI,{field:"accountNumberOrIban",label:v("accountNumberOrIban")+"*",sx:{my:2}}):(0,g.jsx)(x.o7,{field:"accountNumberOrIban",label:v("accountNumberOrIban")+"*",sx:{my:2}}),"CNY"===(null===N||void 0===N?void 0:N.currency)?(0,g.jsx)(x.XI,{field:"swiftCodeOrBic",label:v("BIC/SWIFT"),sx:{my:2}}):(0,g.jsx)(x.o7,{field:"swiftCodeOrBic",label:v("BIC/SWIFT"),sx:{my:2}}),"CNY"===(null===N||void 0===N?void 0:N.currency)?(0,g.jsx)(x.XI,{field:"branchOrABARoutingCode",label:v("bankBranch"),sx:{my:2}}):(0,g.jsx)(x.o7,{field:"branchOrABARoutingCode",label:v("bankBranch"),sx:{my:2}}),(0,g.jsx)(x.RM,{field:"isSelfAccount",label:v("isSelfAccount"),sx:{my:2}})]})}),(0,g.jsx)(m.Z,{loading:_}),(0,g.jsx)(o.Z,{sx:{textAlign:"center"},children:(0,g.jsx)(h.C5,{onClick:ne,children:v("submit")})})]})}}}]);