"use strict";(self.webpackChunk_decode_crm_client=self.webpackChunk_decode_crm_client||[]).push([[1568],{84618:function(e,n,t){t.d(n,{Z:function(){return f}});var r=t(99932),i=t(78450),o=t(52398),s=t(17969),a=t(74482),l=t(25624),c=(t(2028),t(99350)),u=t(9703),d=t(2898),p=(t(3641),t(70289));function f(e){var n=e.open,t=e.onClose,f=e.onResetPassword,x=e.type,h=e.ticket,m=e.clientApi,v=e.mutate,g=void 0===v?function(){}:v,Z=e.closeAll,b=(0,d.Z)().t,y=(0,s.useState)(!1),w=(0,o.Z)(y,2),j=w[0],S=w[1],k=(0,s.useState)({}),C=(0,o.Z)(k,2),D=(C[0],C[1],(0,s.useState)({})),P=(0,o.Z)(D,2),T=(P[0],P[1],(0,s.useState)(!1)),N=(0,o.Z)(T,2),I=(N[0],N[1],(0,c.Ds)().enqueueSnackbar),L=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,S(!0),"positions"!==x){e.next=15;break}if(Z){e.next=9;break}return e.next=6,null===m||void 0===m?void 0:m.closePosition(h);case 6:n=e.sent,e.next=13;break;case 9:return console.log("aaaaa"),e.next=12,null===m||void 0===m?void 0:m.closeAll();case 12:n=e.sent;case 13:e.next=24;break;case 15:if(Z){e.next=21;break}return e.next=18,null===m||void 0===m?void 0:m.cancelOrder(h);case 18:n=e.sent,e.next=24;break;case 21:return e.next=23,null===m||void 0===m?void 0:m.cancelAll();case 23:n=e.sent;case 24:return console.log(n),e.next=27,g();case 27:I(b("positions"===x?"tradeCloseSuccess":"tradeCancelSuccess"),{variant:"success"}),S(!1),t(),e.next=36;break;case 32:e.prev=32,e.t0=e.catch(0),S(!1),"incorrectPassword"===e.t0.message?(I(b("incorrectPassword"),{variant:"error"}),t(),f()):I(b(e.t0.message),{variant:"error"});case 36:case"end":return e.stop()}}),e,null,[[0,32]])})));return function(){return e.apply(this,arguments)}}();return(0,p.jsx)(u.ZP,{open:n,onClose:t,save:L,saveLoading:j,children:(0,p.jsx)(a.Z,{sx:{width:400,mx:"auto",textAlign:"center"},children:(0,p.jsx)(l.Z,{sx:{mb:2,fontSize:18},children:b(Z?"positions"===x?"whetherToCloseAll":"cancelPendingAll":"positions"===x?"whetherToClose":"cancelPending")})})})}},8675:function(e,n,t){t(17969);var r=t(3536),i=t(1532),o=t(70289);n.Z=function(e){var n=e.loading;return(0,o.jsx)(r.Z,{sx:{zIndex:"9999999"},open:n,children:(0,o.jsx)(i.Z,{})})}},56039:function(e,n,t){t.d(n,{b:function(){return a}});var r=t(58173),i=t(17969),o=t(69580),s=t(72667),a=function(e){(0,s.Z)(e);var n=(0,o.Z)();(0,i.useEffect)((function(){if(!(0,r.isNil)(e)&&0!==e.length){var t=s.H.subscribe((function(e){var t=e.response;console.log("watch symbols",t.map((function(e){return e.symbol}))),n.watch(t.map((function(e){return e.symbol})))}));return function(){t&&t(),n.unwatch()}}n.unwatch()}),[e])}},69580:function(e,n,t){t.d(n,{Q:function(){return p}});var r=t(99932),i=t(78450),o=t(24572),s=t(75782),a=t(17969),l=t(70858),c=t(53707),u=t(14517),d=t(72667),p=(0,u.ZP)((function(e,n){return{response:{}}})),f=l.url.join("wss://mt4-api.decodeex.com/","/"),x=new c.Z(f,(function(e){var n=JSON.parse(e.data),t=n.s,r=n.b,i=n.a,a=n.o;n.h,n.l,n.c,n.v;null==a&&p.setState({response:(0,s.Z)((0,s.Z)({},p.getState().response),{},(0,o.Z)({},t,(0,s.Z)((0,s.Z)({},p.getState().response[t]||{}),{},(0,o.Z)({},"std",{bid:r,ask:i}),d.H.getState().KVResponse[t]||{})))})}),"MT4Quote");n.Z=function(){var e=(0,a.useMemo)((function(){return{watch:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x.send_({c:"subm",ls:n},!0));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),unwatch:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x.send_({c:"unsubm"},!0));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),watchQuote:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x.send_({c:"subm"},!0));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),unwatchQuote:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x.send_({c:"unsubm"},!0));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),watchHist:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x.send_({c:"ohlc"},!0));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),unwatchHist:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x.send_({c:"unohlc"},!0));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}),[]);return e}},72667:function(e,n,t){t.d(n,{H:function(){return c}});var r=t(17969),i=t(70858),o=t(53707),s=t(14517),a=t(58173),l=i.url.join("wss://mt4-api.decodeex.com/","/"),c=(0,s.ZP)((function(e,n){return{response:[]}})),u=new o.Z(l,(function(e){var n=JSON.parse(e.data).map((function(e){return{symbol:e.s,contractSize:e.n,currency:e.c,digits:e.d,decimal:e.d}})),t=(0,a.keyBy)(n,"symbol");c.setState({response:n,KVResponse:t})}),"MT4SymbolInfo");n.Z=function(e){var n=(0,r.useRef)(!1),t=(0,r.useRef)([]),i=(0,r.useId)();(0,a.isNil)(e)||0===e.length?(n.current=!1,t.current=[]):n.current&&t.current===e||(n.current=!0,t.current=e,u.send_({c:"symbol",ls:e,r:i},!0))}},5524:function(e,n,t){t.d(n,{W:function(){return f}});var r=t(52398),i=(t(40208),t(2898)),o=(t(68846),t(1079),t(74482)),s=t(13827),a=t(25624),l=t(66296),c=t(52126),u=(t(99350),t(17969)),d=(t(8675),t(58173)),p=t(70289),f=function(e){var n,t,f=e.children,x=e.item,h=(0,u.useState)(null),m=(0,r.Z)(h,2),v=m[0],g=m[1],Z=(0,i.Z)().t,b=function(){g(null)},y=Boolean(v),w=[{label:"S/L",value:(0,d.isNil)((0,d.get)(x,"stopLossing"))?"-":(0,c.DU)((0,d.get)(x,"stopLossing"))},{label:Z("swap"),value:(0,d.isNil)((0,d.get)(x,"swap"))?"-":(0,c.DU)((0,d.get)(x,"swap"))},{label:"T/P",value:(0,d.isNil)((0,d.get)(x,"takeProfit"))?"-":(0,c.DU)((0,d.get)(x,"takeProfit"))},{label:Z("taxes"),value:(0,d.isNil)((0,d.get)(x,"taxes"))?"-":(0,c.DU)((0,d.get)(x,"taxes"))},{label:"ID",value:(0,d.get)(x,"ticket")},{label:Z("charges"),value:(0,d.isNil)((0,d.get)(x,"charges"))?"-":(0,c.DU)((0,d.get)(x,"charges"))},new Date(null===x||void 0===x||null===(n=x.rawData)||void 0===n?void 0:n.closeTime).getTime()<=0?{}:{label:Z("tradeCloseTime"),value:(0,c.o0)((0,d.get)(x,"rawData.closeTime"))}];return console.log(new Date(null===x||void 0===x||null===(t=x.rawData)||void 0===t?void 0:t.closeTime).getTime()),(0,p.jsxs)(o.Z,{onMouseEnter:function(e){g(e.currentTarget)},onMouseLeave:b,children:[f,(0,p.jsx)(s.ZP,{id:"mouse-over-popover",sx:{pointerEvents:"none"},open:y,anchorEl:v,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:b,disableRestoreFocus:!0,children:(0,p.jsxs)(o.Z,{px:3,py:2,sx:{width:400},children:[(0,p.jsx)(a.Z,{sx:{fontSize:12,mb:1},children:(0,d.isNil)((0,d.get)(x,"rawData.openTime"))?"-":(0,c.o0)((0,d.get)(x,"rawData.openTime"))}),(0,d.chunk)(w,2).map((function(e,n){return(0,p.jsx)(l.Z,{direction:"row",alignItems:"center",spacing:3,children:e.map((function(e,n){return(0,p.jsxs)(l.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",flex:1,children:[(0,p.jsx)(a.Z,{sx:{fontSize:12},children:(0,d.get)(e,"label")}),(0,p.jsx)(a.Z,{sx:{fontSize:12},children:(0,d.get)(e,"value")})]},n)}))},n)}))]})})]})}},61568:function(e,n,t){t.d(n,{Z:function(){return oe}});var r=t(84691),i=t(99932),o=t(78450),s=t(75782),a=t(52398),l=t(40208),c=t(2898),u=t(68846),d=t(1079),p=t(25624),f=t(66296),x=t(74482),h=t(13827),m=t(80809),v=t(73283),g=t(52126),Z=t(99350),b=t(17969),y=t(8675),w=t(58173),j=t(5524),S=t(34175),k=t(3641),C=t(84618),D=t(66601),P=t(85692),T=t(35018),N=t(72667),I=t(69580),L=t(25311),z=t(56039),W=t(42049),A=t(1532),O=t(44946),F=t(47452),H=t(64868),B=t(80014),M=t(18238),q=t(77323),R=t(66313),E=t(26056),_=t(74593),U=t(53705),Q=t(48675),V=t(50258),J=t(66265),K=t(47431),X=t(53664),$=t(25832),G=t(70289),Y=(0,M.Z)(q.Z)((function(e){e.theme;return{backgroundColor:"rgb(40,40,61)",borderRadius:"6px"}})),ee=function(e){var n,t=(0,c.Z)().t,r=(0,B.H)((function(e){return[e.updateOrderDetail,e.setUpdateOrderDetail]})),l=(0,a.Z)(r,2),d=l[0],f=l[1],h=(0,$.W)(),m=(0,b.useState)(!1),v=(0,a.Z)(m,2),g=v[0],y=v[1],j=(0,b.useState)(!1),C=(0,a.Z)(j,2),P=C[0],T=C[1],N=(0,b.useState)(new Date((0,w.get)(d,"rawData.expiration")).getTime()<=new Date(null).getTime()?null:new Date((0,w.get)(d,"rawData.expiration"))),I=(0,a.Z)(N,2),L=I[0],z=I[1],W=(0,b.useState)((function(){return!(0,w.isNil)(L)})),H=(0,a.Z)(W,2),M=H[0],ee=H[1],ne=(0,b.useState)(null),te=(0,a.Z)(ne,2),re=(te[0],te[1]),ie=(0,b.useState)(!1),oe=(0,a.Z)(ie,2),se=oe[0],ae=oe[1],le=(0,Z.Ds)().enqueueSnackbar,ce=(0,b.useState)(0==(0,w.get)(d,"stopLossing")?"":(0,w.get)(d,"stopLossing")||""),ue=(0,a.Z)(ce,2),de=ue[0],pe=ue[1],fe=(0,b.useState)(0==(0,w.get)(d,"takeProfit")?"":(0,w.get)(d,"takeProfit")||""),xe=(0,a.Z)(fe,2),he=xe[0],me=xe[1],ve=(0,b.useState)((0,w.get)(d,"lot")),ge=(0,a.Z)(ve,2),Ze=ge[0],be=ge[1],ye=(0,b.useState)(!1),we=(0,a.Z)(ye,2),je=we[0],Se=we[1],ke=(0,b.useState)(1),Ce=(0,a.Z)(ke,2),De=Ce[0],Pe=Ce[1],Te=(0,b.useState)((0,w.get)(d,"startPrice")||0),Ne=(0,a.Z)(Te,2),Ie=Ne[0],Le=Ne[1],ze=(0,u._pY)(),We=ze.data,Ae=ze.isLoading,Oe=(0,w.find)(We,(function(e){return e.login===(0,w.get)(d,"login")})),Fe=(0,u.vk$)({category:(0,w.get)(d,"rawData.:category.id"),request:!0}),He=Fe.data,Be=Fe.isLoading,Me=(0,w.find)(He,(function(e){return e.symbol===(0,w.get)(d,"symbol")}));console.log("orderDetail",d,Me);var qe=(0,u.OhN)({accountId:(0,w.get)(Oe,"id")}),Re=qe.data,Ee=qe.mutate,_e=qe.isLoading,Ue=(0,b.useRef)(),Qe=(0,b.useRef)(),Ve=(0,b.useRef)(),Je=[{label:t("bid"),value:"-/-",ref:Qe},{label:t("ask"),value:"-/-",ref:Ve}],Ke=(0,k.Z)(null===Re||void 0===Re?void 0:Re.login,null===Re||void 0===Re?void 0:Re.password,null===Re||void 0===Re?void 0:Re.groupType);(0,b.useEffect)((function(){var e=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(!0),T(!1),e.next=5,Ke.login();case 5:y(!1),T(!0),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),"incorrectPassword"===e.t0.message&&Se(!0),y(!1),T(!1);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return null!==Re&&void 0!==Re&&Re.login&&!_e&&(Re.hasPassword?e():Se(!0)),function(){T(!1)}}),[null===Re||void 0===Re?void 0:Re.login,_e,(0,w.get)(Me,"symbol"),De]),(0,b.useEffect)((function(){if(P&&Ve.current&&Qe.current){(0,w.isFunction)(Ue.current)&&Ue.current();Ue.current=null===Ke||void 0===Ke?void 0:Ke.watch((0,w.get)(Me,"symbol"),(e=Ve.current,n=Qe.current,function(t){t.quote.symbol===(0,w.get)(Me,"symbol")&&(null!==n&&void 0!==n&&n.innerHTML&&(n.innerHTML=(0,S.currencyFormatorWithDecimal)(t.quote.bid,"",(0,w.get)(Me,"decimal"),!0)),null!==e&&void 0!==e&&e.innerHTML&&(e.innerHTML=(0,S.currencyFormatorWithDecimal)(t.quote.ask,"",(0,w.get)(Me,"decimal"),!0)))}))}var e,n;return function(){null===Ke||void 0===Ke||Ke.unwatch((0,w.get)(Me,"symbol")),(0,w.isFunction)(Ue.current)&&Ue.current()}}),[P,Qe.current,Ve.current]);var Xe=[{label:t("Buy limit"),value:"BuyLimit"},{label:t("Sell limit"),value:"SellLimit"},{label:t("Buy stop"),value:"BuyStop"},{label:t("Sell stop"),value:"SellStop"},{label:t("buy"),value:"Buy"},{label:t("sell"),value:"Sell"}],$e=Ae||_e||Be,Ge=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,re(null),ae(!0),e.next=5,n();case 5:e.next=15;break;case 7:if(e.prev=7,e.t0=e.catch(0),console.log(e.t0),"incorrectPassword"!==e.t0.message){e.next=14;break}Se(!0),e.next=15;break;case 14:throw e.t0;case 15:return e.prev=15,ae(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,7,15,18]])})));return function(n){return e.apply(this,arguments)}}(),Ye=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={BuyLimit:k.M.BuyLimit,SellLimit:k.M.SellLimit,BuyStop:k.M.BuyStop,SellStop:k.M.SellStop},e.next=3,Ge((0,o.Z)((0,i.Z)().mark((function e(){var r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=M&&L?Math.floor(L.getTime()/1e3):null,(o=n[(0,w.get)(d,"type")])!==k.M.BuyLimit&&o!==k.M.BuyStop){e.next=8;break}if(!(he&&Number(he)<Number(Ie))){e.next=6;break}throw new Error("takeProfitLowerThanPrice");case 6:if(!(de&&Number(de)>Number(Ie))){e.next=8;break}throw new Error("stopLossHigherThanPrice");case 8:if(o!==k.M.SellLimit&&o!==k.M.SellStop){e.next=13;break}if(!(he&&Number(he)>Number(Ie))){e.next=11;break}throw new Error("takeProfitHigherThanPrice");case 11:if(!(de&&Number(de)<Number(Ie))){e.next=13;break}throw new Error("stopLossLowerThanPrice");case 13:return console.log("send"),e.next=16,Ke.modify(Me.symbol,(0,w.get)(d,"ticket"),Number(Ie),de?Number(de):null,he?Number(he):null,r);case 16:f((0,s.Z)((0,s.Z)({},d),{},{startPrice:Number(Ie),stopLossing:Number(de),takeProfit:Number(he),rawData:(0,s.Z)((0,s.Z)({},(0,w.get)(d,"rawData")),{},{expiration:L?L.toISOString():null})})),le(t("updateSuccess"),{variant:"success"}),setTimeout((function(){h(/balanceHook/)}),400),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(0),console.log(e.t0),le(t("updateFailed",{reason:t(e.t0.message)}),{variant:"error"});case 25:case"end":return e.stop()}}),e,null,[[0,21]])}))));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),en=!P||M&&!(0,X.Z)(L)||Ie==(0,w.get)(d,"startPrice")&&de==(0,w.get)(d,"stopLossing")&&he==(0,w.get)(d,"takeProfit")&&(!M||(0,X.Z)(L)&&L.getTime()===new Date((0,w.get)(d,"rawData.expiration")).getTime());return(0,G.jsxs)(x.Z,{sx:{px:3,pb:3,pt:3},children:[$e?(0,G.jsx)(q.Z,{sx:{height:"200px"},alignItems:"center",justifyContent:"center",children:(0,G.jsx)(A.Z,{})}):(0,G.jsxs)(q.Z,{flex:1,spacing:1,children:[(0,G.jsx)(q.Z,{alignItems:"center",justifyContent:"center",direction:"row",sx:{position:"relative",width:"100%"},children:Me&&(0,G.jsx)(_.Z,{item:Me,borderColor:"#3C3C50"})}),(0,G.jsxs)(Y,{sx:{p:0},children:[(0,G.jsx)(E.nq,{title:t("accounts"),sx:{p:2,py:1},children:"FX ".concat(Oe.login)}),Oe&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(O.Z,{}),(0,G.jsxs)(q.Z,{sx:{p:2,py:1},children:[(0,G.jsxs)(q.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,G.jsx)(q.Z,{sx:{borderRadius:"100%",overflow:"hidden"},children:(0,G.jsx)(R.Z,{size:20,country:(0,w.get)(Oe,"country")})}),(0,G.jsx)(p.Z,{children:(0,w.get)(Oe,"currency")})]}),Oe.list&&(0,G.jsx)(q.Z,{sx:{mt:1},children:(0,G.jsx)(E.gp,{selectedAccountDetail:Oe})})]})]})]}),(0,G.jsx)(Y,{sx:{p:0},children:(0,G.jsx)(q.Z,{sx:{p:2,py:1},spacing:2,direction:"row",alignItems:"center",justifyContent:"space-between",children:Je.map((function(e,n){return(0,G.jsxs)(x.Z,{children:[(0,G.jsx)(p.Z,{sx:{color:"#B4B4C8"},children:e.label}),(0,G.jsx)(p.Z,{fontSize:"24px",fontWeight:"600",ref:e.ref,children:e.value})]},n)}))})}),(0,G.jsxs)(Y,{children:[(0,G.jsxs)(x.Z,{sx:{p:2,py:1},children:[(0,G.jsx)(p.Z,{sx:{color:"#B4B4C8"},children:t("pendingOrderTrade")}),(0,G.jsxs)(E.nq,{title:t("type"),children:[t("open"===(0,w.get)(d,"status")?"openOrder":"positions"===(0,w.get)(d,"status")?"pendingOrder":"")," | ",null===(n=(0,w.find)(Xe,(function(e){return e.value==(0,w.get)(d,"type")})))||void 0===n?void 0:n.label]})]}),(0,G.jsx)(O.Z,{}),(0,G.jsx)(E.nq,{sx:{p:2,py:1},title:t("atPrice"),children:(0,G.jsx)(U.Xi,{variant:"outlined",size:"small",type:"number",inputProps:{style:{textAlign:"right"}},value:Ie,placeholder:t("notSet"),onChange:function(e){return Le(e.target.value)},disabled:"open"!==(0,w.get)(d,"status")})})]}),(0,G.jsxs)(Y,{children:[(0,G.jsx)(E.nq,{sx:{p:2,py:1,pt:1.5},title:t("lot"),children:(0,G.jsx)(E.fe,{variant:"outlined",size:"small",type:"number",inputProps:{style:{textAlign:"right"}},value:Ze,onChange:be,placeholder:t("notSet"),disabled:!0})}),(0,G.jsx)(O.Z,{}),(0,G.jsx)(E.nq,{sx:{p:2,py:1},title:t("stopLoss"),children:(0,G.jsx)(E.fe,{variant:"outlined",size:"small",type:"number",margin:"dense",inputProps:{style:{textAlign:"right"}},value:de,onChange:pe,placeholder:t("notSet")})}),(0,G.jsx)(O.Z,{}),(0,G.jsx)(E.nq,{sx:{p:2,py:1},title:t("takeProfit"),children:(0,G.jsx)(E.fe,{variant:"outlined",size:"small",type:"number",margin:"dense",inputProps:{style:{textAlign:"right"}},value:he,onChange:me,placeholder:t("notSet")})}),(0,G.jsx)(O.Z,{}),(0,G.jsx)(E.nq,{sx:{p:2,py:1},title:t("expiration"),children:(0,G.jsxs)(q.Z,{alignItems:"center",direction:"row",children:[(0,G.jsx)(F.Z,{checked:M,onChange:function(e){ee(e.target.checked)}}),(0,G.jsx)(Q._,{dateAdapter:J.Z,children:(0,G.jsx)(V.x,{disabled:!M,value:L,onChange:function(e){z(e)},OpenPickerButtonProps:{sx:{p:0,mr:0}},renderInput:function(e){var n=e.inputRef,r=e.inputProps,i=e.InputProps;return(0,G.jsx)(U.Xi,{size:"small",ref:n,placeholder:t("notSet"),inputProps:(0,s.Z)((0,s.Z)({},r),{},{style:{textAlign:"right"}}),InputProps:(0,s.Z)((0,s.Z)({},i),{},{sx:{px:0}})})}})})]})})]}),(0,G.jsx)(q.Z,{sx:{py:1,width:"100%"},children:(0,G.jsx)(K.Z,{loadingIndicator:g?t("verifying"):null,variant:"contained",onClick:Ye,disabled:en,loading:se||g,sx:{flex:1,color:"#000"},children:t("update")})})]}),je&&(0,G.jsx)(D.Z,{open:je,onClose:function(){return Se(!1)},onSuccess:function(){Ee(),Pe(De+1)},forexAccountId:(0,w.get)(Oe,"login")})]})},ne=function(){var e=(0,B.H)((function(e){return[e.updateOrderDialogOpen,e.closeUpdateOrderDialog]})),n=(0,a.Z)(e,2),t=n[0],r=n[1];return(0,G.jsxs)(W.I,{fullWidth:!0,maxWidth:"xs",open:t,onClose:r,children:[t&&(0,G.jsx)(ee,{}),(0,G.jsx)(H.Z,{onClick:r,sx:{position:"absolute",left:12,top:14},children:(0,G.jsx)(m.Z,{})})]})},te=(0,b.memo)((function(e){var n=e.item,t=(0,b.useRef)();return(0,b.useEffect)((function(){var e=I.Q.subscribe((function(e){var r=e.response[n.symbol];if(r){var i=r.std;t.current&&i&&(t.current.innerHTML=(0,S.currencyFormatorWithDecimal)([0,2,4].includes(n.rawData.cmd)?i.bid:i.ask,"",r.decimal,!0))}}));return function(){e()}}),[n.symbol]),(0,G.jsx)(p.Z,{sx:{fontSize:"12px"},ref:t,children:(0,S.currencyFormatorWithDecimal)(n.currentPrice,"",n.decimal,!0)})}),(function(e,n){var t,r;return(null===e||void 0===e||null===(t=e.item)||void 0===t?void 0:t.symbol)===(null===n||void 0===n||null===(r=n.item)||void 0===r?void 0:r.symbol)})),re=(0,b.memo)((function(e){var n=e.item,t=(0,b.useRef)();return console.log(n),(0,b.useEffect)((function(){var e=N.H.subscribe((function(e){e.response;var r=(0,w.find)(e.response,(function(e){return e.symbol===n.symbol}));r&&t.current&&(t.current.innerHTML=(0,S.currencyFormatorWithDecimal)(n.startPrice,"",r.decimal,!0))}));return function(){e()}}),[n.symbol]),(0,G.jsx)(p.Z,{sx:{fontSize:"12px"},ref:t,children:(0,S.currencyFormatorWithDecimal)(n.startPrice,"",n.decimal,!0)})}),(function(e,n){var t,r;return(null===e||void 0===e||null===(t=e.item)||void 0===t?void 0:t.symbol)===(null===n||void 0===n||null===(r=n.item)||void 0===r?void 0:r.symbol)})),ie=(0,b.memo)((function(e){var n=e.item,t=(0,b.useRef)(),r=(0,T.F)().getStockColorValue;return(0,b.useEffect)((function(){var e=I.Q.subscribe((function(e){var i=e.response,o=i[n.symbol];if(o){var s=o.std;if(s){var a,l=(0,L.$)(n.rawData,s.bid,s.ask,o.contractSize,o.currency,null===(a=n.rawData)||void 0===a?void 0:a.accountCurrency,i),c=(0,S.currencyFormatorWithDecimal)(l,"",2,!0);!(0,w.isNil)(c)&&t.current&&(t.current.innerHTML=c,t.current.style.color=r(l))}}}));return function(){e()}}),[n.symbol]),(0,G.jsx)(p.Z,{sx:{fontSize:"12px",fontWeight:700,color:r(n.profit)},ref:t,children:(0,S.currencyFormatorWithDecimal)(n.profit,"",2,!0)})}),(function(e,n){var t,r;return(null===e||void 0===e||null===(t=e.item)||void 0===t?void 0:t.symbol)===(null===n||void 0===n||null===(r=n.item)||void 0===r?void 0:r.symbol)})),oe=(0,b.forwardRef)((function(e,n){var t=e.type,S=e.autoHeight,N=void 0!==S&&S,I=e.login,L=e.home,W=void 0!==L&&L,A=e.hidePagination,O=void 0===A||A,F=e.closeAll,H=void 0!==F&&F,M=e.setCloseAll,q=void 0===M?function(){}:M,R=e.forexAccountId,E=e.setDisabled,_=void 0===E?function(){}:E,U=(0,c.Z)().t,Q=(0,Z.Ds)().enqueueSnackbar,V=(0,b.useState)(!1),J=(0,a.Z)(V,2),K=J[0],X=J[1],$=(0,b.useState)(null),Y=(0,a.Z)($,2),ee=Y[0],oe=Y[1],se=(0,b.useState)(I),ae=(0,a.Z)(se,2),le=ae[0],ce=ae[1],ue=(0,b.useState)(null),de=(0,a.Z)(ue,2),pe=de[0],fe=de[1],xe=(0,b.useState)(!1),he=(0,a.Z)(xe,2),me=he[0],ve=he[1],ge=(0,b.useState)(!1),Ze=(0,a.Z)(ge,2),be=Ze[0],ye=Ze[1],we=(0,b.useState)({}),je=(0,a.Z)(we,2),Se=je[0],ke=je[1],Ce=((0,P.Z)().user,(0,T.F)().getStockColorValue,(0,B.H)((function(e){return[e.setUpdateOrderDialogOpen,e.setUpdateOrderDetail]}))),De=(0,a.Z)(Ce,2),Pe=De[0],Te=De[1],Ne=(0,u.mxK)((0,s.Z)({type:t,login:I},W&&"closed"===t?{startDate:(0,g.xA)(new Date((new Date).getTime()-5184e5).toISOString()),endDate:(0,g.xA)((new Date).toISOString())}:{})),Ie=Ne.data,Le=Ne.mutate,ze=Ne.isValidating,We=function(){setTimeout((function(){Le()}),800)},Ae=(0,u.OhN)({accountId:pe||R}).data;(0,z.b)("closed"===t?null:(0,w.uniq)(Ie.map((function(e){return e.symbol})))),(0,b.useEffect)((function(){H&&ye(!0)}),[H]),(0,b.useEffect)((function(){console.log(Ie),Ie.length>0?_(!1):_(!0)}),[ze]);var Oe=(0,k.Z)(null===Ae||void 0===Ae?void 0:Ae.login,null===Ae||void 0===Ae?void 0:Ae.password,null===Ae||void 0===Ae?void 0:Ae.groupType),Fe=function(){oe(null)};(0,b.useImperativeHandle)(n,(function(){return{resetValue:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),firstTrade:null===Ie||void 0===Ie?void 0:Ie[0]}}),[n]);var He=Boolean(ee),Be=He?"simple-popover":void 0,Me=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return X(!0),e.prev=1,e.next=4,(0,u.Hq6)(n);case 4:return e.next=6,We();case 6:Q(U("updateSuccess"),{variant:"success"}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),Q("".concat(U("updateFailed"),": ").concat(JSON.parse(e.t0.message).error.message),{variant:"error"});case 13:X(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(n){return e.apply(this,arguments)}}(),qe=[{headerName:U("login"),field:"login",flex:1,minWidth:80,renderCell:function(e){var n=e.row,t="copyTrade"===(0,w.get)(n,"accountType")?"#4BA3E3":"live"===(0,w.get)(n,"accountType")?"#56B583":"signal"===(0,w.get)(n,"accountType")?"#FFB400":"demo"===(0,w.get)(n,"accountType")?"#ffffff":"#ea580c";return(0,G.jsx)(j.W,{item:n,children:(0,G.jsx)(p.Z,{sx:{fontSize:"12px",color:t},children:(0,w.get)(n,"rawData.login")})})}},{headerName:U("lot"),field:"lot",flex:.5,minWidth:60,renderCell:function(e){var n=e.row;return(0,G.jsx)(j.W,{item:n,children:(0,G.jsx)(p.Z,{sx:{fontSize:"12px"},children:(0,g.DU)(n.lot)})})}},{headerName:U("symbol"),field:"symbol",flex:.5,minWidth:75,renderCell:function(e){var n=e.row;return(0,G.jsx)(j.W,{item:n,children:(0,G.jsx)(p.Z,{sx:{fontSize:"12px"},children:(0,w.get)(n,"displaySymbol")})})}},{headerName:U("type"),field:"type",flex:.5,minWidth:60,renderCell:function(e){var n=e.row;return(0,G.jsx)(j.W,{item:n,children:(0,G.jsx)(p.Z,{sx:{fontSize:"12px"},children:(0,w.get)(n,"orderCommand")})})}},{headerName:U("open"===t?"forexPendingOpenPrice":"forexOpenPrice"),field:"openPrice",minWidth:110,flex:1,align:"right",headerAlign:"right",renderCell:function(e){var n=e.row;return(0,G.jsx)(j.W,{item:n,children:(0,G.jsx)(re,{item:n})})}},{headerName:U("closed"===t?"forexClosedClosePrice":"forexNormalClosePrice"),field:"closePrice",minWidth:110,flex:1,align:"right",headerAlign:"right",renderCell:function(e){var n=e.row;return(0,G.jsx)(j.W,{item:n,children:(0,G.jsx)(te,{item:n})})}},{headerName:U("tradeCloseTime"),field:"closeTime",flex:1,minWidth:130,hide:"closed"!==t,renderCell:function(e){var n=e.row;return(0,G.jsxs)(j.W,{item:n,children:[(0,G.jsx)(p.Z,{sx:{fontSize:"12px",textOverflow:"ellipsis",overflow:"hidden",width:"100%"},children:(0,g.o0)(n.rawData.closeTime)})," "]})}}].concat((0,r.Z)("open"===t?[]:[{headerName:U("profit"),field:"profit",flex:1,minWidth:100,align:"right",headerAlign:"right",renderCell:function(e){var n=e.row;return(0,G.jsx)(j.W,{item:n,children:(0,G.jsx)(ie,{item:n})})}}]),[{headerName:U("actions"),field:"action",flex:1,minWidth:150,hide:"closed"===t,renderCell:function(e){var n=e.row;return"copyTrade"===n.accountType?null:(0,G.jsx)(f.Z,{direction:"row",spacing:1,children:"closed"!==t&&"copying"!==t&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(d.sq,{sx:{backgroundColor:"#505064",p:0,py:.3,px:1,alignItems:"center"},onClick:function(e){ke(n),ce(n.login),fe(n.rawData.accountId),n.hasPassword?(ye(!0),ce(n.rawData.accountId)):(ce(n.rawData.accountId),ve(!0))},children:[(0,G.jsx)(x.Z,{sx:{backgroundColor:"primary.rise",height:15,width:15,borderRadius:"50%",display:"flex",alignItems:"center",justifyItems:"center",textAlign:"center"},children:"positions"!==t?(0,G.jsx)(m.Z,{sx:{color:"#fff",fontSize:"14px"}}):(0,G.jsx)("img",{src:"/assets/icons/shut-down-line.svg",style:{width:"12px",position:"relative",left:"1px"}})}),(0,G.jsx)(p.Z,{sx:{fontSize:"12px",color:"primary.rise",ml:1},children:U("positions"===t?"positionClose":"cancel")})]}),(0,G.jsxs)(d.sq,{sx:{backgroundColor:"#505064",p:0,py:.3,px:1,alignItems:"center"},onClick:function(e){e.stopPropagation(),Pe(!0),Te(n)},children:[(0,G.jsx)(x.Z,{sx:{backgroundColor:"primary.rise",height:15,width:15,borderRadius:"50%",display:"flex",alignItems:"center",justifyItems:"center"},children:(0,G.jsx)(v.Z,{sx:{fontSize:"14px",color:"#fff"}})}),(0,G.jsx)(p.Z,{sx:{fontSize:"12px",color:"primary.rise",ml:1},children:U("edit")})]}),(0,G.jsx)(h.ZP,{id:Be,open:He&Se.ticket===n.ticket,anchorEl:ee,onClose:Fe,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,G.jsxs)(x.Z,{sx:{width:200,textAlign:"center",py:1},children:[(0,G.jsx)(p.Z,{sx:{mb:1},children:U("positions"===t?"whetherToClose":"cancelPending")}),(0,G.jsxs)(d.sq,{sx:{backgroundColor:"#505064",p:0,py:.3,px:1,alignItems:"center",mr:1},onClick:Fe,children:[(0,G.jsx)(m.Z,{fontSize:"18px",sx:{color:"#fff"}}),U("cancel")]}),(0,G.jsx)(d.sq,{sx:{backgroundColor:"#505064",p:0,py:.3,px:1,alignItems:"center"},onClick:(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==n.rawData.hasPassword){e.next=5;break}Fe(),ve(!0),e.next=8;break;case 5:return Fe(),e.next=8,Me({ticket:n.ticket,type:"positions"===t?"positions":"open",login:n.login});case 8:case"end":return e.stop()}}),e)}))),children:U("confirm")})]})})]})})}}]);return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(x.Z,{sx:{"& .style-header":{fontSize:14,backgroundColor:"#3C3C50",height:36,fontWeight:"bold"},"& .MuiDataGrid-columnHeaders":{borderRadius:0},height:"100%"},children:[(0,G.jsx)(l.Z,{columns:qe,rows:Ie,headerClassName:"style-header",cellClassName:"style-cell",hideFooter:!0,hidePagination:O,autoHeight:N}),(0,G.jsx)(C.Z,{open:be,onClose:function(){ye(!1),q(!1)},onResetPassword:function(){return ve(!0)},accountLogin:null===Ae||void 0===Ae?void 0:Ae.login,password:null===Ae||void 0===Ae?void 0:Ae.password,groupType:null===Ae||void 0===Ae?void 0:Ae.groupType,type:t,ticket:Se.ticket,clientApi:Oe,mutate:We,closeAll:H}),(0,G.jsx)(D.Z,{open:me,onClose:function(){return ve(!1)},forexAccountId:le,onSuccess:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("---------------------"),"positions"!==t){e.next=13;break}if(H){e.next=9;break}return e.next=5,null===n||void 0===n?void 0:n.closePosition(null===Se||void 0===Se?void 0:Se.ticket);case 5:r=e.sent,console.log(r),e.next=11;break;case 9:return e.next=11,null===n||void 0===n?void 0:n.closeAll();case 11:case 16:e.next=20;break;case 13:if(H){e.next=18;break}return e.next=16,null===n||void 0===n?void 0:n.cancelOrder(null===Se||void 0===Se?void 0:Se.ticket);case 18:return e.next=20,null===n||void 0===n?void 0:n.cancelAll();case 20:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}),(0,G.jsx)(ne,{})]}),(0,G.jsx)(y.Z,{loading:K})]})}))},25311:function(e,n,t){t.d(n,{$:function(){return o}});var r=t(58173),i=function(e,n,t,i,o,s){var a=t+n,l=i[a],c=(0,r.get)(l,"std");return null!=l&&c?(0===o?e/c.bid:e/c.ask).toFixed(2):(l=i[a=n+t],c=(0,r.get)(l,"std"),null!=l&&c?(0===o?e*c.bid:e*c.ask).toFixed(2):null)},o=function(e,n,t,r,o,s,a){var l=e.cmd,c=e.volume,u=e.openPrice,d=(e.accountGroupType,c/100*r),p=0;if(p=0===l?((n-u)*d).toFixed(2):((u-t)*d).toFixed(2),o!==s){var f=i(p,o,s,a,l);return null!=f?f:null==(f=i(p,o,"USD",a,l))||null==(f=i(f,"USD",s,a,l))?0:f}return p}}}]);