"use strict";(self.webpackChunk_decode_crm_client=self.webpackChunk_decode_crm_client||[]).push([[2407],{52471:function(e,n,t){var r=t(75782),s=t(99932),o=t(78450),c=t(52398),u=t(1350),i=t(92501),a=t(93461),l=t(17212),d=t(54223),f=t(80690),p=t(54181),h=t(3136),v=t(94088),w=t(97170),g=t(49293),Z=t(63413),k=t(7442),x=t(93484),S=t(23494),b=function(e){var n=e.onSuccess,t=e.forexAccountId,r=e.onClose,l=(0,v.Z)().t,d=(0,w.useState)({password:""}),f=(0,c.Z)(d,2),b=f[0],m=f[1],y=(0,w.useState)(null),C=(0,c.Z)(y,2),O=C[0],R=C[1],j=(0,w.useState)(!1),_=(0,c.Z)(j,2),q=_[0],E=_[1],N=(0,Z.OhN)({accountId:t}),I=N.data,D=(N.mutate,N.isLoading),L=(0,g.Z)(null===I||void 0===I?void 0:I.login,null===b||void 0===b?void 0:b.password,null===I||void 0===I?void 0:I.groupType),P=function(){r(),setTimeout((function(){m({password:""}),R(null),E(!1)}),200)},T=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E(!0),e.next=4,null===L||void 0===L?void 0:L.login();case 4:return e.next=6,(0,Z.RjV)({accountId:null===I||void 0===I?void 0:I.id,password:null===b||void 0===b?void 0:b.password});case 6:P(),n&&n(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),R(l((0,k.getErrorMessage)(e.t0)));case 13:return e.prev=13,E(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])})));return function(){return e.apply(this,arguments)}}();return D?(0,S.jsx)(p.Z,{sx:{py:2},direction:"row",alignItems:"center",justifyContent:"center",children:(0,S.jsx)(u.Z,{})}):(0,S.jsx)(p.Z,{spacing:2,sx:{width:"100%"},children:(0,S.jsxs)(p.Z,{spacing:2,children:[(0,S.jsx)(i.Z,{variant:"h5",children:l("requirePassword")}),(0,S.jsx)(i.Z,{variant:"body2",children:l("requirePasswordDesc",{login:null===I||void 0===I?void 0:I.login})}),(0,S.jsx)(x.dz,{values:b,setValues:m,children:(0,S.jsx)(x.xr,{field:"password",label:l("password"),sx:{my:1}})}),O&&(0,S.jsx)(a.Z,{children:(0,S.jsx)(i.Z,{textAlign:"center",color:"red",children:O})}),(0,S.jsxs)(p.Z,{direction:"row",spacing:1,alignItems:"center",justifyContent:"flex-end",children:[(0,S.jsx)(h.OK,{onClick:P,children:l("close")}),(0,S.jsx)(h.sq,{isLoading:q,onClick:T,children:l("confirm")})]})]})})};n.Z=function(e){var n=e.open,t=e.onClose,s=e.onSuccess,o=e.forexAccountId;return(0,S.jsx)(l.Z,{fullWidth:!0,maxWidth:"xs",open:n,onClose:t,PaperComponent:function(e){return(0,S.jsxs)(a.Z,{sx:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,S.jsx)(a.Z,{onClick:t,sx:{width:"100%",height:"100%",position:"fixed"}}),(0,S.jsx)(d.Z,(0,r.Z)((0,r.Z)({},e),{},{children:e.children}))]})},children:(0,S.jsx)(f.Z,{sx:{pb:5},children:(0,S.jsx)(b,{onSuccess:s,forexAccountId:o,onClose:t})})})}},97354:function(e,n,t){var r=t(93461),s=t(92501),o=(t(97170),t(23494));n.Z=function(e){var n=e.bg,t=e.component,c=e.text;return(0,o.jsx)(r.Z,{alignContent:"center",justifyContent:"center",sx:{minHeight:4,minWidth:4,px:1,backgroundColor:n,borderRadius:30},children:t||(0,o.jsx)(s.Z,{fontSize:12,color:"#141428",children:c})})}},49293:function(e,n,t){t.d(n,{M:function(){return v}});var r=t(99932),s=t(78450),o=t(97170),c=t(13939),u=t(60895),i=t(28759),a=t(83774),l=c.url.join("wss://mt4-api.decodeex.com/","/"),d=(0,i.ZP)((function(e,n){return{request:{},setRequests:function(n){return e((function(){return{request:n}}))},isRequesting:!1}})),f=(0,i.ZP)((function(e,n){return{quote:{},setQuote:function(n){return e((function(){return{quote:n}}))}}})),p=new u.Z(l,(function(e){var n,t=JSON.parse(e.data),r=t.e,s=t.c,o=t.l,c=t.s,u=t.b,i=t.a,a=t.t,l=t.tk,p=t.op;if((null===(n=d.getState().request)||void 0===n?void 0:n.login)===o){var v,w;if(r)return console.log("case 3"),v=s===h.BAD_REQUEST?"badRequest":s===h.LOGIN_ERROR?"incorrectPassword":s===h.NOT_FOUND?"notFound":r||"serverError",void d.setState({request:{success:!1,result:null,error:v,login:null},isRequesting:!1});if(l)return console.log("case 1"),void d.setState({request:{success:!0,result:null,error:null,login:null===(w=d.getState().request)||void 0===w?void 0:w.login}});if(c){var g={login:o,symbol:c,bid:u,ask:i,time:a};f.setState((function(){return{quote:g}}))}else{var Z;if(-3!==p)d.setState({request:{success:!0,result:null,error:null,login:null}}),console.warn("Received unknown ws message",t);else console.log("Login successfully"),console.log("case 2"),d.getState().isRequesting||d.setState({request:{success:!0,result:null,error:null,login:null===(Z=d.getState().request)||void 0===Z?void 0:Z.login}})}}})),h={BAD_REQUEST:400,NOT_FOUND:404,GENERAL_ERROR:500,LOGIN_ERROR:401},v={Buy:0,Sell:1,BuyLimit:2,SellLimit:3,BuyStop:4,SellStop:5};n.Z=function(e,n,t,c){var u="".concat(e,":").concat(encodeURIComponent(n));c&&(u+=":demo");var i=(0,o.useMemo)((function(){if((0,a.isNil)(n)||""==n)return null;var o=function(){var n=(0,s.Z)((0,r.Z)().mark((function n(){var t,s=arguments;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=(s.length>0&&void 0!==s[0]?s[0]:{}).isSendingOrder,d.setState({request:{success:!1,result:null,error:null,login:e},isRequesting:!!t}),n.next=5,new Promise((function(e,n){var t=setTimeout((function(){r(),e(!0)}),3e4),r=d.subscribe((function(s){var o=s.request;console.log("request",o),o.success&&(e(o),r(),clearTimeout(t)),o.error&&(n(new Error(o.error)),r(),clearTimeout(t))}))}));case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return{login:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.send_({c:"login",t:u,g:t},!0),e.next=3,o();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),watch:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n,s){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.send_({c:"sub",t:u,g:t,s:n},!0),e.abrupt("return",f.subscribe((function(e){s&&s(e)})));case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),unwatch:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.send_({c:"unsub",t:u,g:t,s:n},!0);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),closePosition:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.send_({c:"close",t:u,g:t,tk:n},!0),e.next=3,o();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),closeAll:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("close all"),p.send_({c:"close",t:u,g:t,tk:-1},!0),e.next=4,o();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),cancelOrder:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.send_({c:"cancel",t:u,g:t,tk:n},!0),e.next=3,o();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),cancelAll:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.send_({c:"cancel",t:u,g:t,tk:-1},!0),e.next=3,o();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),sendOrder:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n,s,c,i,a,l,d,f){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.send_({c:"order",t:u,g:t,s:n,op:s,vl:c,p:i,sl:a,tp:l,e:f,m:d},!0),e.next=3,o({isSendingOrder:!0});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(n,t,r,s,o,c,u,i){return e.apply(this,arguments)}}()}}),[t,u,n]);return i}},76658:function(e,n,t){t.d(n,{F:function(){return v}});var r=t(75782),s=t(99932),o=t(78450),c=t(68901),u=t(83774),i=t(24624),a=t(97170),l=t(84977),d=t(63413),f=["stockColor","syncVerifyStatusFromProfile"],p={greenUpRedDown:{up:"stockGreen",down:"stockRed"},greenDownRedUp:{up:"stockRed",down:"stockGreen"}},h={stockRed:"#f43f5e",stockGreen:"#34d399"},v=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).disableSyncService,n=void 0!==e&&e,t=(0,d.Un)(),v=t.data,w=t.isLoading,g=(0,l.usePreferenceStore)((function(e){return e})),Z=g.stockColor,k=g.syncVerifyStatusFromProfile,x=(0,c.Z)(g,f),S=(0,i.pm)(),b=(0,a.useCallback)(function(){var e=(0,o.Z)((0,s.Z)().mark((function e(n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(0,u.get)(v,"preference.id")){e.next=5;break}return e.next=4,(0,d.ufZ)({payload:n,preferenceId:(0,u.get)(v,"preference.id")});case 4:return e.abrupt("return",e.sent);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),S.show({description:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),[v]),m=(0,a.useRef)(0);(0,a.useEffect)((function(){n||0!==m.current||w||!v||(k(v),m.current+=1)}),[v,w]);var y=Z||"greenUpRedDown",C=h[p[y].up],O=h[p[y].down];return(0,r.Z)((0,r.Z)({stockColor:y,stockUpColor:C,stockDownColor:O},x),{},{getStockColorValue:function(e){return e>0?C:e<0?O:"#78716c"},updatePreference:b,isLoading:w})}},60895:function(e,n,t){var r=t(99932),s=t(78450),o=t(40936),c=t(49962),u=t(13939),i=0,a=1,l=function(){function e(n,t){var r=this;(0,o.Z)(this,e),this.webSocketOnOpen=function(){console.log("[-- CONNECTION ESTABLISHED --]")},this.webSocketOnClose=function(){console.log("[-- CONNECTION CLOSED --]"),r.disconnect()},this.webSocketOnError=function(){console.log("[-- ERROR OCCURRED --]"),r.disconnect()},this.url=n,this.webSocketOnMessage=t}return(0,c.Z)(e,[{key:"connect_",value:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var n=this;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.webSocket){e.next=10;break}return this.webSocket=new WebSocket(this.url,["aspnetcore-ws.json"]),this.state=i,this.webSocket.onopen=this.webSocketOnOpen,this.webSocket.onclose=this.webSocketOnClose,this.webSocket.onerror=this.webSocketOnError,this.webSocket.onmessage=this.webSocketOnMessage,e.next=9,(0,u.waitUntil_)((function(){return null==n.webSocket||n.webSocket.readyState===a}),100,30);case 9:console.log("ready",this.webSocket.readyState);case 10:return e.abrupt("return",null!=this.webSocket&&this.webSocket.readyState===a);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){this.webSocket&&(this.webSocket.close(),delete this.webSocket)}},{key:"send_",value:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n,t){var s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connect_();case 2:if(!e.sent){e.next=8;break}return s=JSON.stringify(n),this.webSocket.send(s),e.abrupt("return",!0);case 8:if(t){e.next=10;break}throw new Error("Cannot connect to server.");case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,this)})));return function(n,t){return e.apply(this,arguments)}}()}]),e}();n.Z=l}}]);