"use strict";(self.webpackChunk_decode_crm_client=self.webpackChunk_decode_crm_client||[]).push([[2611],{52611:function(e,n,r){r.r(n),r.d(n,{default:function(){return B}});var t=r(16487),i=r(12130),o=r(31530),c=r(99317),l=r(39702),a=r(88658),s=r(49802),d=r(64505),u=r(9763),x=r(93994),f=r(96906),p=r(91474),g=r(13392),m=r(93447),h=r(2211),Z=(r(82095),r(13526)),j=r(24786),b=r(27203),v=(r(42733),r(35616),r(43435),r(95434)),y=r(23440),k=r(7541),C=r(41540),S=r(3019),F=r(36376),I=(r(65576),r(35291)),w=r(90617),D=r(83427),P=r(96537),R=r(54841),L=r(4544),z=r(38702),A=r(47769),H=r(799),E=r(98845),M=(0,o.memo)((function(e){var n=e.item,r=e.onClick,d=e.index,u=e.editing,x=void 0!==u&&u,f=e.onRemove,g=e.displayFavor,m=((0,a.Z)().t,(0,l.get)(n,"symbol")),b=(0,s.d2j)({symbol:m}),R=(0,v.F)({disableSyncService:!0}).getStockColorValue,z=R((0,l.get)(n,"priceChange")),A=(0,D.useFavorite)(),H=A.favoritesId,M=A.setFavoritesId,_=(0,o.useState)(z),W=(0,i.Z)(_,2),B=W[0],T=W[1],q=(0,l.first)(b),O=(0,o.useRef)(),J=(0,o.useRef)(),K=(0,o.useRef)(),N=(0,o.useRef)(),V=(0,o.useRef)(),$=(0,o.useRef)();(0,o.useEffect)((function(){return L.useMarketPriceStore.subscribe((function(e){if(Boolean((0,l.get)(e.prices,"".concat(m)))){var r=(0,Z.currencyFormatorWithDecimal)((0,l.get)(e.prices,"".concat(m,".low")),"",n.decimal,!0),t=(0,Z.currencyFormatorWithDecimal)((0,l.get)(e.prices,"".concat(m,".high")),"",n.decimal,!0),i=(0,Z.currencyFormatorWithDecimal)((0,l.get)(e.prices,"".concat(m,".bid")),"",n.decimal,!0),o=(0,l.get)(e.prices,"".concat(m,".ask"))-q,c=(0,Z.currencyFormatorWithDecimal)(o,"",n.decimal,!0),a=(0,Z.percentageFormator)(o/q);O.current.innerHTML=r,J.current.innerHTML=t,K.current.innerHTML=i,N.current.innerHTML=c,V.current.innerHTML=a;var s=R(o);N.current.style.color=s,V.current.style.color=s,$.current.style.backgroundColor=s,s!==B&&T(s)}}))}),[n.decimal,q]);var G=[{component:function(e){return(0,E.jsx)(c.Z,{children:(0,E.jsx)(P.Z,{item:n,displaySignalDot:!0})})},flex:1},{component:function(e){return(0,E.jsx)(p.Z,{children:(0,E.jsx)(j.Z,{textAlign:"center",sx:{fontSize:"14px"},children:(0,Z.currencyFormatorWithDecimal)((0,l.first)(b),"",n.decimal,!0)})})},flex:1},{component:function(e){return(0,E.jsx)(c.Z,{alignItems:"center",justifyContent:"center",ref:$,sx:{backgroundColor:z,height:"24px",px:1,borderRadius:"4px"},children:(0,E.jsx)(F.Z,{symbol:(0,l.get)(n,"symbol"),tokenBuy:(0,l.get)(n,"tokenBuy"),decimal:(0,l.get)(n,"decimal"),initPrice:(0,l.get)(n,"price")})})},flex:1},{component:function(e){return(0,E.jsx)(c.Z,{direction:"row",justifyContent:"center",children:(0,E.jsx)(y.Z,{datas:b,color:B,height:40,width:120,backgroundColor:"#1E1E34"})})},flex:1},{component:function(e){return(0,E.jsx)(p.Z,{children:(0,E.jsx)(j.Z,{ref:K,textAlign:"center",sx:{fontSize:"14px"},children:"-/-"})})},flex:1},{component:function(e){return(0,E.jsx)(p.Z,{children:(0,E.jsx)(j.Z,{ref:O,textAlign:"center",sx:{fontSize:"14px"},children:"-/-"})})},flex:1},{component:function(e){return(0,E.jsx)(p.Z,{children:(0,E.jsx)(j.Z,{ref:J,textAlign:"center",sx:{fontSize:"14px"},children:"-/-"})})},flex:1},{component:function(e){return(0,E.jsx)(p.Z,{children:(0,E.jsx)(j.Z,{ref:N,textAlign:"center",sx:{color:z,fontSize:"14px"},children:"-/-"})})},flex:1},{component:function(e){return(0,E.jsx)(p.Z,{children:(0,E.jsx)(j.Z,{ref:V,textAlign:"center",sx:{color:z,fontSize:"14px"},children:"-/-"})})},flex:1}];return(0,E.jsx)(k._l,{draggableId:"".concat(n.id),index:d,isDragDisabled:!1===x,children:function(e,i){return(0,E.jsx)(p.Z,(0,h.Z)((0,h.Z)({},e.draggableProps),{},{ref:e.innerRef,children:(0,E.jsxs)(c.Z,{onClick:function(){return r(n)},direction:"row",alignItems:"center",spacing:.5,sx:{px:2,py:.5,backgroundColor:"rgb(30,30,52)",boxShadow:i.isDragging?"rgba(0, 0, 0, 0.05) 0px 6px 24px 0px, rgba(255,197,0,0.5) 0px 0px 0px 1px;":null},children:[(0,E.jsx)(p.Z,(0,h.Z)((0,h.Z)({sx:{mr:1}},e.dragHandleProps),{},{children:(0,E.jsx)(C.Z,{sx:{opacity:x?1:0}})})),G.map((function(e,r){return(0,E.jsx)(p.Z,{sx:{flex:e.flex||1},children:e.component(n)},r)})),x?(0,E.jsx)(S.Z,{onClick:function(){return f(n)},sx:{ml:1,color:"rgb(255,197,0)",cursor:"pointer"}}):g?H.includes(n.id)?(0,E.jsx)(w.Z,{sx:{color:"rgb(255,197,0)"},onClick:function(e){e.stopPropagation(),M(H.filter((function(e){return e!==n.id})))}}):(0,E.jsx)(I.Z,{onClick:function(e){e.stopPropagation(),M([].concat((0,t.Z)(H),[n.id]))}}):(0,E.jsx)(S.Z,{sx:{opacity:0,ml:1}})]})}))}})})),_=function(e){var n=e.data,r=void 0===n?[]:n,t=e.setData,i=e.enableEdit,o=void 0!==i&&i,l=e.isLoading,s=void 0!==l&&l,d=(e.totalPage,e.page,e.onChangePage,e.hidePagination,e.displayFavor);(0,H.ek)();var u=(0,a.Z)().t,x=((0,R.H)((function(e){return e.openProductDetail})),(0,z.Z)()),f=[{label:u("symbol"),flex:1},{label:u("closePrice"),flex:1},{label:u("ask"),flex:1},{label:u("trends"),flex:1},{label:u("bid"),flex:1},{label:u("low"),flex:1},{label:u("high"),flex:1},{label:u("24Hchanges"),flex:1},{label:u("24H%change"),flex:1}],p=function(e){x(A.cR.menu.productDetail,{id:e.id})},g=function(e){t(r.filter((function(n){return n.id!==e.id})))},m=function(e){};return(0,E.jsxs)(c.Z,{sx:{flex:1,borderRadius:2,backgroundColor:"rgb(30,30,52)",overflow:"hidden"},children:[(0,E.jsxs)(c.Z,{direction:"row",alignItems:"center",spacing:.5,sx:{backgroundColor:"rgb(40,40,61)",px:2,py:1},children:[(0,E.jsx)(C.Z,{sx:{opacity:0,mr:1}}),f.map((function(e,n){return(0,E.jsx)(j.Z,{sx:{flex:e.flex||1,fontWeight:"bold",fontSize:"14px"},textAlign:"center",children:e.label},n)})),(0,E.jsx)(C.Z,{sx:{opacity:0,ml:1}})]}),s?(0,E.jsx)(c.Z,{px:2,py:2,alignItems:"center",justifyContent:"center",children:(0,E.jsx)(b.Z,{size:30})}):(0,E.jsx)(E.Fragment,{children:((null===r||void 0===r?void 0:r.length)||0)>0?(0,E.jsx)(k.Z5,{onDragEnd:function(e){var n=e.destination,i=e.source;e.draggableId;if(n&&(n.droppableId!==i.droppableId||n.index!==i.index)){var o=r[i.index],c=JSON.parse(JSON.stringify(r));c.splice(i.index,1),c.splice(n.index,0,o),t(c)}},children:(0,E.jsx)(k.bK,{droppableId:"main",children:function(e){return(0,E.jsxs)(c.Z,(0,h.Z)((0,h.Z)({sx:{mt:1},ref:e.innerRef},e.droppableProps),{},{children:[r.map((function(e,n){return(0,E.jsx)(M,{item:e,onClick:p,index:n,editing:o,onRemove:g,onFavour:m,displayFavor:d},"".concat(e.id))})),e.placeholder]}))}})}):(0,E.jsx)(c.Z,{py:2,children:(0,E.jsx)(j.Z,{textAlign:"center",children:u("noData")})})})]})},W=r(37667),B=function(){var e=(0,o.useState)(""),n=(0,i.Z)(e,2),r=n[0],h=n[1],Z=(0,o.useState)("favourite"),j=(0,i.Z)(Z,2),b=j[0],v=j[1],y=(0,o.useState)(!1),k=(0,i.Z)(y,2),C=k[0],S=k[1],F=(0,o.useState)([]),I=(0,i.Z)(F,2),w=I[0],P=I[1],R=(0,s.Mhv)().data,L=(0,D.useFavorite)(),z=L.favoritesId,A=L.initFavourite,H=L.setFavoritesId,M=(0,a.Z)().t;(0,o.useEffect)((function(){A()}),[]);var B=[{name:M("favourite"),value:"favourite",category:null}].concat((0,t.Z)(R.map((function(e){return{name:M((0,l.toLower)(null===e||void 0===e?void 0:e.name)),value:null===e||void 0===e?void 0:e.name,category:e.id}})))),T=(0,l.find)(B,(function(e){return e.value==b})),q="favourite"===b,O=(0,s.vk$)({category:null===T||void 0===T?void 0:T.category,request:!q}),J=O.data,K=O.isLoading,N=(O.mutate,(0,s.qBF)({request:q,favoritesId:z})),V=N.data,$=N.isLoading,G=(q?V:J).filter((function(e){return e.displaySymbol.includes((0,l.upperCase)(r))})),Q=q?$:K;return(0,E.jsxs)(c.Z,{children:[(0,E.jsxs)(c.Z,{alignItems:"center",direction:"row",spacing:6,children:[(0,E.jsx)(u.Z,{sx:{width:{md:300,sm:200,xs:100}},value:r,label:M("search"),onChange:function(e){return h(e.target.value)},InputProps:{startAdornment:(0,E.jsx)(x.Z,{position:"start",children:(0,E.jsx)(f.Z,{})})},size:"small"}),(0,E.jsx)(p.Z,{children:(0,E.jsx)(d.pn,{btns:B,onChange:function(e,n){v(e),S(!1)},btnSx:{height:39},selectedBackgroundColor:"rgb(40,40,61)"})}),C?(0,E.jsxs)(c.Z,{alignItems:"center",direction:"row",spacing:1,children:[(0,E.jsx)(d.OK,{onClick:function(){S(!1),P([])},children:M("cancel")}),(0,E.jsx)(g.Z,{variant:"contained",onClick:function(){S(!1),H(w.map((function(e){return e.id})))},children:M("save")})]}):q&&(0,E.jsxs)(g.Z,{variant:"contained",onClick:function(){S(!0),P(V)},children:[(0,E.jsx)(m.Z,{sx:{mr:1}}),M("edit")]})]}),(0,E.jsx)(c.Z,{sx:{width:"100%",mt:2},children:(0,E.jsx)(_,{data:C?w:G,setData:P,enableEdit:C,isLoading:Q,displayFavor:!q})}),(0,E.jsx)(W.Z,{})]})}}}]);