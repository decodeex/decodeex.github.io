(self.webpackChunk_decode_crm_client=self.webpackChunk_decode_crm_client||[]).push([[2655],{10083:function(e,n,t){"use strict";t.d(n,{Z:function(){return b}});var o=t(2211),r=t(76956),i=(t(31530),t(83023)),s=t(42812),a=t(13193),l=t(98438),u=t(99317),c=t(26521),d=t(6892),h=t(97288),_=t(88658),p=t(98267),f=t(98845),v=(0,p.ZP)("div")((function(){return{borderRadius:"8px"}})),m=((0,p.ZP)("div")((function(){return{height:"100%",width:"100%"}})),(0,p.ZP)("div")((function(){return{display:"flex",flexDirection:"column",height:"100%",overflow:"scroll"}})),["showCard","cardTitle","columns","rows","toolBar","density","actionComponent","headerClassName","cellClassName","hidePagination","totalPage","page","onChangePage","autoHeight","sx"]),y=[{systemValue:"en",language:i._},{systemValue:"cn",language:s.U},{systemValue:"cnTw",language:s.U}];function b(e){var n=(0,_.Z)().currentLang,t=e.showCard,i=void 0!==t&&t,s=e.cardTitle,p=e.columns,b=void 0===p?[]:p,g=e.rows,w=void 0===g?[]:g,C=e.toolBar,k=e.density,S=void 0===k?"compact":k,I=e.actionComponent,x=e.headerClassName,P=e.cellClassName,A=e.hidePagination,T=void 0===A||A,R=e.totalPage,E=void 0===R?1:R,Z=e.page,W=void 0===Z?1:Z,D=e.onChangePage,L=void 0===D?function(){}:D,F=e.autoHeight,j=void 0!==F&&F,B=e.sx,U=(0,r.Z)(e,m),O=y.find((function(e){return e.systemValue===n.value})),N=(0,o.Z)({rows:w,columns:x||P?b.map((function(e){return(0,o.Z)((0,o.Z)({},e),{},{headerClassName:x,cellClassName:P})})):b,density:S,components:C||I?{Toolbar:function(){return(0,f.jsxs)(u.Z,{direction:"row",alignItems:"center",sx:{backgroundColor:"#F4F6F8"},children:[C?(0,f.jsx)(a.n,{}):(0,f.jsx)("span",{}),I&&(0,f.jsx)(c.Z,{sx:{p:16,flexGrow:1},children:I()})]})}}:null},U);return O.language&&(N.localeText=O.language.components.MuiDataGrid.defaultProps.localeText),i?(0,f.jsxs)(c.Z,{sx:{width:"100%",display:"flex",flexDirection:"column"},children:[(0,f.jsxs)(v,{sx:{flexGrow:1,borderRadius:0,flex:1},children:[s&&(0,f.jsx)(d.Z,{title:s,sx:{mb:3}}),(0,f.jsx)(l._,(0,o.Z)((0,o.Z)({disableColumnFilter:!0,disableColumnSelector:!0,disableColumnMenu:!0,sortingMode:"server",ColumnSortedAscendingIcon:null,sx:(0,o.Z)({"& .MuiDataGrid-sortIcon":{display:"none"}},B)},N),{},{autoHeight:j}))]}),!T&&(0,f.jsx)(c.Z,{sx:{display:"flex",justifyContent:"center",py:2},children:(0,f.jsx)(h.Z,{count:E,shape:"rounded",page:W,onChange:function(e,n){L(n),window.scrollTo({top:0,behavior:"smooth"})}})})]}):(0,f.jsxs)(c.Z,{sx:{height:"100%",width:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,f.jsx)(v,{sx:{flexGrow:1,borderRadius:0,flex:1},children:(0,f.jsx)(l._,(0,o.Z)((0,o.Z)({disableColumnFilter:!0,disableColumnSelector:!0,disableColumnMenu:!0,sortingMode:"server",ColumnSortedAscendingIcon:null,sx:(0,o.Z)({"& .MuiDataGrid-sortIcon":{display:"none"}},B)},N),{},{autoHeight:j}))}),!T&&(0,f.jsx)(c.Z,{sx:{display:"flex",justifyContent:"center",py:2,backgroundColor:"rgb(32,32,51)"},children:(0,f.jsx)(h.Z,{count:E,shape:"rounded",page:W,onChange:function(e,n){L(n),window.scrollTo({top:0,behavior:"smooth"})}})})]})}},38670:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return X}});var o=t(92680),r=t(24190),i=t(2211),s=t(12130),a=t(19477),l=t(99317),u=t(24786),c=t(31530),d=t(64234),h=t(13234),_=t(7403),p=t(56141);function f(e,n){var t=(0,i.Z)({},e);for(var o in n)"object"!=typeof e[o]||null===e[o]||Array.isArray(e[o])?void 0!==n[o]&&(t[o]=n[o]):t[o]=f(e[o],n[o]);return t}var v={mobile:{disabled_features:["left_toolbar","header_widget","timeframes_toolbar","edit_buttons_in_legend","context_menus","control_bar","border_around_the_chart"],enabled_features:[]}},m={width:800,height:500,interval:"1D",timezone:"Etc/UTC",container:"",library_path:"",locale:"en",widgetbar:{details:!1,watchlist:!1,watchlist_settings:{default_symbols:[]}},overrides:{"mainSeriesProperties.showCountdown":!1},studies_overrides:{},trading_customization:{position:{},order:{}},brokerConfig:{configFlags:{}},fullscreen:!1,autosize:!1,disabled_features:[],enabled_features:[],debug:!1,logo:{},time_frames:[{text:"5y",resolution:"1W"},{text:"1y",resolution:"1W"},{text:"6m",resolution:"120"},{text:"3m",resolution:"60"},{text:"1m",resolution:"30"},{text:"5d",resolution:"5"},{text:"1d",resolution:"1"}],client_id:"0",user_id:"0",charts_storage_api_version:"1.0",favorites:{intervals:[],chartTypes:[]}},y=!1;var b=function(){function e(n){if((0,_.Z)(this,e),this._id="tradingview_".concat((1048576*(1+Math.random())|0).toString(16).substring(1)),this._ready=!1,this._readyHandlers=[],this._onWindowResize=this._autoResizeChart.bind(this),!n.datafeed)throw new Error("Datafeed is not defined");if(this._options=f(m,n),n.preset){var t=v[n.preset];t?(void 0!==this._options.disabled_features?this._options.disabled_features=this._options.disabled_features.concat(t.disabled_features):this._options.disabled_features=t.disabled_features,void 0!==this._options.enabled_features?this._options.enabled_features=this._options.enabled_features.concat(t.enabled_features):this._options.enabled_features=t.enabled_features):console.warn("Unknown preset: `"+n.preset+"`")}"Dark"===this._options.theme&&void 0===this._options.loading_screen&&(this._options.loading_screen={backgroundColor:"#131722"}),this._options.debug&&(y||(y=!0,console.log("Using TT v22.032 (internal id e2a841ff @ 2022-07-06T11:55:17.248Z)"))),this._create()}return(0,p.Z)(e,[{key:"onChartReady",value:function(e){this._ready?e.call(this):this._readyHandlers.push(e)}},{key:"headerReady",value:function(){var e=this;return this._innerWindowLoaded.then((function(){return e._innerWindow().headerReady()}))}},{key:"onGrayedObjectClicked",value:function(e){this._doWhenInnerApiLoaded((function(n){n.onGrayedObjectClicked(e)}))}},{key:"onShortcut",value:function(e,n){this._doWhenInnerWindowLoaded((function(t){t.createShortcutAction(e,n)}))}},{key:"subscribe",value:function(e,n){this._doWhenInnerApiLoaded((function(t){t.subscribe(e,n)}))}},{key:"unsubscribe",value:function(e,n){this._doWhenInnerApiLoaded((function(t){t.unsubscribe(e,n)}))}},{key:"chart",value:function(e){return this._innerAPI().chart(e)}},{key:"getLanguage",value:function(){return this._options.locale}},{key:"setSymbol",value:function(e,n,t){this._innerAPI().changeSymbol(e,n,t)}},{key:"remove",value:function(){window.removeEventListener("resize",this._onWindowResize),this._readyHandlers.splice(0,this._readyHandlers.length),delete window[this._id],this._iFrame.parentNode&&this._iFrame.parentNode.removeChild(this._iFrame)}},{key:"closePopupsAndDialogs",value:function(){this._doWhenInnerApiLoaded((function(e){e.closePopupsAndDialogs()}))}},{key:"selectLineTool",value:function(e){this._innerAPI().selectLineTool(e)}},{key:"selectedLineTool",value:function(){return this._innerAPI().selectedLineTool()}},{key:"save",value:function(e){this._innerAPI().saveChart(e)}},{key:"load",value:function(e,n){this._innerAPI().loadChart({json:e,extendedData:n})}},{key:"getSavedCharts",value:function(e){this._innerAPI().getSavedCharts(e)}},{key:"loadChartFromServer",value:function(e){this._innerAPI().loadChartFromServer(e)}},{key:"saveChartToServer",value:function(e,n,t){this._innerAPI().saveChartToServer(e,n,t)}},{key:"removeChartFromServer",value:function(e,n){this._innerAPI().removeChartFromServer(e,n)}},{key:"onContextMenu",value:function(e){this._doWhenInnerApiLoaded((function(n){n.onContextMenu(e)}))}},{key:"createButton",value:function(e){return this._innerWindow().createButton(e)}},{key:"createDropdown",value:function(e){return this._innerWindow().createDropdown(e)}},{key:"showNoticeDialog",value:function(e){this._doWhenInnerApiLoaded((function(n){n.showNoticeDialog(e)}))}},{key:"showConfirmDialog",value:function(e){this._doWhenInnerApiLoaded((function(n){n.showConfirmDialog(e)}))}},{key:"showLoadChartDialog",value:function(){this._innerAPI().showLoadChartDialog()}},{key:"showSaveAsChartDialog",value:function(){this._innerAPI().showSaveAsChartDialog()}},{key:"symbolInterval",value:function(){return this._innerAPI().getSymbolInterval()}},{key:"mainSeriesPriceFormatter",value:function(){return this._innerAPI().mainSeriesPriceFormatter()}},{key:"getIntervals",value:function(){return this._innerAPI().getIntervals()}},{key:"getStudiesList",value:function(){return this._innerAPI().getStudiesList()}},{key:"getStudyInputs",value:function(e){return this._innerAPI().getStudyInputs(e)}},{key:"addCustomCSSFile",value:function(e){this._innerWindow().addCustomCSSFile(e)}},{key:"applyOverrides",value:function(e){this._options=f(this._options,{overrides:e}),this._doWhenInnerWindowLoaded((function(n){n.applyOverrides(e)}))}},{key:"applyStudiesOverrides",value:function(e){this._doWhenInnerWindowLoaded((function(n){n.applyStudiesOverrides(e)}))}},{key:"watchList",value:function(){return this._innerAPI().watchlist()}},{key:"news",value:function(){return this._innerAPI().news()}},{key:"widgetbar",value:function(){return this._innerAPI().widgetbar()}},{key:"activeChart",value:function(){return this._innerAPI().activeChart()}},{key:"chartsCount",value:function(){return this._innerAPI().chartsCount()}},{key:"layout",value:function(){return this._innerAPI().layout()}},{key:"setLayout",value:function(e){this._innerAPI().setLayout(e)}},{key:"layoutName",value:function(){return this._innerAPI().layoutName()}},{key:"changeTheme",value:function(e,n){return this._innerWindow().changeTheme(e,n)}},{key:"getTheme",value:function(){return this._innerWindow().getTheme()}},{key:"takeScreenshot",value:function(){this._doWhenInnerApiLoaded((function(e){e.takeScreenshot()}))}},{key:"lockAllDrawingTools",value:function(){return this._innerAPI().lockAllDrawingTools()}},{key:"hideAllDrawingTools",value:function(){return this._innerAPI().hideAllDrawingTools()}},{key:"drawOnAllCharts",value:function(e){this._innerAPI().drawOnAllCharts(e)}},{key:"magnetEnabled",value:function(){return this._innerAPI().magnetEnabled()}},{key:"magnetMode",value:function(){return this._innerAPI().magnetMode()}},{key:"undoRedoState",value:function(){return this._innerAPI().undoRedoState()}},{key:"setIntervalLinkingEnabled",value:function(e){this._innerAPI().setIntervalLinkingEnabled(e)}},{key:"setTimeFrame",value:function(e){this._innerAPI().setTimeFrame(e)}},{key:"symbolSync",value:function(){return this._innerAPI().symbolSync()}},{key:"intervalSync",value:function(){return this._innerAPI().intervalSync()}},{key:"crosshairSync",value:function(){return this._innerAPI().crosshairSync()}},{key:"timeSync",value:function(){return this._innerAPI().timeSync()}},{key:"getAllFeatures",value:function(){return this._innerWindow().getAllFeatures()}},{key:"clearUndoHistory",value:function(){return this._innerAPI().clearUndoHistory()}},{key:"undo",value:function(){return this._innerAPI().undo()}},{key:"redo",value:function(){return this._innerAPI().redo()}},{key:"startFullscreen",value:function(){this._innerAPI().startFullscreen()}},{key:"exitFullscreen",value:function(){this._innerAPI().exitFullscreen()}},{key:"takeClientScreenshot",value:function(e){return this._innerAPI().takeClientScreenshot(e)}},{key:"navigationButtonsVisibility",value:function(){return this._innerWindow().getNavigationButtonsVisibility()}},{key:"paneButtonsVisibility",value:function(){return this._innerWindow().getPaneButtonsVisibility()}},{key:"dateFormat",value:function(){return this._innerWindow().getDateFormat()}},{key:"_innerAPI",value:function(){return this._innerWindow().tradingViewApi}},{key:"_innerWindow",value:function(){return this._iFrame.contentWindow}},{key:"_doWhenInnerWindowLoaded",value:function(e){var n=this;this._ready?e(this._innerWindow()):this._innerWindowLoaded.then((function(){e(n._innerWindow())}))}},{key:"_doWhenInnerApiLoaded",value:function(e){var n=this;this._doWhenInnerWindowLoaded((function(t){t.doWhenApiIsReady((function(){return e(n._innerAPI())}))}))}},{key:"_autoResizeChart",value:function(){this._options.fullscreen&&(this._iFrame.style.height=window.innerHeight+"px")}},{key:"_create",value:function(){var e=this,n=this._render();this._options.container_id&&console.warn("`container_id` is now deprecated. Please use `container` instead to either still pass a string or an `HTMLElement`.");var t=this._options.container_id||this._options.container,o="string"==typeof t?document.getElementById(t):t;if(null===o)throw new Error("There is no such element - #".concat(this._options.container));o.innerHTML=n,this._iFrame=o.querySelector("#".concat(this._id));var r=this._iFrame;(this._options.autosize||this._options.fullscreen)&&(r.style.width="100%",this._options.fullscreen||(r.style.height="100%")),window.addEventListener("resize",this._onWindowResize),this._onWindowResize(),this._innerWindowLoaded=new Promise((function(e){r.addEventListener("load",(function n(){r.removeEventListener("load",n,!1),e()}),!1)})),this._innerWindowLoaded.then((function(){e._innerWindow().widgetReady((function(){e._ready=!0;var t,o=(0,h.Z)(e._readyHandlers);try{for(o.s();!(t=o.n()).done;){var r=t.value;try{r.call(e)}catch(n){console.error(n)}}}catch(i){o.e(i)}finally{o.f()}e._innerWindow().initializationFinished()}))}))}},{key:"_render",value:function(){var e=window;if(e[this._id]={datafeed:this._options.datafeed,customFormatters:this._options.custom_formatters||this._options.customFormatters,brokerFactory:this._options.broker_factory||this._options.brokerFactory,overrides:this._options.overrides,studiesOverrides:this._options.studies_overrides,tradingCustomization:this._options.trading_customization,disabledFeatures:this._options.disabled_features,enabledFeatures:this._options.enabled_features,brokerConfig:this._options.broker_config||this._options.brokerConfig,restConfig:this._options.restConfig,favorites:this._options.favorites,logo:this._options.logo,numeric_formatting:this._options.numeric_formatting,rss_news_feed:this._options.rss_news_feed,newsProvider:this._options.news_provider,loadLastChart:this._options.load_last_chart,saveLoadAdapter:this._options.save_load_adapter,loading_screen:this._options.loading_screen,settingsAdapter:this._options.settings_adapter,getCustomIndicators:this._options.custom_indicators_getter,additionalSymbolInfoFields:this._options.additional_symbol_info_fields,headerWidgetButtonsMode:this._options.header_widget_buttons_mode,customTranslateFunction:this._options.custom_translate_function,symbolSearchComplete:this._options.symbol_search_complete,contextMenu:this._options.context_menu,settingsOverrides:this._options.settings_overrides},this._options.saved_data)e[this._id].chartContent={json:this._options.saved_data},this._options.saved_data_meta_info&&(e[this._id].chartContentExtendedData=this._options.saved_data_meta_info);else if(!this._options.load_last_chart&&!this._options.symbol)throw new Error("Symbol is not defined: either 'symbol' or 'load_last_chart' option must be set");var n=(this._options.library_path||"")+"".concat(encodeURIComponent(this._options.locale),"-tv-chart.e2a841ff.html#symbol=")+encodeURIComponent(this._options.symbol||"")+"&interval="+encodeURIComponent(this._options.interval)+(this._options.timeframe?"&timeframe="+encodeURIComponent(this._options.timeframe):"")+(this._options.toolbar_bg?"&toolbarbg="+encodeURIComponent(this._options.toolbar_bg.replace("#","")):"")+(this._options.studies_access?"&studiesAccess="+encodeURIComponent(JSON.stringify(this._options.studies_access)):"")+"&widgetbar="+encodeURIComponent(JSON.stringify(this._options.widgetbar))+(this._options.drawings_access?"&drawingsAccess="+encodeURIComponent(JSON.stringify(this._options.drawings_access)):"")+"&timeFrames="+encodeURIComponent(JSON.stringify(this._options.time_frames))+"&locale="+encodeURIComponent(this._options.locale)+"&uid="+encodeURIComponent(this._id)+"&clientId="+encodeURIComponent(String(this._options.client_id))+"&userId="+encodeURIComponent(String(this._options.user_id))+(this._options.charts_storage_url?"&chartsStorageUrl="+encodeURIComponent(this._options.charts_storage_url):"")+(this._options.charts_storage_api_version?"&chartsStorageVer="+encodeURIComponent(this._options.charts_storage_api_version):"")+(this._options.custom_css_url?"&customCSS="+encodeURIComponent(this._options.custom_css_url):"")+(this._options.custom_font_family?"&customFontFamily="+encodeURIComponent(this._options.custom_font_family):"")+(this._options.auto_save_delay?"&autoSaveDelay="+encodeURIComponent(String(this._options.auto_save_delay)):"")+"&debug="+encodeURIComponent(String(this._options.debug))+(this._options.snapshot_url?"&snapshotUrl="+encodeURIComponent(this._options.snapshot_url):"")+(this._options.timezone?"&timezone="+encodeURIComponent(this._options.timezone):"")+(this._options.study_count_limit?"&studyCountLimit="+encodeURIComponent(String(this._options.study_count_limit)):"")+(this._options.symbol_search_request_delay?"&ssreqdelay="+encodeURIComponent(String(this._options.symbol_search_request_delay)):"")+(this._options.compare_symbols?"&compareSymbols="+encodeURIComponent(JSON.stringify(this._options.compare_symbols)):"")+(this._options.theme?"&theme="+encodeURIComponent(String(this._options.theme)):"")+(this._options.header_widget_buttons_mode?"&header_widget_buttons_mode="+encodeURIComponent(String(this._options.header_widget_buttons_mode)):"")+(this._options.time_scale?"&time_scale="+encodeURIComponent(JSON.stringify(this._options.time_scale)):"");return'<iframe id="'+this._id+'" name="'+this._id+'"  src="'+n+'"'+(this._options.autosize||this._options.fullscreen?"":' width="'+this._options.width+'" height="'+this._options.height+'"')+' title="Financial Chart" frameborder="0" allowTransparency="true" scrolling="no" allowfullscreen style="display:block;"></iframe>'}}]),e}();window.TradingView=window.TradingView||{},window.TradingView.version=function(){return"TT v22.032 (internal id e2a841ff @ 2022-07-06T11:55:17.248Z)"};var g=t(88658),w=t(95434),C=t(88851),k={has_weekly_and_monthly:!0,data_status:"streaming",timezone:"Etc/UTC",has_intraday:!0},S=function(){function e(n,t,o,r){var s=this;(0,_.Z)(this,e),this.req_resolveSymbol=null,this.req_getBars=null,this.req_subscribeBars=null,this.apiTimeout=1e4;var a="".concat(t,":").concat(encodeURIComponent(o));r&&(a+=":demo"),this.token=a,this.wsClient=new C.Z(n,(function(e){var n;try{n=JSON.parse(e.data)}catch(f){}if(null!=n){var t=n,o=(t.e,t.s),r=t.t,a=t.o,l=t.h,u=t.l,c=t.c,d=t.v,h=t.type,_=t.desc,p=t.pricescale,v=t.session,m=(t.n,t.c,t.d,t.bars),y=t.p;if(null==h){if(null==m){if(null==r);else if(null!=s.req_subscribeBars&&s.req_subscribeBars.resolution===y){var b={time:r,close:c,open:a,high:l,low:u,volume:d};console.log(b),s.req_subscribeBars.onRealtimeCallback(b)}}else if(null!=s.req_getBars){var g=s.req_getBars,w=g.onHistoryCallback,C=g.timeoutHandle;s.req_getBars=null,clearTimeout(C),w(m,{noData:null==m||0===m.length})}}else if(null!=s.req_resolveSymbol){var S=s.req_resolveSymbol,I=S.onSymbolResolvedCallback,x=S.timeoutHandle;s.req_resolveSymbol=null,clearTimeout(x);var P=(0,i.Z)((0,i.Z)({},k),{},{name:o,description:_,type:h,pricescale:p,minmov:1,minmov2:0,pointvalue:1,session:"0000-2359"===v?"24x7":v});console.log("symbolInfo",P),I(P)}}}))}return(0,p.Z)(e,[{key:"onReady",value:function(e){console.log("onReady"),setTimeout((function(){return e({exchanges:[],symbols_types:[{name:"Forex",value:"forex"},{name:"CFD",value:"cfd"},{name:"Futures",value:"futures"}],supported_resolutions:["1","5","15","30","60","240","D","W","M"],supports_marks:!1,supports_timescale_marks:!1,supports_time:!1,supports_search:!1,symbols_grouping:!1})}),0)}},{key:"searchSymbols",value:function(e,n,t,o){console.log("searchSymbols",e,n,t)}},{key:"resolveSymbol",value:function(e,n,t,o){var r=this,i=setTimeout((function(){if(null!=r.req_resolveSymbol){var e=r.req_resolveSymbol.onResolveErrorCallback;r.req_resolveSymbol=null,e("API timeout")}}),this.apiTimeout);this.req_resolveSymbol={onSymbolResolvedCallback:n,onResolveErrorCallback:t,timeoutHandle:i},this.wsClient.send_({c:"symbol-detail",s:e},!0)}},{key:"getBars",value:function(e,n,t,o,r){var i=this;console.log("getBars",e,n,t);var s=setTimeout((function(){if(null!=i.req_getBars){var e=i.req_getBars.onErrorCallback;i.req_getBars=null,e("API timeout")}}),this.apiTimeout);this.req_getBars={onHistoryCallback:o,onErrorCallback:r,timeoutHandle:s},this.wsClient.send_({c:"ohlcv-bars",t:this.token,s:e.name,period:n,count:t.countBack,to:t.to},!0)}},{key:"subscribeBars",value:function(e,n,t,o){console.log("subscribeBars",e,n,o),null!=this.req_subscribeBars&&this.req_subscribeBars.subscriberUID!==o&&(this.previousSubscribe={subscriberUID:this.req_subscribeBars.subscriberUID,symbol:this.req_subscribeBars.symbol,resolution:this.req_subscribeBars.resolution}),this.req_subscribeBars={onRealtimeCallback:t,subscriberUID:o,symbol:e.name,resolution:n},this.wsClient.send_({c:"sub-ohlcv",s:e.name,period:n},!0)}},{key:"unsubscribeBars",value:function(e){if(console.log("unsubscribeBars",e),null!=this.previousSubscribe&&this.previousSubscribe.subscriberUID===e)return this.wsClient.send_({c:"unsub-ohlcv",s:this.previousSubscribe.symbol,period:this.previousSubscribe.resolution},!0),void delete this.previousSubscribe;null!=this.req_subscribeBars&&this.req_subscribeBars.subscriberUID===e&&(this.wsClient.send_({c:"unsub-ohlcv",s:this.req_subscribeBars.symbol,period:this.req_subscribeBars.resolution},!0),this.req_subscribeBars=null)}},{key:"getMarks",value:function(e,n,t,o,r){console.log("getMarks",e,n,t,r)}},{key:"getTimescaleMarks",value:function(e,n,t,o,r){console.log("getTimescaleMarks",e,n,t,r)}},{key:"getServerTime",value:function(e){console.log("getServerTime"),setTimeout((function(){e(Math.floor(Date.now()/1e3))}),0)}},{key:"subscribeQuotes",value:function(e,n,t,o){console.log("subscribeQuotes",e,n,o)}},{key:"unsubscribeQuotes",value:function(e){console.log("unsubscribeQuotes",e)}}]),e}(),I=S,x=t(68468),P=t(98845),A=new I(x.url.join("wss://mt4-api.decodeex.com/","/"));var T=(0,c.forwardRef)((function(e,n){var t=e.symbol,o=e.onChartReady,r=(0,c.useRef)(null),i=(0,c.useRef)(!1),s=(0,g.Z)().currentLang,a=(0,w.F)({disableSyncService:!0}),l=a.stockUpColor,u=a.stockDownColor;return(0,c.useImperativeHandle)(n,(function(){return{drawLines:function(e){var n;if(null!==(n=r.current)&&void 0!==n&&n.activeChart&&i.current)return(e||[]).map((function(e){var n;return null===(n=r.current.activeChart())||void 0===n?void 0:n.createShape({price:e.price},{shape:"horizontal_line",text:e.text,lock:!0,disableSave:!0,disableUndo:!0,overrides:{linecolor:e.lineColor||"green"}})}))},drawAlertIcon:function(e){var n;if(null!==(n=r.current)&&void 0!==n&&n.activeChart&&i.current)return(e||[]).map((function(e){var n;return console.log(e),null===(n=r.current.activeChart())||void 0===n?void 0:n.createShape({price:e.price,time:e.time},{shape:"icon",lock:!0,disableSave:!0,disableSelection:!0,disableUndo:!0,zOrder:"top",overrides:{color:e.color||"green",icon:"0xf0aa",size:22}})}))},removeLines:function(e){var n;null!==(n=r.current)&&void 0!==n&&n.activeChart&&i.current&&(e||[]).map((function(e){var n;null===(n=r.current.activeChart())||void 0===n||n.removeEntity(e)}))},getChartInstance:function(){return r.current}}}),[r.current,i.current]),c.useEffect((function(){var e={symbol:t||"BTCUSD",interval:5,timeframe:"6h",datafeed:A,container:"tv_chart_container",library_path:"/charting_library/",locale:"cn"==s.value?"zh":"cnTw"==s.value?"zh_TW":"en",chartsStorageUrl:"https://saveload.tradingview.com",chartsStorageApiVersion:"1.1",fullscreen:!1,autosize:!0,width:"100%",theme:"Dark",custom_css_url:"css/style.css",loading_screen:{backgroundColor:"rgb(40, 40, 61)",foregroundColor:"rgb(255,197,0)"},disabled_features:["save_chart_properties_to_local_storage","use_localstorage_for_settings","chart_crosshair_menu","order_panel","trading_account_manager","header_undo_redo","header_symbol_search","header_compare","header_saveload","header_settings","header_fullscreen_button","header_screenshot","header_layouttoggle","add_to_watchlist","right_toolbar","symbol_search_hot_key"],enabled_features:["move_logo_to_main_pane"],overrides:{"paneProperties.backgroundType":"solid","mainSeriesProperties.candleStyle.upColor":l,"mainSeriesProperties.candleStyle.downColor":u,"mainSeriesProperties.candleStyle.borderUpColor":l,"mainSeriesProperties.candleStyle.borderDownColor":u,"mainSeriesProperties.candleStyle.wickUpColor":l,"mainSeriesProperties.candleStyle.wickDownColor":u,"mainSeriesProperties.priceLineWidth":1,"mainSeriesProperties.priceLineColor":"#fff"},studies_overrides:{"volume.volume.color.0":u,"volume.volume.color.1":l,"volume.volume.transparency":70,"volume.volume ma.color":"rgb(255,197,0)","volume.volume ma.transparency":30,"volume.volume ma.linewidth":5,"bollinger bands.median.color":"#33FF88","bollinger bands.upper.linewidth":7}};return r.current=new b(e),r.current.onChartReady((function(){i.current=!0,o&&o(!0)})),function(){null!==r.current&&(r.current.remove(),r.current=null,i.current=!1,o&&o(!1))}}),[s.value]),(0,P.jsx)("div",{id:"tv_chart_container",style:{width:"100%",height:"100%"}})})),R=t(62428),E=t(54841),Z=t(39702),W=t(26521),D=t(37667),L=(t(36198),t(95853)),F=t(18898),j=t(14674),B=t(28418),U=(t(43248),t(85285),t(77970)),O=t(96537),N=(t(36376),t(23440),t(96390),function(e){e.error,e.resetErrorBoundary;var n=(0,g.Z)().t;return(0,P.jsxs)(l.Z,{alignItems:"center",spacing:2,children:[(0,P.jsx)(u.Z,{fontSize:"20px",children:n("opoosError")}),(0,P.jsx)(u.Z,{children:n("pleaseRefreshPage")})]})}),H=t(92309),q=t(16487),z=t(88465),M={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CLIENT_WS_ENDPOINT:"wss://mt4-api.decodeex.com/",REACT_APP_WS_ENDPOINT:"https://crm-api.decodeex.com",REACT_APP_CLIENT_WS_PATH:"/",REACT_APP_WS_PATH:"/api/ws",REACT_APP_HOST_API_KEY:"https://crm-api.decodeex.com/api",REACT_APP_ACADEMY_API_ENDPOINT:"https://academy-api.dev.orionta.io/api"}.REACT_APP_AC_WS_ENDPOINT,V={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CLIENT_WS_ENDPOINT:"wss://mt4-api.decodeex.com/",REACT_APP_WS_ENDPOINT:"https://crm-api.decodeex.com",REACT_APP_CLIENT_WS_PATH:"/",REACT_APP_WS_PATH:"/api/ws",REACT_APP_HOST_API_KEY:"https://crm-api.decodeex.com/api",REACT_APP_ACADEMY_API_ENDPOINT:"https://academy-api.dev.orionta.io/api"}.REACT_APP_AC_WS_PATH,K=new z.dK(M,{path:V.endsWith("/")?V:V+"/",reconnectionDelayMax:1e4,transports:["websocket"],autoConnect:!1}),G=function(e,n){return K.socket(e,n?{auth:{token:n}}:null)},J=function(e,n){var t=(0,c.useState)([]),o=(0,s.Z)(t,2),r=o[0],a=o[1];return(0,c.useEffect)((function(){if(n){var t=G("/signal-advice",e);return t.on("connect",(function(){console.log("websocket connected alert"),t.emit("subscribe",n)})),t.on("advice",(function(e){console.log("websocket advice received alert",e),a((function(n){return(0,q.Z)(e.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{time:e.time})})))}))})),t.connect(),function(){t.off("advice"),t.off("connect")}}}),[n]),r},Y=t(95984),Q=t(98647),X=function(e){var n,t;(0,a.Z)(e);var h=(0,g.Z)("app").t,_=(0,d.useSearchParams)(),p=(0,s.Z)(_,1)[0].get("id")||null,f=(0,R.IrP)({id:p}),v=f.data,m=f.isLoading,y=f.utate,b=(0,E.H)((function(e){return[e.setProductId,e.setProductItem]})),C=(0,s.Z)(b,2),k=C[0],S=C[1],I=(0,R.W0d)(),x=I.data,A=I.isLoading,q=I.hasValidSignal,z=(0,R.NO7)(),M=z.data,V=(z.isLoading,null===x||void 0===x||null===(n=x.signalsKey)||void 0===n||null===(t=n[v.symbol])||void 0===t?void 0:t.signal),K=J(null,v.symbol),G=(0,B.Ds)().enqueueSnackbar,X=(0,R._pY)(),$=X.data,ee=(X.isLoading,$.filter((function(e){return"activated"===e.status&&"live"===e.type&&!Boolean((0,Z.get)(e,"rawData.isHidden"))})));(0,c.useEffect)((function(){(0,Z.isEmpty)(v)||m||(S(v),k(p))}),[v,m]);var ne=(0,w.F)({disableSyncService:!0}).getStockColorValue,te=ne(-1),oe=ne(1),re=(0,c.useRef)(null),ie=(0,c.useRef)(null),se=(0,c.useRef)(null),ae=(0,c.useState)(!1),le=(0,s.Z)(ae,2),ue=le[0],ce=le[1],de=(0,L.H)((function(e){return[e.submitting,e.setSubmitting,e.isIniting,e.setIsIniting,e.reInitTrigger,e.setReInitTrigger,e.ready,e.setReady,e.account,e.setOpenRequirePassword,e.lot,e.showSignal,e.setShowSignal]})),he=(0,s.Z)(de,13),_e=he[0],pe=he[1],fe=he[2],ve=(he[3],he[4],he[5],he[6]),me=(he[7],he[8]),ye=he[9],be=he[10],ge=he[11],we=(he[12],(0,Q.W)()),Ce=(0,R.OhN)({accountId:me}),ke=Ce.data,Se=Ce.mutate,Ie=(Ce.isLoading,(0,j.Z)(null===ke||void 0===ke?void 0:ke.login,null===ke||void 0===ke?void 0:ke.password,null===ke||void 0===ke?void 0:ke.groupType)),xe=(0,c.useMemo)((function(){return(0,P.jsx)(l.Z,{sx:{height:800},children:v.symbol&&(0,P.jsx)(T,{ref:re,symbol:v.symbol,onChartReady:ce})})}),[v.symbol]);(0,c.useEffect)((function(){var e;(console.log("chart ready",ue),ge&&re.current&&V&&!A&&ue)?ie.current=null===(e=re.current)||void 0===e?void 0:e.drawLines([{price:V.sl,lineColor:te,text:"sl"},{price:V.entry,lineColor:"rgb(255,197,0)",text:"entry"},{price:V.pt1,lineColor:oe,text:"pt1"},{price:V.pt2,lineColor:oe,text:"pt2"}]):ie.current&&(null===re||void 0===re||re.current.removeLines(ie.current));return function(){var e;null===(e=re.current)||void 0===e||e.removeLines(ie.current),ie.current=null}}),[ge,re.current,V,ue]),(0,c.useEffect)((function(){var e;ge&&re.current&&K&&ue&&M.isPro?(null===re||void 0===re||re.current.removeLines(se.current),se.current=null===(e=re.current)||void 0===e?void 0:e.drawAlertIcon((K||[]).map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{color:"rgb(255,197,0)"})})))):se.current&&(null===re||void 0===re||re.current.removeLines(se.current));return function(){var e;null===(e=re.current)||void 0===e||e.removeLines(se.current),se.current=null}}),[ge,re.current,K,ue]);var Pe=function(){var e=(0,r.Z)((0,o.Z)().mark((function e(n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,pe(!0),e.next=4,n();case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(0),console.log(e.t0),"incorrectPassword"!==e.t0.message){e.next=13;break}ye(!0),e.next=14;break;case 13:throw e.t0;case 14:return e.prev=14,pe(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,6,14,17]])})));return function(n){return e.apply(this,arguments)}}(),Ae=function(){var e=(0,r.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe((0,r.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ie.sendOrder(v.symbol,j.M.Sell,Number(be),null,null,null);case 3:G(h("sellSuccess"),{variant:"success"}),we(/balanceHook/),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),G(h("sellFailed",{reason:h(e.t0.message)}),{variant:"error"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Te=function(){var e=(0,r.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe((0,r.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ie.sendOrder(v.symbol,j.M.Buy,Number(be),null,null,null);case 3:G(h("buySuccess"),{variant:"success"}),we(/balanceHook/),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),G(h("buyFailed",{reason:h(e.t0.message)}),{variant:"error"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Re=(0,c.useRef)(),Ee=(0,c.useRef)(),Ze=(0,c.useRef)();(0,c.useEffect)((function(){if(ve){(0,Z.isFunction)(Re.current)&&Re.current();Re.current=null===Ie||void 0===Ie?void 0:Ie.watch((0,Z.get)(v,"symbol"),(e=Ze.current,n=Ee.current,function(t){n.innerHTML=(0,U.currencyFormatorWithDecimal)(t.quote.bid,"",(0,Z.get)(v,"decimal"),!0),e.innerHTML=(0,U.currencyFormatorWithDecimal)(t.quote.ask,"",(0,Z.get)(v,"decimal"),!0)}))}var e,n;return function(){null===Ie||void 0===Ie||Ie.unwatch((0,Z.get)(v,"symbol")),(0,Z.isFunction)(Re.current)&&Re.current()}}),[ve]);var We=[{label:h("bid"),value:"-/-",ref:Ee},{label:h("ask"),value:"-/-",ref:Ze}],De=0==ee.length||be<=0||!ve;return(0,P.jsx)(l.Z,{sx:{px:2},children:(0,P.jsxs)(l.Z,{direction:"row",spacing:2,children:[(0,P.jsxs)(l.Z,{spacing:1,sx:{flex:1},children:[(0,P.jsxs)(l.Z,{direction:"row",alignItems:"center",justifyContent:"center",spacing:2,px:2,children:[(0,P.jsx)(O.Z,{item:v,enlarge:!0}),ke&&(0,P.jsxs)(u.Z,{fontWeight:"700",fontSize:16,children:[h("account")," ","FX ".concat(ke.login)]})]}),(0,P.jsx)(W.Z,{sx:{borderWidth:1,backgroundColor:"rgb(40,40,61)",borderColor:"rgb(40,40,61)",borderStyle:"solid",width:"100%",borderRadius:"5px",overflow:"hidden"},children:(0,P.jsxs)(W.Z,{sx:{position:"relative"},children:[xe,(0,P.jsxs)(l.Z,{direction:"row",alignItems:"center",sx:{position:"absolute",right:8,top:1},spacing:2,children:[V&&q&&M.subscribed&&(0,P.jsxs)(W.Z,{children:[(0,P.jsx)(u.Z,{fontSize:"10px",sx:{color:"#B4B4C8",mb:-.5},children:h("policy")}),(0,P.jsx)(u.Z,{fontSize:"18px",minWidth:"50px",fontWeight:"600",color:"sell"===(null===V||void 0===V?void 0:V.type)?te:oe,children:(0,Z.upperCase)(V.type)})]}),We.map((function(e,n){return(0,P.jsxs)(W.Z,{children:[(0,P.jsx)(u.Z,{fontSize:"10px",sx:{color:"#B4B4C8",mb:-.5},children:e.label}),(0,P.jsx)(u.Z,{fontSize:"18px",minWidth:"50px",fontWeight:"600",ref:e.ref,children:e.value})]},n)})),(0,P.jsx)(F.Z,{loadingIndicator:fe?h("verifying"):null,loading:_e||fe,variant:"contained",color:"error",size:"small",disabled:De,onClick:Te,sx:{flex:1,width:130,color:"#000"},children:h("buyByMarket")}),(0,P.jsx)(F.Z,{loadingIndicator:fe?h("verifying"):null,loading:_e||fe,variant:"contained",color:"primary",size:"small",disabled:De,onClick:Ae,sx:{flex:1,width:130,color:"#000"},children:h("sellByMarket")})]})]})}),(0,P.jsx)(W.Z,{sx:{borderWidth:0,backgroundColor:"rgb(40,40,61)",borderColor:"rgb(40,40,61)",borderStyle:"solid",width:"100%",borderRadius:"5px",overflow:"hidden"},children:(0,P.jsx)(Y.Z,{type:"positions",autoHeight:!0,hidePagination:!0,login:null===ke||void 0===ke?void 0:ke.login,forexAccountId:me})})]}),(0,P.jsx)(l.Z,{sx:{width:400},children:(0,P.jsx)(H.ErrorBoundary,{FallbackComponent:N,onReset:function(){y(),Se()},children:(0,P.jsx)(D.L,{})})})]})})}},92309:function(e,n,t){!function(e,n){"use strict";function t(e){if(e&&e.__esModule)return e;var n=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var o=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,o.get?o:{enumerable:!0,get:function(){return e[t]}})}})),n.default=e,Object.freeze(n)}var o=t(n);function r(e,n){return r=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},r(e,n)}function i(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n)}var s=function(e,n){return void 0===e&&(e=[]),void 0===n&&(n=[]),e.length!==n.length||e.some((function(e,t){return!Object.is(e,n[t])}))},a={error:null},l=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return(n=e.call.apply(e,[this].concat(o))||this).state=a,n.resetErrorBoundary=function(){for(var e,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];null==n.props.onReset||(e=n.props).onReset.apply(e,o),n.reset()},n}i(n,e),n.getDerivedStateFromError=function(e){return{error:e}};var t=n.prototype;return t.reset=function(){this.setState(a)},t.componentDidCatch=function(e,n){var t,o;null==(t=(o=this.props).onError)||t.call(o,e,n)},t.componentDidUpdate=function(e,n){var t,o,r=this.state.error,i=this.props.resetKeys;null!==r&&null!==n.error&&s(e.resetKeys,i)&&(null==(t=(o=this.props).onResetKeysChange)||t.call(o,e.resetKeys,i),this.reset())},t.render=function(){var e=this.state.error,n=this.props,t=n.fallbackRender,r=n.FallbackComponent,i=n.fallback;if(null!==e){var s={error:e,resetErrorBoundary:this.resetErrorBoundary};if(o.isValidElement(i))return i;if("function"===typeof t)return t(s);if(r)return o.createElement(r,s);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},n}(o.Component);function u(e,n){var t=function(t){return o.createElement(l,n,o.createElement(e,t))},r=e.displayName||e.name||"Unknown";return t.displayName="withErrorBoundary("+r+")",t}function c(e){var n=o.useState(null),t=n[0],r=n[1];if(null!=e)throw e;if(null!=t)throw t;return r}e.ErrorBoundary=l,e.useErrorHandler=c,e.withErrorBoundary=u,Object.defineProperty(e,"__esModule",{value:!0})}(n,t(31530))}}]);