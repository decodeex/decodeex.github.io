(self.webpackChunk_decode_crm_client=self.webpackChunk_decode_crm_client||[]).push([[4184],{65734:function(e,n,t){"use strict";t.d(n,{Z:function(){return y}});var o=t(2211),r=t(76956),i=(t(77317),t(94891)),s=t(18167),a=t(26698),l=t(16235),u=t(38263),c=t(40911),d=t(84667),h=t(61231),_=t(55685),f=t(34556),p=t(40860),v=(0,f.ZP)("div")((function(){return{borderRadius:"8px"}})),m=((0,f.ZP)("div")((function(){return{height:"100%",width:"100%"}})),(0,f.ZP)("div")((function(){return{display:"flex",flexDirection:"column",height:"100%",overflow:"scroll"}})),["showCard","cardTitle","columns","rows","toolBar","density","actionComponent","headerClassName","cellClassName","hidePagination","totalPage","page","onChangePage","autoHeight","sx"]),b=[{systemValue:"en",language:i._},{systemValue:"cn",language:s.U},{systemValue:"cnTw",language:s.U}];function y(e){var n=(0,_.Z)().currentLang,t=e.showCard,i=void 0!==t&&t,s=e.cardTitle,f=e.columns,y=void 0===f?[]:f,g=e.rows,w=void 0===g?[]:g,C=e.toolBar,k=e.density,x=void 0===k?"compact":k,S=e.actionComponent,I=e.headerClassName,Z=e.cellClassName,P=e.hidePagination,A=void 0===P||P,R=e.totalPage,j=void 0===R?1:R,L=e.page,T=void 0===L?1:L,W=e.onChangePage,F=void 0===W?function(){}:W,B=e.autoHeight,D=void 0!==B&&B,U=e.sx,E=(0,r.Z)(e,m),q=b.find((function(e){return e.systemValue===n.value})),z=(0,o.Z)({rows:w,columns:I||Z?y.map((function(e){return(0,o.Z)((0,o.Z)({},e),{},{headerClassName:I,cellClassName:Z})})):y,density:x,components:C||S?{Toolbar:function(){return(0,p.jsxs)(u.Z,{direction:"row",alignItems:"center",sx:{backgroundColor:"#F4F6F8"},children:[C?(0,p.jsx)(a.n,{}):(0,p.jsx)("span",{}),S&&(0,p.jsx)(c.Z,{sx:{p:16,flexGrow:1},children:S()})]})}}:null},E);return q.language&&(z.localeText=q.language.components.MuiDataGrid.defaultProps.localeText),i?(0,p.jsxs)(c.Z,{sx:{width:"100%",display:"flex",flexDirection:"column"},children:[(0,p.jsxs)(v,{sx:{flexGrow:1,borderRadius:0,flex:1},children:[s&&(0,p.jsx)(d.Z,{title:s,sx:{mb:3}}),(0,p.jsx)(l._,(0,o.Z)((0,o.Z)({disableColumnFilter:!0,disableColumnSelector:!0,disableColumnMenu:!0,sortingMode:"server",ColumnSortedAscendingIcon:null,sx:(0,o.Z)({"& .MuiDataGrid-sortIcon":{display:"none"}},U)},z),{},{autoHeight:D}))]}),!A&&(0,p.jsx)(c.Z,{sx:{display:"flex",justifyContent:"center",py:2},children:(0,p.jsx)(h.Z,{count:j,shape:"rounded",page:T,onChange:function(e,n){F(n),window.scrollTo({top:0,behavior:"smooth"})}})})]}):(0,p.jsxs)(c.Z,{sx:{height:"100%",width:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,p.jsx)(v,{sx:{flexGrow:1,borderRadius:0,flex:1},children:(0,p.jsx)(l._,(0,o.Z)((0,o.Z)({disableColumnFilter:!0,disableColumnSelector:!0,disableColumnMenu:!0,sortingMode:"server",ColumnSortedAscendingIcon:null,sx:(0,o.Z)({"& .MuiDataGrid-sortIcon":{display:"none"}},U)},z),{},{autoHeight:D}))}),!A&&(0,p.jsx)(c.Z,{sx:{display:"flex",justifyContent:"center",py:2,backgroundColor:"rgb(32,32,51)"},children:(0,p.jsx)(h.Z,{count:j,shape:"rounded",page:T,onChange:function(e,n){F(n),window.scrollTo({top:0,behavior:"smooth"})}})})]})}},5772:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return $}});var o=t(92680),r=t(24190),i=t(2211),s=t(12130),a=t(19477),l=t(38263),u=t(45771),c=t(63158),d=t(77317),h=t(68461),_=t(13234),f=t(7403),p=t(56141);function v(e,n){var t=(0,i.Z)({},e);for(var o in n)"object"!=typeof e[o]||null===e[o]||Array.isArray(e[o])?void 0!==n[o]&&(t[o]=n[o]):t[o]=v(e[o],n[o]);return t}var m={mobile:{disabled_features:["left_toolbar","header_widget","timeframes_toolbar","edit_buttons_in_legend","context_menus","control_bar","border_around_the_chart"],enabled_features:[]}},b={width:800,height:500,interval:"1D",timezone:"Etc/UTC",container:"",library_path:"",locale:"en",widgetbar:{details:!1,watchlist:!1,watchlist_settings:{default_symbols:[]}},overrides:{"mainSeriesProperties.showCountdown":!1},studies_overrides:{},trading_customization:{position:{},order:{}},brokerConfig:{configFlags:{}},fullscreen:!1,autosize:!1,disabled_features:[],enabled_features:[],debug:!1,logo:{},time_frames:[{text:"5y",resolution:"1W"},{text:"1y",resolution:"1W"},{text:"6m",resolution:"120"},{text:"3m",resolution:"60"},{text:"1m",resolution:"30"},{text:"5d",resolution:"5"},{text:"1d",resolution:"1"}],client_id:"0",user_id:"0",charts_storage_api_version:"1.0",favorites:{intervals:[],chartTypes:[]}},y=!1;var g=function(){function e(n){if((0,f.Z)(this,e),this._id="tradingview_".concat((1048576*(1+Math.random())|0).toString(16).substring(1)),this._ready=!1,this._readyHandlers=[],this._onWindowResize=this._autoResizeChart.bind(this),!n.datafeed)throw new Error("Datafeed is not defined");if(this._options=v(b,n),n.preset){var t=m[n.preset];t?(void 0!==this._options.disabled_features?this._options.disabled_features=this._options.disabled_features.concat(t.disabled_features):this._options.disabled_features=t.disabled_features,void 0!==this._options.enabled_features?this._options.enabled_features=this._options.enabled_features.concat(t.enabled_features):this._options.enabled_features=t.enabled_features):console.warn("Unknown preset: `"+n.preset+"`")}"Dark"===this._options.theme&&void 0===this._options.loading_screen&&(this._options.loading_screen={backgroundColor:"#131722"}),this._options.debug&&(y||(y=!0,console.log("Using TT v22.032 (internal id e2a841ff @ 2022-07-06T11:55:17.248Z)"))),this._create()}return(0,p.Z)(e,[{key:"onChartReady",value:function(e){this._ready?e.call(this):this._readyHandlers.push(e)}},{key:"headerReady",value:function(){var e=this;return this._innerWindowLoaded.then((function(){return e._innerWindow().headerReady()}))}},{key:"onGrayedObjectClicked",value:function(e){this._doWhenInnerApiLoaded((function(n){n.onGrayedObjectClicked(e)}))}},{key:"onShortcut",value:function(e,n){this._doWhenInnerWindowLoaded((function(t){t.createShortcutAction(e,n)}))}},{key:"subscribe",value:function(e,n){this._doWhenInnerApiLoaded((function(t){t.subscribe(e,n)}))}},{key:"unsubscribe",value:function(e,n){this._doWhenInnerApiLoaded((function(t){t.unsubscribe(e,n)}))}},{key:"chart",value:function(e){return this._innerAPI().chart(e)}},{key:"getLanguage",value:function(){return this._options.locale}},{key:"setSymbol",value:function(e,n,t){this._innerAPI().changeSymbol(e,n,t)}},{key:"remove",value:function(){window.removeEventListener("resize",this._onWindowResize),this._readyHandlers.splice(0,this._readyHandlers.length),delete window[this._id],this._iFrame.parentNode&&this._iFrame.parentNode.removeChild(this._iFrame)}},{key:"closePopupsAndDialogs",value:function(){this._doWhenInnerApiLoaded((function(e){e.closePopupsAndDialogs()}))}},{key:"selectLineTool",value:function(e){this._innerAPI().selectLineTool(e)}},{key:"selectedLineTool",value:function(){return this._innerAPI().selectedLineTool()}},{key:"save",value:function(e){this._innerAPI().saveChart(e)}},{key:"load",value:function(e,n){this._innerAPI().loadChart({json:e,extendedData:n})}},{key:"getSavedCharts",value:function(e){this._innerAPI().getSavedCharts(e)}},{key:"loadChartFromServer",value:function(e){this._innerAPI().loadChartFromServer(e)}},{key:"saveChartToServer",value:function(e,n,t){this._innerAPI().saveChartToServer(e,n,t)}},{key:"removeChartFromServer",value:function(e,n){this._innerAPI().removeChartFromServer(e,n)}},{key:"onContextMenu",value:function(e){this._doWhenInnerApiLoaded((function(n){n.onContextMenu(e)}))}},{key:"createButton",value:function(e){return this._innerWindow().createButton(e)}},{key:"createDropdown",value:function(e){return this._innerWindow().createDropdown(e)}},{key:"showNoticeDialog",value:function(e){this._doWhenInnerApiLoaded((function(n){n.showNoticeDialog(e)}))}},{key:"showConfirmDialog",value:function(e){this._doWhenInnerApiLoaded((function(n){n.showConfirmDialog(e)}))}},{key:"showLoadChartDialog",value:function(){this._innerAPI().showLoadChartDialog()}},{key:"showSaveAsChartDialog",value:function(){this._innerAPI().showSaveAsChartDialog()}},{key:"symbolInterval",value:function(){return this._innerAPI().getSymbolInterval()}},{key:"mainSeriesPriceFormatter",value:function(){return this._innerAPI().mainSeriesPriceFormatter()}},{key:"getIntervals",value:function(){return this._innerAPI().getIntervals()}},{key:"getStudiesList",value:function(){return this._innerAPI().getStudiesList()}},{key:"getStudyInputs",value:function(e){return this._innerAPI().getStudyInputs(e)}},{key:"addCustomCSSFile",value:function(e){this._innerWindow().addCustomCSSFile(e)}},{key:"applyOverrides",value:function(e){this._options=v(this._options,{overrides:e}),this._doWhenInnerWindowLoaded((function(n){n.applyOverrides(e)}))}},{key:"applyStudiesOverrides",value:function(e){this._doWhenInnerWindowLoaded((function(n){n.applyStudiesOverrides(e)}))}},{key:"watchList",value:function(){return this._innerAPI().watchlist()}},{key:"news",value:function(){return this._innerAPI().news()}},{key:"widgetbar",value:function(){return this._innerAPI().widgetbar()}},{key:"activeChart",value:function(){return this._innerAPI().activeChart()}},{key:"chartsCount",value:function(){return this._innerAPI().chartsCount()}},{key:"layout",value:function(){return this._innerAPI().layout()}},{key:"setLayout",value:function(e){this._innerAPI().setLayout(e)}},{key:"layoutName",value:function(){return this._innerAPI().layoutName()}},{key:"changeTheme",value:function(e,n){return this._innerWindow().changeTheme(e,n)}},{key:"getTheme",value:function(){return this._innerWindow().getTheme()}},{key:"takeScreenshot",value:function(){this._doWhenInnerApiLoaded((function(e){e.takeScreenshot()}))}},{key:"lockAllDrawingTools",value:function(){return this._innerAPI().lockAllDrawingTools()}},{key:"hideAllDrawingTools",value:function(){return this._innerAPI().hideAllDrawingTools()}},{key:"drawOnAllCharts",value:function(e){this._innerAPI().drawOnAllCharts(e)}},{key:"magnetEnabled",value:function(){return this._innerAPI().magnetEnabled()}},{key:"magnetMode",value:function(){return this._innerAPI().magnetMode()}},{key:"undoRedoState",value:function(){return this._innerAPI().undoRedoState()}},{key:"setIntervalLinkingEnabled",value:function(e){this._innerAPI().setIntervalLinkingEnabled(e)}},{key:"setTimeFrame",value:function(e){this._innerAPI().setTimeFrame(e)}},{key:"symbolSync",value:function(){return this._innerAPI().symbolSync()}},{key:"intervalSync",value:function(){return this._innerAPI().intervalSync()}},{key:"crosshairSync",value:function(){return this._innerAPI().crosshairSync()}},{key:"timeSync",value:function(){return this._innerAPI().timeSync()}},{key:"getAllFeatures",value:function(){return this._innerWindow().getAllFeatures()}},{key:"clearUndoHistory",value:function(){return this._innerAPI().clearUndoHistory()}},{key:"undo",value:function(){return this._innerAPI().undo()}},{key:"redo",value:function(){return this._innerAPI().redo()}},{key:"startFullscreen",value:function(){this._innerAPI().startFullscreen()}},{key:"exitFullscreen",value:function(){this._innerAPI().exitFullscreen()}},{key:"takeClientScreenshot",value:function(e){return this._innerAPI().takeClientScreenshot(e)}},{key:"navigationButtonsVisibility",value:function(){return this._innerWindow().getNavigationButtonsVisibility()}},{key:"paneButtonsVisibility",value:function(){return this._innerWindow().getPaneButtonsVisibility()}},{key:"dateFormat",value:function(){return this._innerWindow().getDateFormat()}},{key:"_innerAPI",value:function(){return this._innerWindow().tradingViewApi}},{key:"_innerWindow",value:function(){return this._iFrame.contentWindow}},{key:"_doWhenInnerWindowLoaded",value:function(e){var n=this;this._ready?e(this._innerWindow()):this._innerWindowLoaded.then((function(){e(n._innerWindow())}))}},{key:"_doWhenInnerApiLoaded",value:function(e){var n=this;this._doWhenInnerWindowLoaded((function(t){t.doWhenApiIsReady((function(){return e(n._innerAPI())}))}))}},{key:"_autoResizeChart",value:function(){this._options.fullscreen&&(this._iFrame.style.height=window.innerHeight+"px")}},{key:"_create",value:function(){var e=this,n=this._render();this._options.container_id&&console.warn("`container_id` is now deprecated. Please use `container` instead to either still pass a string or an `HTMLElement`.");var t=this._options.container_id||this._options.container,o="string"==typeof t?document.getElementById(t):t;if(null===o)throw new Error("There is no such element - #".concat(this._options.container));o.innerHTML=n,this._iFrame=o.querySelector("#".concat(this._id));var r=this._iFrame;(this._options.autosize||this._options.fullscreen)&&(r.style.width="100%",this._options.fullscreen||(r.style.height="100%")),window.addEventListener("resize",this._onWindowResize),this._onWindowResize(),this._innerWindowLoaded=new Promise((function(e){r.addEventListener("load",(function n(){r.removeEventListener("load",n,!1),e()}),!1)})),this._innerWindowLoaded.then((function(){e._innerWindow().widgetReady((function(){e._ready=!0;var t,o=(0,_.Z)(e._readyHandlers);try{for(o.s();!(t=o.n()).done;){var r=t.value;try{r.call(e)}catch(n){console.error(n)}}}catch(i){o.e(i)}finally{o.f()}e._innerWindow().initializationFinished()}))}))}},{key:"_render",value:function(){var e=window;if(e[this._id]={datafeed:this._options.datafeed,customFormatters:this._options.custom_formatters||this._options.customFormatters,brokerFactory:this._options.broker_factory||this._options.brokerFactory,overrides:this._options.overrides,studiesOverrides:this._options.studies_overrides,tradingCustomization:this._options.trading_customization,disabledFeatures:this._options.disabled_features,enabledFeatures:this._options.enabled_features,brokerConfig:this._options.broker_config||this._options.brokerConfig,restConfig:this._options.restConfig,favorites:this._options.favorites,logo:this._options.logo,numeric_formatting:this._options.numeric_formatting,rss_news_feed:this._options.rss_news_feed,newsProvider:this._options.news_provider,loadLastChart:this._options.load_last_chart,saveLoadAdapter:this._options.save_load_adapter,loading_screen:this._options.loading_screen,settingsAdapter:this._options.settings_adapter,getCustomIndicators:this._options.custom_indicators_getter,additionalSymbolInfoFields:this._options.additional_symbol_info_fields,headerWidgetButtonsMode:this._options.header_widget_buttons_mode,customTranslateFunction:this._options.custom_translate_function,symbolSearchComplete:this._options.symbol_search_complete,contextMenu:this._options.context_menu,settingsOverrides:this._options.settings_overrides},this._options.saved_data)e[this._id].chartContent={json:this._options.saved_data},this._options.saved_data_meta_info&&(e[this._id].chartContentExtendedData=this._options.saved_data_meta_info);else if(!this._options.load_last_chart&&!this._options.symbol)throw new Error("Symbol is not defined: either 'symbol' or 'load_last_chart' option must be set");var n=(this._options.library_path||"")+"".concat(encodeURIComponent(this._options.locale),"-tv-chart.e2a841ff.html#symbol=")+encodeURIComponent(this._options.symbol||"")+"&interval="+encodeURIComponent(this._options.interval)+(this._options.timeframe?"&timeframe="+encodeURIComponent(this._options.timeframe):"")+(this._options.toolbar_bg?"&toolbarbg="+encodeURIComponent(this._options.toolbar_bg.replace("#","")):"")+(this._options.studies_access?"&studiesAccess="+encodeURIComponent(JSON.stringify(this._options.studies_access)):"")+"&widgetbar="+encodeURIComponent(JSON.stringify(this._options.widgetbar))+(this._options.drawings_access?"&drawingsAccess="+encodeURIComponent(JSON.stringify(this._options.drawings_access)):"")+"&timeFrames="+encodeURIComponent(JSON.stringify(this._options.time_frames))+"&locale="+encodeURIComponent(this._options.locale)+"&uid="+encodeURIComponent(this._id)+"&clientId="+encodeURIComponent(String(this._options.client_id))+"&userId="+encodeURIComponent(String(this._options.user_id))+(this._options.charts_storage_url?"&chartsStorageUrl="+encodeURIComponent(this._options.charts_storage_url):"")+(this._options.charts_storage_api_version?"&chartsStorageVer="+encodeURIComponent(this._options.charts_storage_api_version):"")+(this._options.custom_css_url?"&customCSS="+encodeURIComponent(this._options.custom_css_url):"")+(this._options.custom_font_family?"&customFontFamily="+encodeURIComponent(this._options.custom_font_family):"")+(this._options.auto_save_delay?"&autoSaveDelay="+encodeURIComponent(String(this._options.auto_save_delay)):"")+"&debug="+encodeURIComponent(String(this._options.debug))+(this._options.snapshot_url?"&snapshotUrl="+encodeURIComponent(this._options.snapshot_url):"")+(this._options.timezone?"&timezone="+encodeURIComponent(this._options.timezone):"")+(this._options.study_count_limit?"&studyCountLimit="+encodeURIComponent(String(this._options.study_count_limit)):"")+(this._options.symbol_search_request_delay?"&ssreqdelay="+encodeURIComponent(String(this._options.symbol_search_request_delay)):"")+(this._options.compare_symbols?"&compareSymbols="+encodeURIComponent(JSON.stringify(this._options.compare_symbols)):"")+(this._options.theme?"&theme="+encodeURIComponent(String(this._options.theme)):"")+(this._options.header_widget_buttons_mode?"&header_widget_buttons_mode="+encodeURIComponent(String(this._options.header_widget_buttons_mode)):"")+(this._options.time_scale?"&time_scale="+encodeURIComponent(JSON.stringify(this._options.time_scale)):"");return'<iframe id="'+this._id+'" name="'+this._id+'"  src="'+n+'"'+(this._options.autosize||this._options.fullscreen?"":' width="'+this._options.width+'" height="'+this._options.height+'"')+' title="Financial Chart" frameborder="0" allowTransparency="true" scrolling="no" allowfullscreen style="display:block;"></iframe>'}}]),e}();window.TradingView=window.TradingView||{},window.TradingView.version=function(){return"TT v22.032 (internal id e2a841ff @ 2022-07-06T11:55:17.248Z)"};var w=t(55685),C=t(74384),k=t(3596),x={has_weekly_and_monthly:!0,data_status:"streaming",timezone:"Etc/UTC",has_intraday:!0},S=function(){function e(n,t,o,r){var s=this;(0,f.Z)(this,e),this.req_resolveSymbol=null,this.req_getBars=null,this.req_subscribeBars=null,this.apiTimeout=1e4;var a="".concat(t,":").concat(encodeURIComponent(o));r&&(a+=":demo"),this.token=a,this.wsClient=new k.Z(n,(function(e){var n;try{n=JSON.parse(e.data)}catch(v){}if(null!=n){var t=n,o=(t.e,t.s),r=t.t,a=t.o,l=t.h,u=t.l,c=t.c,d=t.v,h=t.type,_=t.desc,f=t.pricescale,p=t.session,m=(t.n,t.c,t.d,t.bars),b=t.p;if(null==h){if(null==m){if(null==r);else if(null!=s.req_subscribeBars&&s.req_subscribeBars.resolution===b&&s.req_subscribeBars.symbol===o){var y={time:r,close:c,open:a,high:l,low:u,volume:d};s.req_subscribeBars.onRealtimeCallback(y)}}else if(null!=s.req_getBars){var g=s.req_getBars,w=g.symbol,C=g.onHistoryCallback,k=g.timeoutHandle;if(w!==o)return;s.req_getBars=null,clearTimeout(k),C(m,{noData:null==m||0===m.length})}}else if(null!=s.req_resolveSymbol){var S=s.req_resolveSymbol,I=S.onSymbolResolvedCallback,Z=S.timeoutHandle;s.req_resolveSymbol=null,clearTimeout(Z);var P=(0,i.Z)((0,i.Z)({},x),{},{name:o,description:_,type:h,pricescale:f,minmov:1,minmov2:0,pointvalue:1,session:"0000-2359"===p?"24x7":p});console.log("symbolInfo",P),I(P)}}}))}return(0,p.Z)(e,[{key:"onReady",value:function(e){console.log("onReady"),setTimeout((function(){return e({exchanges:[],symbols_types:[{name:"Forex",value:"forex"},{name:"CFD",value:"cfd"},{name:"Futures",value:"futures"}],supported_resolutions:["1","5","15","30","60","240","D","W","M"],supports_marks:!1,supports_timescale_marks:!1,supports_time:!1,supports_search:!1,symbols_grouping:!1})}),0)}},{key:"searchSymbols",value:function(e,n,t,o){console.log("searchSymbols",e,n,t)}},{key:"resolveSymbol",value:function(e,n,t,o){var r=this,i=setTimeout((function(){if(null!=r.req_resolveSymbol){var e=r.req_resolveSymbol.onResolveErrorCallback;r.req_resolveSymbol=null,e("API timeout")}}),this.apiTimeout);this.req_resolveSymbol={onSymbolResolvedCallback:n,onResolveErrorCallback:t,timeoutHandle:i},this.wsClient.send_({c:"symbol-detail",s:e},!0)}},{key:"getBars",value:function(e,n,t,o,r){var i=this;console.log("getBars",e,n,t);var s=setTimeout((function(){if(null!=i.req_getBars){var e=i.req_getBars,n=e.onErrorCallback,t=e.timeoutHandle;i.req_getBars=null,clearTimeout(t),n("API timeout")}}),this.apiTimeout);this.req_getBars={symbol:e.name,onHistoryCallback:o,onErrorCallback:r,timeoutHandle:s},this.wsClient.send_({c:"ohlcv-bars",t:this.token,s:e.name,period:n,count:t.countBack,to:t.to},!0)}},{key:"subscribeBars",value:function(e,n,t,o){console.log("subscribeBars",e,n,o),null!=this.req_subscribeBars&&this.req_subscribeBars.subscriberUID!==o&&(this.previousSubscribe={subscriberUID:this.req_subscribeBars.subscriberUID,symbol:this.req_subscribeBars.symbol,resolution:this.req_subscribeBars.resolution}),this.req_subscribeBars={onRealtimeCallback:t,subscriberUID:o,symbol:e.name,resolution:n},this.wsClient.send_({c:"sub-ohlcv",s:e.name,period:n},!0)}},{key:"unsubscribeBars",value:function(e){if(console.log("unsubscribeBars",e),null!=this.previousSubscribe&&this.previousSubscribe.subscriberUID===e)return this.wsClient.send_({c:"unsub-ohlcv",s:this.previousSubscribe.symbol,period:this.previousSubscribe.resolution},!0),void delete this.previousSubscribe;null!=this.req_subscribeBars&&this.req_subscribeBars.subscriberUID===e&&(this.wsClient.send_({c:"unsub-ohlcv",s:this.req_subscribeBars.symbol,period:this.req_subscribeBars.resolution},!0),this.req_subscribeBars=null)}},{key:"getMarks",value:function(e,n,t,o,r){console.log("getMarks",e,n,t,r)}},{key:"getTimescaleMarks",value:function(e,n,t,o,r){console.log("getTimescaleMarks",e,n,t,r)}},{key:"getServerTime",value:function(e){console.log("getServerTime"),setTimeout((function(){e(Math.floor(Date.now()/1e3))}),0)}},{key:"subscribeQuotes",value:function(e,n,t,o){console.log("subscribeQuotes",e,n,o)}},{key:"unsubscribeQuotes",value:function(e){console.log("unsubscribeQuotes",e)}}]),e}(),I=S,Z=t(71370),P=t(40860),A=new I(Z.url.join("wss://mt4-api.decodeex.com/","/"));var R=(0,d.forwardRef)((function(e,n){var t=e.symbol,o=e.onChartReady,r=(0,d.useRef)(null),i=(0,d.useRef)(!1),s=(0,w.Z)().currentLang,a=(0,C.F)({disableSyncService:!0}),l=a.stockUpColor,u=a.stockDownColor;return(0,d.useImperativeHandle)(n,(function(){return{drawLines:function(e){var n;if(null!==(n=r.current)&&void 0!==n&&n.activeChart&&i.current)return(e||[]).map((function(e){var n;return null===(n=r.current.activeChart())||void 0===n?void 0:n.createShape({price:e.price},{shape:"horizontal_line",text:e.text,lock:!0,disableSave:!0,disableUndo:!0,overrides:{linecolor:e.lineColor||"green"}})}))},drawAlertIcon:function(e){var n;if(null!==(n=r.current)&&void 0!==n&&n.activeChart&&i.current)return(e||[]).map((function(e){var n;return console.log(e),null===(n=r.current.activeChart())||void 0===n?void 0:n.createShape({price:e.price,time:e.time},{shape:"icon",lock:!0,disableSave:!0,disableSelection:!0,disableUndo:!0,zOrder:"top",overrides:{color:e.color||"green",icon:"0xf0aa",size:22}})}))},setVisiablePriceRange:function(e){var n,t=e.from,o=e.to;null!==(n=r.current)&&void 0!==n&&n.activeChart&&i.current&&r.current.activeChart().getPanes()[0].getMainSourcePriceScale().setVisiblePriceRange({from:t,to:o})},removeLines:function(e){var n;null!==(n=r.current)&&void 0!==n&&n.activeChart&&i.current&&(e||[]).map((function(e){var n;null===(n=r.current.activeChart())||void 0===n||n.removeEntity(e)}))},onDataLoadSubscribe:function(e,n,t){var o,s,a;null!==(o=r.current)&&void 0!==o&&o.activeChart&&i.current&&(null===(s=r.current.activeChart())||void 0===s||null===(a=s.onDataLoaded())||void 0===a||a.subscribe(e,n,t))},getChartInstance:function(){return r.current}}}),[r.current,i.current]),d.useEffect((function(){var e={symbol:t||"BTCUSD",interval:5,timeframe:"6h",datafeed:A,container:"tv_chart_container",library_path:"/charting_library/",locale:"cn"==s.value?"zh":"cnTw"==s.value?"zh_TW":"en",chartsStorageUrl:"https://saveload.tradingview.com",chartsStorageApiVersion:"1.1",fullscreen:!1,autosize:!0,width:"100%",theme:"Dark",custom_css_url:"css/style.css",loading_screen:{backgroundColor:"rgb(40, 40, 61)",foregroundColor:"rgb(255,197,0)"},disabled_features:["save_chart_properties_to_local_storage","use_localstorage_for_settings","chart_crosshair_menu","order_panel","trading_account_manager","header_undo_redo","header_symbol_search","header_compare","header_saveload","header_settings","header_fullscreen_button","header_screenshot","header_layouttoggle","add_to_watchlist","right_toolbar","symbol_search_hot_key"],enabled_features:["move_logo_to_main_pane"],overrides:{"paneProperties.backgroundType":"solid","mainSeriesProperties.candleStyle.upColor":l,"mainSeriesProperties.candleStyle.downColor":u,"mainSeriesProperties.candleStyle.borderUpColor":l,"mainSeriesProperties.candleStyle.borderDownColor":u,"mainSeriesProperties.candleStyle.wickUpColor":l,"mainSeriesProperties.candleStyle.wickDownColor":u,"mainSeriesProperties.priceLineWidth":1,"mainSeriesProperties.priceLineColor":"#fff"},studies_overrides:{"volume.volume.color.0":u,"volume.volume.color.1":l,"volume.volume.transparency":70,"volume.volume ma.color":"rgb(255,197,0)","volume.volume ma.transparency":30,"volume.volume ma.linewidth":5,"bollinger bands.median.color":"#33FF88","bollinger bands.upper.linewidth":7}};return r.current=new g(e),r.current.onChartReady((function(){i.current=!0,o&&o(!0)})),function(){null!==r.current&&(r.current.remove(),r.current=null,i.current=!1,o&&o(!1))}}),[s.value]),(0,P.jsx)("div",{id:"tv_chart_container",style:{width:"100%",height:"100%"}})})),j=t(12833),L=t(28792),T=t(40165),W=t(40911),F=t(38870),B=t(69147),D=t(30190),U=t(41042),E=t(21719),q=t(15898),z=(t(50963),t(6803),t(2383)),M=t(72745),O=(t(89728),t(55040),t(74114),function(e){e.error,e.resetErrorBoundary;var n=(0,w.Z)().t;return(0,P.jsxs)(l.Z,{alignItems:"center",spacing:2,children:[(0,P.jsx)(u.Z,{fontSize:"20px",children:n("opoosError")}),(0,P.jsx)(u.Z,{children:n("pleaseRefreshPage")})]})}),H=t(15054),N=t(16487),V="/api/ws",G=new(t(49801).dK)("wss://academy-api.orionta.io",{path:V.endsWith("/")?V:"/api/ws/",reconnectionDelayMax:1e4,transports:["websocket"],autoConnect:!1}),J=function(e,n){return G.socket(e,n?{auth:{token:n}}:null)},K=function(e,n){var t=(0,d.useState)([]),o=(0,s.Z)(t,2),r=o[0],a=o[1];return(0,d.useEffect)((function(){if(n){var t=J("/signal-advice",e);return t.on("connect",(function(){console.log("websocket connected alert"),t.emit("subscribe",n)})),t.on("advice",(function(e){console.log("websocket advice received alert",e),a((function(n){return(0,N.Z)(e.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{time:e.time})})))}))})),t.connect(),function(){t.off("advice"),t.off("connect")}}}),[n]),r},Q=t(97424),X=t(51061),Y=t(43749),$=function(e){var n,t;(0,a.Z)(e);var _=(0,w.Z)("app").t,f=(0,h.useSearchParams)(),p=(0,s.Z)(f,2),v=p[0],m=p[1],b=v.get("id")||null,y=(0,j.IrP)({id:b}),g=y.data,k=y.isLoading,x=y.utate,S=(0,L.H)((function(e){return[e.setProductId,e.setProductItem]})),I=(0,s.Z)(S,2),Z=I[0],A=I[1],N=(0,j.W0d)(),V=N.data,G=N.isLoading,J=N.hasValidSignal,$=(0,j.NO7)(),ee=$.data,ne=($.isLoading,null===V||void 0===V||null===(n=V.signalsKey)||void 0===n||null===(t=n[g.symbol])||void 0===t?void 0:t.signal),te=K(null,g.symbol),oe=(0,q.Ds)().enqueueSnackbar,re=(0,j._pY)(),ie=re.data,se=(re.isLoading,ie.filter((function(e){return"activated"===e.status&&"live"===e.type&&!Boolean((0,T.get)(e,"rawData.isHidden"))})));(0,d.useEffect)((function(){(0,T.isEmpty)(g)||k||(A(g),Z(b))}),[g,k]);var ae=(0,C.F)({disableSyncService:!0}).getStockColorValue,le=ae(-1),ue=ae(1),ce=(0,d.useRef)(null),de=(0,d.useRef)(null),he=(0,d.useRef)(null),_e=(0,d.useRef)(null),fe=(0,d.useRef)(null),pe=(0,d.useState)(!1),ve=(0,s.Z)(pe,2),me=ve[0],be=ve[1],ye=(0,D.H)((function(e){return[e.submitting,e.setSubmitting,e.isIniting,e.setIsIniting,e.reInitTrigger,e.setReInitTrigger,e.ready,e.setReady,e.account,e.setOpenRequirePassword,e.lot,e.showSignal,e.setShowSignal]})),ge=(0,s.Z)(ye,13),we=ge[0],Ce=ge[1],ke=ge[2],xe=(ge[3],ge[4],ge[5],ge[6]),Se=(ge[7],ge[8]),Ie=ge[9],Ze=ge[10],Pe=ge[11],Ae=(ge[12],(0,X.W)()),Re=(0,d.useState)(!1),je=(0,s.Z)(Re,2),Le=je[0],Te=je[1],We=(0,j.OhN)({accountId:Se}),Fe=We.data,Be=We.mutate,De=(We.isLoading,(0,B.useFavorite)().favoritesId),Ue=(0,j.qBF)({favoritesId:De}),Ee=Ue.data,qe=Ue.isLoading,ze=(0,E.Z)(null===Fe||void 0===Fe?void 0:Fe.login,null===Fe||void 0===Fe?void 0:Fe.password,null===Fe||void 0===Fe?void 0:Fe.groupType),Me=(0,d.useMemo)((function(){return(0,P.jsx)(l.Z,{sx:{height:"60vh"},children:(me||g.symbol)&&(0,P.jsx)(R,{ref:ce,symbol:g.symbol,onChartReady:be})})}),[g.symbol,me]),Oe=(0,d.useCallback)((function(){if(ne){var e,n=Math.min(ne.pt2,ne.sl),t=Math.max(ne.pt2,ne.sl),o=(t-n)/5;console.log("load"),_e.current=!0,null===ce||void 0===ce||ce.current.removeLines(de.current),de.current=null===(e=ce.current)||void 0===e?void 0:e.drawLines([{price:ne.sl,lineColor:le,text:"sl"},{price:ne.entry,lineColor:"rgb(255,197,0)",text:"entry"},{price:ne.pt1,lineColor:ue,text:"pt1"},{price:ne.pt2,lineColor:ue,text:"pt2"}]),setTimeout((function(){return null===ce||void 0===ce?void 0:ce.current.setVisiablePriceRange({from:n-o,to:t+o})}),50)}}),[Pe,ce.current,ne,me,null===g||void 0===g?void 0:g.symbol]);(0,d.useEffect)((function(){var e;Pe&&ce.current&&ne&&!G&&me?(null===(e=ce.current)||void 0===e||e.onDataLoadSubscribe("drawlines",(function(){Oe()}),!0),!0!==_e.current&&Oe()):de.current&&(null===ce||void 0===ce||ce.current.removeLines(de.current));return function(){var e;ce.current&&me&&(null===(e=ce.current)||void 0===e||e.removeLines(de.current));_e.current=!1,de.current=null}}),[Pe,ce.current,ne,me,null===g||void 0===g?void 0:g.symbol]),(0,d.useEffect)((function(){if(Pe&&ce.current&&te&&me&&ee.isPro){var e;null===ce||void 0===ce||ce.current.removeLines(he.current);var n=function(){var e;fe.current=!0,he.current=null===(e=ce.current)||void 0===e?void 0:e.drawAlertIcon((te||[]).map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{color:"rgb(255,197,0)"})})))};null===(e=ce.current)||void 0===e||e.onDataLoadSubscribe(null,(function(){n()}),!0),!0!==fe.current&&n()}else he.current&&(null===ce||void 0===ce||ce.current.removeLines(he.current));return function(){var e;null===(e=ce.current)||void 0===e||e.removeLines(he.current),he.current=null,fe.current=!1}}),[Pe,ce.current,te,me,null===g||void 0===g?void 0:g.symbol]);var He=function(){var e=(0,r.Z)((0,o.Z)().mark((function e(n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Ce(!0),e.next=4,n();case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(0),console.log(e.t0),"incorrectPassword"!==e.t0.message){e.next=13;break}Ie(!0),e.next=14;break;case 13:throw e.t0;case 14:return e.prev=14,Ce(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,6,14,17]])})));return function(n){return e.apply(this,arguments)}}(),Ne=function(){var e=(0,r.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He((0,r.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ze.sendOrder(g.symbol,E.M.Sell,Number(Ze),null,null,null);case 3:oe(_("sellSuccess"),{variant:"success"}),setTimeout((function(){Ae(/balanceHook/)}),400),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),oe(_("sellFailed",{reason:_(e.t0.message)}),{variant:"error"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ve=function(){var e=(0,r.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He((0,r.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ze.sendOrder(g.symbol,E.M.Buy,Number(Ze),null,null,null);case 3:oe(_("buySuccess"),{variant:"success"}),setTimeout((function(){Ae(/balanceHook/)}),400),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),oe(_("buyFailed",{reason:_(e.t0.message)}),{variant:"error"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ge=(0,d.useRef)(),Je=(0,d.useRef)(),Ke=(0,d.useRef)();(0,d.useEffect)((function(){if(xe){(0,T.isFunction)(Ge.current)&&Ge.current();Ge.current=null===ze||void 0===ze?void 0:ze.watch((0,T.get)(g,"symbol"),(e=Ke.current,n=Je.current,function(t){n.innerHTML=(0,z.currencyFormatorWithDecimal)(t.quote.bid,"",(0,T.get)(g,"decimal"),!0),e.innerHTML=(0,z.currencyFormatorWithDecimal)(t.quote.ask,"",(0,T.get)(g,"decimal"),!0)}))}var e,n;return function(){null===ze||void 0===ze||ze.unwatch((0,T.get)(g,"symbol")),(0,T.isFunction)(Ge.current)&&Ge.current()}}),[xe]);var Qe=[{label:_("bid"),value:"-/-",ref:Je},{label:_("ask"),value:"-/-",ref:Ke}],Xe=0==se.length||Ze<=0||!xe;return(0,P.jsx)(l.Z,{sx:{px:2},children:(0,P.jsxs)(l.Z,{direction:"row",spacing:2,alignItems:"flex-start",children:[(0,P.jsxs)(l.Z,{sx:{borderWidth:1,backgroundColor:"rgb(40,40,61)",borderColor:"rgb(40,40,61)",borderStyle:"solid",width:"150px",borderRadius:"5px",overflow:"hidden",mt:4,p:1},children:[(0,P.jsx)(u.Z,{textAlign:"center",fontWeight:"600",sx:{mb:1,mt:1},children:_("favourite")}),qe?(0,P.jsx)(l.Z,{alignItems:"center",justifyContent:"center",children:(0,P.jsx)(c.Z,{})}):Ee.length>0?(0,P.jsx)(l.Z,{spacing:1,children:Ee.map((function(e){return(0,P.jsxs)(W.Z,{onClick:function(){return function(e){if(m({id:e.id}),ce.current){var n=ce.current.getChartInstance();console.log(e.symbol),n.setSymbol(e.symbol,"5")}}(e)},sx:{cursor:"pointer",borderRadius:"2px",width:"100%",px:1,position:"relative"},children:[Number(b)===Number(e.id)&&(0,P.jsx)(W.Z,{sx:{position:"absolute",left:0,top:0,bottom:0,width:"2px",backgroundColor:"rgb(255,197,0)"}}),(0,P.jsx)(M.Z,{item:e,displaySignalDot:J&&(0,T.has)((0,T.get)(V,"signalsKey"),e.symbol)})]},e.symbol)}))}):(0,P.jsx)(u.Z,{children:_("noFavorSymbols")})]}),(0,P.jsxs)(l.Z,{spacing:1,sx:{flex:1},children:[(0,P.jsxs)(l.Z,{direction:"row",alignItems:"center",justifyContent:"center",spacing:2,px:2,children:[(0,P.jsx)(M.Z,{item:g,enlarge:!0}),Fe&&(0,P.jsxs)(u.Z,{fontWeight:"700",fontSize:16,children:[_("account")," ","FX ".concat(Fe.login)]})]}),(0,P.jsx)(W.Z,{sx:{borderWidth:1,backgroundColor:"rgb(40,40,61)",borderColor:"rgb(40,40,61)",borderStyle:"solid",width:"100%",borderRadius:"5px",overflow:"hidden"},children:(0,P.jsxs)(W.Z,{sx:{position:"relative"},children:[Me,(0,P.jsxs)(l.Z,{direction:"row",alignItems:"center",sx:{position:"absolute",right:8,top:1},spacing:2,children:[ne&&J&&ee.subscribed&&(0,P.jsxs)(W.Z,{children:[(0,P.jsx)(u.Z,{fontSize:"10px",sx:{color:"#B4B4C8",mb:-.5},children:_("policy")}),(0,P.jsx)(u.Z,{fontSize:"18px",minWidth:"50px",fontWeight:"600",color:"sell"===(null===ne||void 0===ne?void 0:ne.type)?le:ue,children:(0,T.upperCase)(ne.type)})]}),Qe.map((function(e,n){return(0,P.jsxs)(W.Z,{children:[(0,P.jsx)(u.Z,{fontSize:"10px",sx:{color:"#B4B4C8",mb:-.5},children:e.label}),(0,P.jsx)(u.Z,{fontSize:"18px",minWidth:"50px",fontWeight:"600",ref:e.ref,children:e.value})]},n)})),(0,P.jsx)(U.Z,{loadingIndicator:ke?_("verifying"):null,loading:we||ke,variant:"contained",color:"error",size:"small",disabled:Xe,onClick:Ne,sx:{flex:1,width:130,color:"#000"},children:_("sellByMarket")}),(0,P.jsx)(U.Z,{loadingIndicator:ke?_("verifying"):null,loading:we||ke,variant:"contained",color:"primary",size:"small",disabled:Xe,onClick:Ve,sx:{flex:1,width:130,color:"#000"},children:_("buyByMarket")})]})]})}),(0,P.jsxs)(W.Z,{sx:{borderWidth:0,backgroundColor:"rgb(40,40,61)",borderColor:"rgb(40,40,61)",borderStyle:"solid",width:"100%",borderRadius:"5px",overflow:"hidden"},children:[(null===Fe||void 0===Fe?void 0:Fe.login)&&(0,P.jsxs)(l.Z,{alignItems:"center",direction:"row",justifyContent:"space-between",sx:{m:1},children:[(0,P.jsx)(u.Z,{fontWeight:"600",children:_("forexPendingOrder")}),(0,P.jsx)(Y.sq,{onClick:function(e){Te(!0)},size:"small",sx:{backgroundColor:"#505064",p:0,py:.3,px:1,color:"primary.rise",alignItems:"center"},children:_("closeAll")})]}),(0,P.jsx)(W.Z,{sx:{maxHeight:"250px",overflow:"scroll","::-webkit-scrollbar":{display:"none"}},children:(0,P.jsx)(Q.Z,{type:"positions",autoHeight:!0,hidePagination:!0,closeAll:Le,setCloseAll:Te,login:null===Fe||void 0===Fe?void 0:Fe.login,forexAccountId:Se})})]})]}),(0,P.jsx)(l.Z,{sx:{width:350},children:(0,P.jsx)(H.ErrorBoundary,{FallbackComponent:O,onReset:function(){x(),Be()},children:(0,P.jsx)(F.L,{})})})]})})}},15054:function(e,n,t){!function(e,n){"use strict";function t(e){if(e&&e.__esModule)return e;var n=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var o=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,o.get?o:{enumerable:!0,get:function(){return e[t]}})}})),n.default=e,Object.freeze(n)}var o=t(n);function r(e,n){return r=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},r(e,n)}function i(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n)}var s=function(e,n){return void 0===e&&(e=[]),void 0===n&&(n=[]),e.length!==n.length||e.some((function(e,t){return!Object.is(e,n[t])}))},a={error:null},l=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return(n=e.call.apply(e,[this].concat(o))||this).state=a,n.resetErrorBoundary=function(){for(var e,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];null==n.props.onReset||(e=n.props).onReset.apply(e,o),n.reset()},n}i(n,e),n.getDerivedStateFromError=function(e){return{error:e}};var t=n.prototype;return t.reset=function(){this.setState(a)},t.componentDidCatch=function(e,n){var t,o;null==(t=(o=this.props).onError)||t.call(o,e,n)},t.componentDidUpdate=function(e,n){var t,o,r=this.state.error,i=this.props.resetKeys;null!==r&&null!==n.error&&s(e.resetKeys,i)&&(null==(t=(o=this.props).onResetKeysChange)||t.call(o,e.resetKeys,i),this.reset())},t.render=function(){var e=this.state.error,n=this.props,t=n.fallbackRender,r=n.FallbackComponent,i=n.fallback;if(null!==e){var s={error:e,resetErrorBoundary:this.resetErrorBoundary};if(o.isValidElement(i))return i;if("function"===typeof t)return t(s);if(r)return o.createElement(r,s);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},n}(o.Component);function u(e,n){var t=function(t){return o.createElement(l,n,o.createElement(e,t))},r=e.displayName||e.name||"Unknown";return t.displayName="withErrorBoundary("+r+")",t}function c(e){var n=o.useState(null),t=n[0],r=n[1];if(null!=e)throw e;if(null!=t)throw t;return r}e.ErrorBoundary=l,e.useErrorHandler=c,e.withErrorBoundary=u,Object.defineProperty(e,"__esModule",{value:!0})}(n,t(77317))}}]);