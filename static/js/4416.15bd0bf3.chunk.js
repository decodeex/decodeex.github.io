"use strict";(self.webpackChunk_decode_crm_client=self.webpackChunk_decode_crm_client||[]).push([[4416],{4416:function(e,t,r){r.r(t),r.d(t,{default:function(){return k}});var n=r(92680),a=r(24190),u=r(25589),o=r(18617),c=r(26521),s=r(7131),l=r(28418),i=r(93001),m=r(64505),f=r(2211),p=r(70171);var d=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"post",n=document.createElement("form");for(var a in n.method=r,n.action=e,t)if(t.hasOwnProperty(a)){var u=document.createElement("input");u.type="hidden",u.name=a,u.value=t[a],n.appendChild(u)}document.body.appendChild(n),n.submit()},y=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r,a){var u,o,c,s,l,i,m,f,y,b;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=t.gateway,o=t.fromCurrency,c=t.toCurrency,s=t.fromAmount,l=t.toAmount,null!=s||null!=l){e.next=3;break}throw new Error("fromAmount and toAmount cannot be both null");case 3:if(null==s||null==l){e.next=5;break}throw new Error("fromAmount and toAmount cannot be both set");case 5:return i={paymentSystemId:u,fromCurrency:o,toCurrency:c,fromAmount:s,toAmount:l},e.next=8,p.ZP.post(["payment","deposit"],i);case 8:if(m=e.sent,f=m.result,console.log("result",f),!f){e.next=21;break}if(y=f.redirectUrl,!(b=f.postData)){e.next=18;break}return d(y,b),e.abrupt("return");case 18:if(!y){e.next=21;break}return window.location.href=f.redirectUrl,e.abrupt("return");case 21:r(a("serverError"),{variant:"error"});case 22:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),b=y,x=r(16850),h=function(){var e=(0,x.CC)({key:"payment/gateway",request:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.ZP.get("payment/gateway");case 2:return t=e.sent,r=t.result,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),defaultValue:{}});return(0,f.Z)((0,f.Z)({},e),{},{submitDeposit:b})},v=r(88658),w=r(11626),C=r.n(w),Z=r(98845);function k(){var e=h(),t=e.data,r=e.submitDeposit,f=(0,l.Ds)().enqueueSnackbar,p=(0,v.Z)().t,d=(0,u.cI)({defaultValues:{fromCurrency:"",toCurrency:"",fromAmount:"",toAmount:""}}),y=d.watch,b=d.handleSubmit,x=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=C()(t,(function(e){return""===e?null:e})),e.next=4,r(a,f,p);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),f(e.t0.message,{variant:"error"});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),w=t?Object.keys(t):[],k=y("fromCurrency"),A=t&&k?t[k].map((function(e){return{value:e.id,label:e.name}})):[],j=t&&k?t[k].reduce((function(e,t){return e[t.id]=t,e}),{}):null,g=y("gateway"),S=j&&j[g];return t?(0,Z.jsxs)(i.RV,{methods:d,onSubmit:b(x),children:[(0,Z.jsx)(i.Cc,{name:"fromCurrency",label:"From currency",sx:{my:2},SelectProps:{sx:{textTransform:"capitalize"}},children:w.map((function(e){return(0,Z.jsx)(o.Z,{value:e,children:e},e)}))}),(0,Z.jsx)(i.Cc,{name:"gateway",label:"Gateway",sx:{my:2},SelectProps:{sx:{textTransform:"capitalize"}},children:A.map((function(e){return(0,Z.jsx)(o.Z,{value:e.value,children:e.label},e.value)}))}),(0,Z.jsx)(i.au,{name:"fromAmount",label:"From amount",sx:{my:2},disabled:!S||!S.meta.usePayableAmount}),(0,Z.jsx)(i.au,{name:"toCurrency",label:"To currency",sx:{my:2}}),(0,Z.jsx)(i.au,{name:"toAmount",label:"To amount",sx:{my:2},disabled:!S||!S.meta.useReceivableAmount}),(0,Z.jsx)(c.Z,{sx:{display:"flex",justifyContent:"center",mt:2},children:(0,Z.jsx)(m.C5,{type:"submit",children:"Submit"})})]}):(0,Z.jsx)(s.Z,{})}}}]);