"use strict";(self.webpackChunk_decode_crm_client=self.webpackChunk_decode_crm_client||[]).push([[4604],{45625:function(e,n,t){var r=t(2211),s=t(92680),o=t(24190),c=t(12130),u=t(45771),i=t(40911),a=t(30366),l=t(61204),f=t(66901),d=t(36043),p=t(43749),h=t(55685),w=t(77317),v=t(21719),k=t(63996),Z=t(70225),x=t(25076),b=t(40860),S=function(e){var n=e.onSuccess,t=e.forexAccountId,r=e.onClose,a=(0,h.Z)().t,l=(0,w.useState)({password:""}),f=(0,c.Z)(l,2),S=f[0],g=f[1],m=(0,w.useState)(null),y=(0,c.Z)(m,2),O=y[0],R=y[1],C=(0,w.useState)(!1),_=(0,c.Z)(C,2),E=_[0],j=_[1],q=(0,k.Oh)({accountId:t}),N=q.data;q.mutate,q.isLoading;console.log(N);var I=(0,v.Z)(null===N||void 0===N?void 0:N.login,null===S||void 0===S?void 0:S.password,null===N||void 0===N?void 0:N.groupType),D=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(!0),e.next=4,null===I||void 0===I?void 0:I.login();case 4:return e.next=6,(0,k.Rj)({accountId:null===N||void 0===N?void 0:N.id,password:null===S||void 0===S?void 0:S.password});case 6:r(),setTimeout((function(){g({password:""}),R(null),j(!1)}),200),n&&n(I),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),R(a((0,Z.getErrorMessage)(e.t0)));case 14:return e.prev=14,j(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,10,14,17]])})));return function(){return e.apply(this,arguments)}}();return(0,b.jsx)(d.Z,{spacing:2,sx:{width:"100%"},children:(0,b.jsxs)(d.Z,{spacing:2,children:[(0,b.jsx)(u.Z,{variant:"h5",children:a("requirePassword")}),(0,b.jsx)(u.Z,{variant:"body2",children:a("requirePasswordDesc",{login:null===N||void 0===N?void 0:N.login})}),(0,b.jsx)(x.dz,{values:S,setValues:g,children:(0,b.jsx)(x.xr,{field:"password",label:a("password"),sx:{my:1}})}),O&&(0,b.jsx)(i.Z,{children:(0,b.jsx)(u.Z,{textAlign:"center",color:"red",children:O})}),(0,b.jsx)(p.sq,{isLoading:E,onClick:D,children:a("confirm")})]})})};n.Z=function(e){var n=e.open,t=e.onClose,s=e.onSuccess,o=e.forexAccountId;return(0,b.jsx)(a.Z,{fullWidth:!0,maxWidth:"xs",open:n,onClose:t,PaperComponent:function(e){return(0,b.jsxs)(i.Z,{sx:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,b.jsx)(i.Z,{onClick:t,sx:{width:"100%",height:"100%",position:"fixed"}}),(0,b.jsx)(l.Z,(0,r.Z)((0,r.Z)({},e),{},{children:e.children}))]})},children:(0,b.jsx)(f.Z,{sx:{pb:5},children:(0,b.jsx)(S,{onSuccess:s,forexAccountId:o,onClose:t})})})}},21719:function(e,n,t){t.d(n,{M:function(){return v}});var r=t(92680),s=t(24190),o=t(16487),c=t(77317),u=t(71370),i=t(3596),a=t(43832),l=t(40165),f=u.url.join("wss://mt4-api.dev.decodeex.com","/"),d=(0,a.ZP)((function(e,n){return{request:{},setRequests:function(n){return e((function(){return{request:n}}))}}})),p=(0,a.ZP)((function(e,n){return{quote:{},historyQuotes:[],setQuote:function(n){return e((function(){return{quote:n}}))}}})),h=new i.Z(f,(function(e){var n,t=JSON.parse(e.data),r=t.e,s=t.c,c=t.l,u=t.s,i=t.b,a=t.a,f=t.t,h=t.tk,v=t.op;if(!(0,l.isNil)(u)||(null===(n=d.getState().request)||void 0===n?void 0:n.login)===c){var k;if(r)return k=s===w.BAD_REQUEST?"badRequest":s===w.LOGIN_ERROR?"incorrectPassword":s===w.NOT_FOUND?"notFound":"serverError",void d.setState({request:{success:!1,result:null,error:k,login:null}});if(h)d.setState({request:{success:!0,result:null,error:null,login:null}});else if(u){var Z={login:c,symbol:u,bid:i,ask:a,time:f};p.setState((function(){return{quote:Z,historyQuotes:[].concat((0,o.Z)(p.getState().historyQuotes),[Z])}}))}else{if(-3===v)return console.log("Login successfully"),void d.setState({request:{success:!0,result:null,error:null,login:null}});d.setState({request:{success:!0,result:null,error:null,login:null}}),console.warn("Received unknown ws message",t)}}})),w={BAD_REQUEST:400,NOT_FOUND:404,GENERAL_ERROR:500,LOGIN_ERROR:401},v={Buy:0,Sell:1,BuyLimit:2,SellLimit:3,BuyStop:4,SellStop:5};n.Z=function(e,n,t,o){var u="".concat(e,":").concat(encodeURIComponent(n));o&&(u+=":demo");var i=(0,c.useMemo)((function(){if((0,l.isNil)(n)||""==n)return null;var o=function(){var n=(0,s.Z)((0,r.Z)().mark((function n(){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return d.setState({request:{success:!1,result:null,error:null,login:e}}),n.next=3,new Promise((function(e,n){var t=d.subscribe((function(r){var s=r.request;s.success&&(e(s),t()),s.error&&(n(new Error(s.error)),t())}));setTimeout((function(){t(),e(!0)}),1e4)}));case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return{login:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.send_({c:"login",t:u,g:t},!0),e.next=3,o();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),watch:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n,s){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.send_({c:"sub",t:u,g:t,s:n},!0),e.abrupt("return",p.subscribe((function(e){s&&s(e)})));case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),unwatch:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.send_({c:"unsub",t:u,g:t,s:n},!0);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),closePosition:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.send_({c:"close",t:u,g:t,tk:n},!0),e.next=3,o();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),closeAll:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("close all"),h.send_({c:"close",t:u,g:t,tk:-1},!0),e.next=4,o();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),cancelOrder:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.send_({c:"cancel",t:u,g:t,tk:n},!0),e.next=3,o();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),cancelAll:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.send_({c:"cancel",t:u,g:t,tk:-1},!0),e.next=3,o();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),sendOrder:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n,s,c,i,a,l,f,d){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.send_({c:"order",t:u,g:t,s:n,op:s,vl:c,p:i,sl:a,tp:l,e:d,m:f},!0),e.next=3,o();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(n,t,r,s,o,c,u,i){return e.apply(this,arguments)}}()}}),[t,u,n]);return i}},74384:function(e,n,t){t.d(n,{F:function(){return w}});var r=t(2211),s=t(92680),o=t(24190),c=t(76956),u=t(40165),i=t(49711),a=t(77317),l=t(55600),f=t(63996),d=["stockColor","syncVerifyStatusFromProfile"],p={greenUpRedDown:{up:"stockGreen",down:"stockRed"},greenDownRedUp:{up:"stockRed",down:"stockGreen"}},h={stockRed:"#f43f5e",stockGreen:"#34d399"},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.disableSyncService,t=void 0!==n&&n,w=(0,f.Un)(),v=w.data,k=w.isLoading,Z=(0,l.usePreferenceStore)((function(e){return e})),x=Z.stockColor,b=Z.syncVerifyStatusFromProfile,S=(0,c.Z)(Z,d),g=(0,i.pm)(),m=(0,a.useCallback)(function(){var e=(0,o.Z)((0,s.Z)().mark((function e(n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(0,u.get)(v,"preference.id")){e.next=5;break}return e.next=4,(0,f.uf)({payload:n,preferenceId:(0,u.get)(v,"preference.id")});case 4:return e.abrupt("return",e.sent);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),g.show({description:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),[v]),y=(0,a.useRef)(0);(0,a.useEffect)((function(){t||0!==y.current||k||!v||(b(v),y.current+=1)}),[v,k]);var O=x||"greenUpRedDown",R=h[p[O].up],C=h[p[O].down];return(0,r.Z)((0,r.Z)({stockColor:O,stockUpColor:R,stockDownColor:C},S),{},{getStockColorValue:function(e){return e>0?R:e<0?C:"#78716c"},updatePreference:m,isLoading:k})}},3596:function(e,n,t){var r=t(92680),s=t(24190),o=t(7403),c=t(56141),u=t(71370),i=0,a=1,l=function(){function e(n,t){var r=this;(0,o.Z)(this,e),this.webSocketOnOpen=function(){console.log("[-- CONNECTION ESTABLISHED --]")},this.webSocketOnClose=function(){console.log("[-- CONNECTION CLOSED --]"),r.disconnect()},this.webSocketOnError=function(){console.log("[-- ERROR OCCURRED --]"),r.disconnect()},this.url=n,this.webSocketOnMessage=t}return(0,c.Z)(e,[{key:"connect_",value:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var n=this;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.webSocket){e.next=10;break}return this.webSocket=new WebSocket(this.url,["aspnetcore-ws.json"]),this.state=i,this.webSocket.onopen=this.webSocketOnOpen,this.webSocket.onclose=this.webSocketOnClose,this.webSocket.onerror=this.webSocketOnError,this.webSocket.onmessage=this.webSocketOnMessage,e.next=9,(0,u.waitUntil_)((function(){return null==n.webSocket||n.webSocket.readyState===a}),100,30);case 9:console.log("ready",this.webSocket.readyState);case 10:return e.abrupt("return",null!=this.webSocket&&this.webSocket.readyState===a);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){this.webSocket&&(this.webSocket.close(),delete this.webSocket)}},{key:"send_",value:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n,t){var s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connect_();case 2:if(!e.sent){e.next=8;break}return s=JSON.stringify(n),this.webSocket.send(s),e.abrupt("return",!0);case 8:if(t){e.next=10;break}throw new Error("Cannot connect to server.");case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,this)})));return function(n,t){return e.apply(this,arguments)}}()}]),e}();n.Z=l}}]);