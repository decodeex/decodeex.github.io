"use strict";(self.webpackChunk_decode_crm_client=self.webpackChunk_decode_crm_client||[]).push([[5951],{25951:function(e,t,r){r.r(t),r.d(t,{default:function(){return Xe}});var n=r(75782),o=r(52398),i=r(66296),a=r(63512),l=r(78566),s=r(36651),c=r(99932),u=r(78450),d=r(13827),g=r(74482),x=r(25624),f=r(1079),h=(r(28040),r(2898)),p=r(12412),m=r(17969),Z=r(87503),v=r(4137),j=r(16944),b=r(99350),y=r(8675),w=r(68846),C=r(84618),k=r(25832),N=r(70289);function S(e){var t=e.accountId,r=e.login,i=e.subType,l=(0,h.Z)().t,s=(0,m.useState)(null),v=(0,o.Z)(s,2),S=v[0],A=v[1],I=(0,m.useState)(!1),R=(0,o.Z)(I,2),F=R[0],T=R[1],D=(0,m.useState)(!1),P=(0,o.Z)(D,2),L=P[0],W=P[1],B=(0,m.useState)(!1),_=(0,o.Z)(B,2),z=_[0],E=_[1],q=(0,m.useState)(!0),O=(0,o.Z)(q,2),G=O[0],K=O[1],M=(0,m.useState)(!0),U=(0,o.Z)(M,2),H=U[0],Y=U[1],V=(0,b.Ds)().enqueueSnackbar,$=(0,k.W)(),X=(0,m.useRef)(null),Q=(0,m.useState)("positions"),J=(0,o.Z)(Q,2),ee=J[0],te=J[1],re=function(){A(null)},ne=Boolean(S),oe=ne?"simple-popover":void 0,ie=[{name:l("forexPendingOrder"),value:"positions",disabled:"copyTrade"===i},{name:l("forexCopyingOrder"),value:"positions",disabled:"copyTrade"!==i},{name:l("forexOpenOrder"),value:"open",disabled:"copyTrade"===i},{name:l("closed"),value:"closedTrades"},{name:l("tradeTransactions"),value:"transactions"}];(0,m.useEffect)((function(){Y("copyTrade"===i?1:0)}),[t,i]);var ae=function(){var e=(0,u.Z)((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"positions"!==ee){e.next=12;break}return W(!0),re(),e.next=6,(0,w.zXq)((0,n.Z)({login:r},t?{password:t}:{}));case 6:W(!1),V(l("updateSuccess"),{variant:"success"}),X.current.resetValue(),$(/balanceHook/),e.next=20;break;case 12:return W(!0),re(),e.next=16,(0,w.HdN)((0,n.Z)({login:r},t?{password:t}:{}));case 16:W(!1),V(l("updateSuccess"),{variant:"success"}),X.current.resetValue(),$(/balanceHook/);case 20:e.next=28;break;case 22:e.prev=22,e.t0=e.catch(0),console.clear(),console.log(e.t0),W(!1),V(l(e.t0.message),{variant:"error"});case 28:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t){return e.apply(this,arguments)}}();return(0,N.jsxs)(a.rg,{sx:{p:0},children:[(0,N.jsx)(g.Z,{sx:{p:2},children:(0,N.jsx)(a.ll,{leftComponent:function(){return(0,N.jsx)(f.pn,{btns:ie,onChange:function(e,t){te(e)},initIndex:H})},rightComponent:function(){return(0,N.jsxs)(N.Fragment,{children:[r&&("positions"===ee||"open"===ee)&&"copyTrade"!==i&&(0,N.jsx)(f.sq,{onClick:function(e){E(!0)},size:"small",sx:{backgroundColor:"#505064",p:0,py:.3,px:1,color:"primary.rise",alignItems:"center"},disabled:G,children:l("positions"===ee?"closeAll":"cancelAll")}),(0,N.jsx)(d.ZP,{id:oe,open:ne,anchorEl:S,onClose:re,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,N.jsxs)(g.Z,{sx:{width:200,textAlign:"center",py:1},children:[(0,N.jsx)(x.Z,{sx:{mb:1},children:l("positions"===ee?"whetherToCloseAll":"cancelPendingAll")}),(0,N.jsx)(f.sq,{sx:{backgroundColor:"#505064",p:0,py:.3,px:1,alignItems:"center",mr:1},onClick:re,children:l("cancel")}),(0,N.jsx)(f.sq,{sx:{backgroundColor:"#505064",p:0,py:.3,px:1,alignItems:"center"},onClick:(0,u.Z)((0,c.Z)().mark((function e(){var t,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==(null===(t=X.current.firstTrade)||void 0===t||null===(r=t.rawData)||void 0===r?void 0:r.hasPassword)){e.next=5;break}re(),T(!0),e.next=7;break;case 5:return e.next=7,ae();case 7:case"end":return e.stop()}}),e)}))),children:l("confirm")})]})})]})}})}),(0,N.jsxs)(g.Z,{children:["positions"===ee&&(0,N.jsx)(j.Z,{type:"copyTrade"===i?"copying":"positions",autoHeight:!0,hidePagination:!0,login:r,forexAccountId:t,ref:X,closeAll:z,setCloseAll:E,setDisabled:K}),"open"===ee&&(0,N.jsx)(j.Z,{type:"open",autoHeight:!0,login:r,forexAccountId:t,hidePagination:!0,ref:X,closeAll:z,setCloseAll:E,setDisabled:K}),"transactions"===ee&&(0,N.jsx)(p.Z,{accountId:t}),"closedTrades"===ee&&(0,N.jsx)(Z.Z,{login:r})]}),(0,N.jsx)(y.Z,{loading:L}),(0,N.jsx)(C.Z,{open:F,onClose:function(){return T(!1)},callback:function(){var e=(0,u.Z)((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ae(t);case 3:T(!1),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),T(!1);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()})]})}var A=r(57956);r(42397);var I=r(85692),R=r(41783),F=r(26949);r(46265);function T(e){var t=(0,h.Z)().t,r=(0,m.useState)("transactions"),n=(0,o.Z)(r,2);n[0],n[1],t("transactions"),t("Today's trades");return(0,N.jsxs)(a.rg,{sx:{p:0},children:[(0,N.jsx)(g.Z,{sx:{pt:2}}),(0,N.jsx)(v.Z,{autoHeight:!0})]})}var D="/api/ws",P=(new(r(82788).dK)("https://crm-api.decodeex.com",{path:D.endsWith("/")?D:D+"/",reconnectionDelayMax:1e4,transports:["websocket"],autoConnect:!1}),r(84691)),L=r(98858),W=r(1532),B=r(40926),_=r(59425),z=r(88141),E=r(58173),q=r(9703),O=r(17301),G=function(e){var t=e.detail,r=e.onClose,a=e.onRefresh,l=void 0===a?function(){}:a,s=(0,m.useState)(!1),d=(0,o.Z)(s,2),p=d[0],Z=d[1],v=(0,m.useState)(null),j=(0,o.Z)(v,2),y=j[0],C=j[1],k=(0,m.useState)({volumeScale:"autoScale"}),S=(0,o.Z)(k,2),A=S[0],I=S[1],R=(0,h.Z)().t,F=(0,w._pY)().data,T=(0,b.Ds)().enqueueSnackbar,D=F.filter((function(e){return"activated"===e.status&&"copyTrade"===e.subType&&(0,E.isNil)(e.copiedAccount)})).map((function(e){return(0,n.Z)((0,n.Z)({},e),{},{label:"".concat(e.currency," Account ").concat(e.login),value:e.id})})),P=[{label:R("autoScaleMode"),value:"autoScale"},{label:R("multiplyMode"),value:"multiply"}],L=function(){var e=(0,u.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Z(!0),C(!1),e.next=5,(0,w.agr)({copyTradeAccount:A.account,signalAccount:(0,E.get)(t,"signalAccount"),volumeScale:A.volumeScale,lotsStep:A.lot});case 5:r(),T(R("followSuccess"),{variant:"success"}),l(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),T(R("followFailed"),{variant:"error"}),C(R((0,O.getErrorMessage)(e.t0)));case 14:return e.prev=14,Z(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,10,14,17]])})));return function(){return e.apply(this,arguments)}}(),W=(0,E.isNil)(A.account)||(0,E.isNil)(A.volumeScale)||"multiply"===A.volumeScale&&((0,E.isNil)(A.lot)||0===Number(A.lot)||(0,E.isNaN)(Number(A.lot)));return(0,N.jsxs)(i.Z,{sx:{width:600,mx:"auto"},spacing:2,children:[(0,N.jsx)(x.Z,{textAlign:"center",children:R("followTrader")}),(0,N.jsx)(i.Z,{children:(0,N.jsxs)(q.dz,{values:A,setValues:I,children:[(0,N.jsx)(q.Nz,{field:"account",options:D,placeholder:R("availableCopyTradeAccounts")+"*",sx:{width:"100%",my:1}}),(0,N.jsx)(q.Nz,{field:"volumeScale",options:P,placeholder:R("volumeScale")+"*",sx:{width:"100%",my:1}}),"multiply"===A.volumeScale&&(0,N.jsx)(q.XI,{field:"lot",placeholder:R("lot")+"*",sx:{width:"100%",my:1},type:"number"}),y&&(0,N.jsx)(g.Z,{children:(0,N.jsx)(x.Z,{textAlign:"center",color:"red",children:y})})]})}),(0,N.jsxs)(i.Z,{alignItems:"center",direction:"row",justifyContent:"center",spacing:2,children:[(0,N.jsx)(f.Ns,{sx:{mr:3},onClick:r,children:R("cancel")}),(0,N.jsx)(f.sq,{loading:p,disabled:W,onClick:L,children:R("follow")})]})]})},K=(0,m.memo)((function(e){var t=e.open,r=e.onClose,n=e.detail,o=e.onRefresh;return(0,N.jsx)(q.ZP,{defaultBtn:!1,fullWidth:!0,maxWidth:"md",open:t,onClose:r,children:t&&(0,N.jsx)(G,{detail:n,onClose:r,onRefresh:o})})})),M=r(8223),U=r(44372),H=r(73283),Y=r(64868),V=function(e){var t=e.item,r=e.isUserEditable,n=e.articleType,o=e.mutate,a=e.setEditPage,l=e.setEditPageId,s=(e.setArticleDetailData,e.handleArticleClose),d=(0,h.Z)().t,g=(0,b.Ds)().enqueueSnackbar,f=function(){var e=(0,u.Z)((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l(t),a(!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,u.Z)((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,w.jX6)(t);case 3:return e.next=5,o();case 5:g(d("deleteSuccess"),{variant:"success"}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),g(d("deleteFailed"),{variant:"error"});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=(0,u.Z)((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,w.ODI)(t,{status:"pending"});case 3:return e.next=5,o();case 5:g(d("PublishSuccess"),{variant:"success"}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),g(d("PublishFailed"),{variant:"error"});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return(0,N.jsxs)(i.Z,{direction:"row",justifyContent:"space-between",sx:{px:1.5,py:1,backgroundColor:"rgb(40, 40, 60)",display:"flex",alignItems:"center",overflow:"hidden",borderRadius:.7},onClick:s,children:[(0,N.jsxs)(i.Z,{children:[(0,N.jsx)(x.Z,{children:(0,E.get)(t,"title")}),(0,N.jsx)(x.Z,{color:"#B4B4C8",children:(0,L.formatDateTime)((0,E.get)(t,"createdAt"))})]}),r&&"draft"===n&&(0,N.jsxs)(i.Z,{direction:"row",justifyContent:"flex-end",alignItems:"center",spacing:2,children:[(0,N.jsx)(B.Z,{title:d("publish"),children:(0,N.jsx)(_.Z,{variant:"contained",size:"small",onClick:function(e){e.stopPropagation(),m((0,E.get)(t,"id"))},children:d("publish")})}),(0,N.jsx)(B.Z,{title:d("edit"),children:(0,N.jsx)(Y.Z,{children:(0,N.jsx)(H.Z,{onClick:function(e){e.stopPropagation(),f((0,E.get)(t,"id"))}})})}),(0,N.jsx)(B.Z,{title:d("delete"),children:(0,N.jsx)(Y.Z,{children:(0,N.jsx)(U.Z,{onClick:function(e){e.stopPropagation(),p((0,E.get)(t,"id"))}})})})]})]})},$=r(2686),X=r(54700),Q=r(61192),J=r(26908),ee=r(57972),te=r(5851),re=r(40909),ne=(r(30577),r(85777)),oe=r(88204),ie=r(2028),ae=function(e){var t=e.id,r=e.setEditPage,l=e.articleDetailData,s=e.mutate,d=(0,w.vk$)({request:!0}),p=d.data;d.isLoading;console.log("articleDetailData"),console.log(l),console.log((0,E.get)(l,"rawData.product")),console.log(p);var Z=(0,h.Z)().t,v=(0,m.useState)(!1),j=(0,o.Z)(v,2),y=j[0],C=j[1],k=(0,b.Ds)().enqueueSnackbar,S=(0,w.ATX)().data.map((function(e){return{value:e.id,label:Z(e.name)}})),A=(0,w.JAM)(),I=function(e){e(!1),s()},R={title:(0,E.get)(l,"title"),article:(0,E.get)(l,"content"),category:"",tags:(0,E.get)(l,"rawData.:tags").map((function(e){return{label:Z((0,E.get)(e,":tag.name")),value:(0,E.get)(e,":tag.id")}})),video:(0,E.get)(l,"videos").length>0?(0,E.get)(l,"videos")[0]:"",images:(0,E.get)(l,"images"),product:(0,E.get)(l,"rawData.product")},F=ie.object().shape({title:ie.string().required(Z("requiredField",{fieldName:Z("title")})),article:ie.string().required(Z("requiredField",{fieldName:Z("ArticleText")})),images:ie.array().of(ie.string().required(Z("requiredField",{fieldName:Z("image")}))),video:ie.string().required(Z("requiredField",{fieldName:Z("video")})),category:ie.string().required(Z("requiredField",{fieldName:Z("category")})),product:ie.string(),tags:ie.array().of(ie.object().shape({label:ie.string().required(Z("requiredField",{fieldName:Z("label")})),value:ie.string().required(Z("requiredField",{fieldName:Z("value")}))}))}),T=(0,ne.cI)({resolver:(0,oe.X)(F),defaultValues:R}),D=(T.reset,T.watch),L=(T.control,T.setValue),W=T.getValues,B=T.setError,_=T.handleSubmit,z=T.formState;z.errors,z.isSubmitting;console.log("productData.find((element) => element?.id === getValues('product'))?.desc"),console.log(p.find((function(e){return(null===e||void 0===e?void 0:e.id)===W("product")})));var q=function(){var e=(0,u.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==W("title")){e.next=3;break}return k(Z("requiredField",{fieldName:Z("title")}),{variant:"error"}),e.abrupt("return");case 3:if(""!==W("article")){e.next=6;break}return k(Z("requiredField",{fieldName:Z("article")}),{variant:"error"}),e.abrupt("return");case 6:if(0!==W("tags").length){e.next=9;break}return k(Z("requiredField",{fieldName:Z("tags")}),{variant:"error"}),e.abrupt("return");case 9:return e.next=11,(0,w.ODI)(t,{title:W("title"),content:W("article"),images:W("images"),videos:""===W("video")?[]:[W("video")],status:"draft",product:""===W("product")?null:W("product"),tags:null===(n=W("tags"))||void 0===n?void 0:n.map((function(e){return e.value}))});case 11:k(Z("saveSuccess"),{variant:"success"}),I(r);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=(0,u.Z)((0,c.Z)().mark((function e(n){var o;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==W("title")){e.next=3;break}return k(Z("requiredField",{fieldName:Z("title")}),{variant:"error"}),e.abrupt("return");case 3:if(""!==W("article")){e.next=6;break}return k(Z("requiredField",{fieldName:Z("article")}),{variant:"error"}),e.abrupt("return");case 6:if(0!==W("tags").length){e.next=9;break}return k(Z("requiredField",{fieldName:Z("tags")}),{variant:"error"}),e.abrupt("return");case 9:return e.next=11,(0,w.ODI)(t,{title:W("title"),content:W("article"),images:W("images"),videos:""===W("video")?[]:[W("video")],status:"pending",product:""===W("product")?null:W("product"),tags:null===(o=W("tags"))||void 0===o?void 0:o.map((function(e){return e.value}))});case 11:k(Z("submitSuccess"),{variant:"success"}),I(r);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=D(),K=(0,m.useCallback)(function(){var e=(0,u.Z)((0,c.Z)().mark((function e(t){var r,n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C(!0),e.prev=1,r=W("images"),t){e.next=5;break}return e.abrupt("return");case 5:if(0!==t.length){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,Promise.all(t.map(function(){var e=(0,u.Z)((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:n=e.sent,console.log("urls"),console.log(n),L("images",[].concat((0,P.Z)(r),(0,P.Z)(n))),e.next=19;break;case 15:throw e.prev=15,e.t0=e.catch(1),B("video",{type:"manual",message:Z(e.t0.message)}),e.t0;case 19:C(!1);case 20:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),[L,A]),M=(0,m.useCallback)(function(){var e=(0,u.Z)((0,c.Z)().mark((function e(t,r,n){var o,i;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C(!0),e.prev=1,!(o=t[0])){e.next=8;break}return e.next=6,A(o);case 6:i=e.sent,L("video",i);case 8:e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(1),B("video",{type:"manual",message:Z(e.t0.message)}),e.t0;case 14:C(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,r,n){return e.apply(this,arguments)}}(),[L,A]),U=function(){var e=(0,u.Z)((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H={control:function(e,t){return(0,n.Z)((0,n.Z)({},e),{},{height:"53.13px",background:"#3C3C50",borderRadius:5,borderColor:t.isFocused?"yellow":"rgb(74, 78, 95)",boxShadow:(t.isFocused,null),"&:hover":{borderColor:t.isFocused?"yellow":"white"}})},menu:function(e,t){return(0,n.Z)((0,n.Z)({},e),{},{background:"#3C3C50",borderRadius:0,marginTop:0})},option:function(e,t){t.data,t.isDisabled;var r=t.isFocused;t.isSelected;return(0,n.Z)((0,n.Z)({},e),{},{backgroundColor:r?"rgb(48,48,48)":null,color:"white"})},MenuItem:function(e,t){return(0,n.Z)((0,n.Z)({},e),{},{marginTop:0,"&:hover":{backgroundColor:t.isFocused?"yellow":"green"}})},menuList:function(e){return(0,n.Z)((0,n.Z)({},e),{},{padding:0})},placeholder:function(e){return(0,n.Z)((0,n.Z)({},e),{},{color:"yellow"})},multiValue:function(e){return(0,n.Z)((0,n.Z)({},e),{},{borderRadius:100,backgroundColor:"rgb(245,192,66)"})},multiValueLabel:function(e){return(0,n.Z)((0,n.Z)({},e),{},{color:"black"})},multiValueRemove:function(e){return(0,n.Z)((0,n.Z)({},e),{},{color:"black",":hover":{backgroundColor:"black",color:"white"}})},input:function(e){return(0,n.Z)((0,n.Z)({},e),{},{color:"white"})}};return(0,N.jsxs)(a.rg,{sx:{height:"100%"},children:[(0,N.jsxs)(i.Z,{spacing:2,children:[(0,N.jsxs)(i.Z,{spacing:1,direction:"row",children:[(0,N.jsx)(i.Z,{direction:"row",spacing:1,alignItems:"center",justifyContent:"space-between",children:(0,N.jsx)(ee.Z,{justifyContent:"flex-start",onClick:function(){return I(r)}})})," ",(0,N.jsxs)(i.Z,{justifyContent:"space-between",alignItems:"center",flex:1,children:[(0,N.jsx)(x.Z,{variant:"subtitle2",children:Z("editPost")}),"\u3000"]})]}),(0,N.jsx)(i.Z,{children:(0,N.jsxs)(i.Z,{spacing:1,justifyContent:"space-between",children:[(0,N.jsx)(x.Z,{children:Z("posttitle")+" *"}),(0,N.jsx)(J.Z,{sx:{flex:1},value:W("title"),onChange:function(e){return L("title",e.target.value)},size:"large"})]})}),(0,N.jsxs)(i.Z,{spacing:0,children:[(0,N.jsx)(x.Z,{children:Z("ArticleText")+" *"}),(0,N.jsx)(J.Z,{value:W("article"),onChange:function(e){return L("article",e.target.value)},size:"large",multiline:!0,rows:15})]}),(0,N.jsxs)(i.Z,{children:[(0,N.jsx)(x.Z,{children:Z("UploadImage")+" *"}),(0,N.jsx)(te.RV,{methods:T,onSubmit:_(U),children:(0,N.jsx)(te.fT,{showPreview:!0,styles:H,name:"images",accept:"image/*",label:Z("images")+"*",maxSize:10485760,onDrop:K,sx:{my:1},onRemove:function(e){var t,r=null===(t=G.images)||void 0===t?void 0:t.filter((function(t){return t!==e}));L("images",r)},onRemoveAll:function(){L("images",[])},onUpload:function(){return console.log("ON UPLOAD")}})}),(0,N.jsx)(x.Z,{children:Z("UploadVideo")+" *"}),(0,N.jsx)(te.RV,{methods:T,onSubmit:_(U),children:(0,N.jsx)(te.Uo,{showPreview:!0,styles:H,name:"video",accept:"video/*",label:Z("video"),maxSize:10485760,onDrop:M,sx:{my:1},onRemove:function(){L("video","")}})})]}),(0,N.jsxs)(i.Z,{children:[(0,N.jsx)(x.Z,{children:Z("tags")+" *"}),(0,N.jsx)(x.Z,{variant:"body2",sx:{color:"text.secondary"},children:Z("PleaseUseaMaximumOf3")}),(0,N.jsx)(re.ZP,{value:W("tags"),isMulti:!0,styles:H,isClearable:!0,name:"colors",className:"basic-multi-select",classNamePrefix:"select",onChange:function(e){e.length>3?k(Z("maximum of 3 tags"),{variant:"error"}):(console.log("onChange"),console.log(e),L("tags",e))},options:S,placeholder:"   +  "+Z("addtag")})]}),(0,N.jsxs)(i.Z,{children:[(0,N.jsx)(x.Z,{children:Z("productSelection")}),(0,N.jsx)(Q.Z,{fullWidth:!0,children:(0,N.jsx)($.Z,{styles:H,value:W("product"),onChange:function(e){var t,r=null===(t=p.find((function(t){return(null===t||void 0===t?void 0:t.id)===e.target.value})))||void 0===t?void 0:t.id;console.log("setvalue"),console.log(r),L("product",r)},children:p.map((function(e){return(0,N.jsx)(X.Z,{value:null===e||void 0===e?void 0:e.id,children:e.desc},null===e||void 0===e?void 0:e.id)}))})})]})]}),(0,N.jsx)(i.Z,{children:(0,N.jsxs)(g.Z,{sx:{display:"flex",justifyContent:"center",my:5},children:[(0,N.jsx)(f.gp,{onClick:function(){return I(r)},sx:{mr:3},children:Z("cancel")}),(0,N.jsx)(f.gp,{onClick:q,loading:y,sx:{mr:3},children:Z("save")}),(0,N.jsx)(f.sq,{onClick:O,loading:y,type:"submit",children:Z("submit")})]})})]})},le=r(28942),se=r(53944),ce=r(33320),ue=function(e){var t=e.detail,r=(0,I.Z)().user,n=(0,ce.Z)(),a=(0,E.get)(t,"id")===(0,E.get)(r,"id"),l=a?"draft":"",s=m.useState(l),c=(0,o.Z)(s,2),u=c[0],d=c[1],f=(0,w.xYf)({userId:(0,E.get)(t,"rawData.id"),status:u,request:!a}),p=(0,w.ugs)({userId:(0,E.get)(t,"rawData.id"),status:u,request:a}),Z=a?p:f,v=Z.data,j=Z.isLoading,b=Z.mutate,y=Z.totalPage,C=Z.page,k=Z.setPage,S=m.useState(!1),A=(0,o.Z)(S,2),R=A[0],F=A[1],T=m.useState(""),D=(0,o.Z)(T,2),P=D[0],L=D[1],B=(0,w.mtY)({id:P}),_=B.data,z=B.isLoading,q=(0,h.Z)().t;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(le.Z,{open:R,onClose:function(){F(!1)},children:z?(0,N.jsx)(W.Z,{}):(0,N.jsx)(ae,{id:P,setEditPage:F,articleDetailData:_,mutate:b})}),(0,N.jsxs)(i.Z,{spacing:1,children:[a&&(0,N.jsx)(Q.Z,{children:(0,N.jsxs)($.Z,{style:{width:150,alignSelf:"end",height:30,backgroundColor:"rgb(40,40,59)"},value:u,onChange:function(e){d(e.target.value)},children:[(0,N.jsx)(X.Z,{value:"draft",children:q("draft")}),(0,N.jsx)(X.Z,{value:"pending",children:q("pending")}),(0,N.jsx)(X.Z,{value:"published",children:q("published")})]})}),v.length>0?(0,N.jsx)(i.Z,{spacing:1,children:v.map((function(e,t){return(0,N.jsx)(N.Fragment,{children:(0,N.jsx)(V,{item:e,mutate:b,isUserEditable:a,articleType:u,setEditPage:F,setEditPageId:L,handleArticleClose:function(){return function(e,t){"published"!==t&&!1!==a||n("/crm/discover/index",{type:"community",article:e.id})}(e,u)}},e.id)})}))}):j?(0,N.jsx)(i.Z,{alignItems:"center",sx:{py:2},children:(0,N.jsx)(W.Z,{})}):(0,N.jsx)(i.Z,{alignItems:"center",sx:{py:2},children:(0,N.jsx)(x.Z,{children:q("noData")})}),(0,N.jsx)(g.Z,{sx:{display:"flex",justifyContent:"center",pb:2},children:(0,N.jsx)(M.Z,{count:y,shape:"rounded",page:C,onChange:function(e,t){k(t),window.scrollTo({top:0,behavior:"smooth"})}})})]})]})},de=r(56039),ge=r(44946),xe=r(74593),fe=r(25333),he=r(58978),pe=r(1717),me=r(52126),Ze=r(35018),ve=r(25311),je=r(69580),be=(0,m.memo)((function(e){var t=e.item,r=e.getStockColorValue,n=r(0),o=r(1),i=r(-1),a=(0,m.useRef)(null),l=(0,E.get)(t,"currentPrice")-(0,E.get)(t,"startPrice")>0?o:(0,E.get)(t,"currentPrice")==(0,E.get)(t,"startPrice")?n:i;return(0,m.useEffect)((function(){return je.Q.subscribe((function(e){var r=e.response[t.symbol];if(r){var l=r.std;if(l){var s=[0,2,4].includes(t.rawData.cmd)?l.bid:l.ask;a.current.innerHTML=(0,L.currencyFormatorWithDecimal)(s,null,10,!1),a.current.style.color=s-(0,E.get)(t,"startPrice")>0?o:s==(0,E.get)(t,"startPrice")?n:i}}}))}),[t.symbol]),(0,N.jsx)(x.Z,{ref:a,sx:{color:l},children:(0,E.get)(t,"currentPrice")})}),(function(e,t){var r,n;return(null===e||void 0===e||null===(r=e.item)||void 0===r?void 0:r.symbol)===(null===t||void 0===t||null===(n=t.item)||void 0===n?void 0:n.symbol)})),ye=(0,m.memo)((function(e){var t=e.item,r=e.getStockColorValue,n=r(0),o=r(1),a=r(-1),l=(0,m.useRef)(null),s=(0,m.useRef)(null),c=(0,E.get)(t,"profit")>0?o:0==(0,E.get)(t,"profit")?n:a;return(0,m.useEffect)((function(){return je.Q.subscribe((function(e){var r=e.response,i=r[t.symbol];if(console.log("matchItem",i),i){var c=i.std;if(c){var u,d=(0,ve.$)(t.rawData,c.bid,c.ask,i.contractSize,i.currency,null===(u=t.rawData)||void 0===u?void 0:u.accountCurrency,r);l.current.innerHTML=(0,L.currencyFormatorWithDecimal)(d,null,2,!0),l.current.style.color=d>0?o:0==d?n:a,s.current.style.color=d>0?o:0==d?n:a}}}))}),[t.symbol]),(0,N.jsxs)(i.Z,{alignItems:"flex-end",children:[(0,N.jsx)(x.Z,{ref:l,sx:{color:c,fontSize:"16px"},children:(0,L.currencyFormatorWithDecimal)((0,E.get)(t,"profit"),null,2,!0)}),(0,N.jsx)(x.Z,{ref:s,sx:{color:c,fontSize:"10px",mt:-.6},children:(0,E.get)(t,"rawData.accountCurrency",(0,E.get)(t,"currency"))})]})}),(function(e,t){var r,n;return(null===e||void 0===e||null===(r=e.item)||void 0===r?void 0:r.symbol)===(null===t||void 0===t||null===(n=t.item)||void 0===n?void 0:n.symbol)})),we=function(e){var t=e.item,r=e.type,n=(0,h.Z)().t,a=(0,m.useState)(!1),l=(0,o.Z)(a,2),s=l[0],c=l[1],u=(0,Ze.F)({disableSyncService:!0}).getStockColorValue,d="rgb(40, 40, 60)",f="#B4B4C8",p=[{label:"S/L",value:(0,E.isNil)((0,E.get)(t,"stopLossing"))?"-":(0,L.currencyFormator)((0,E.get)(t,"stopLossing"))},{label:n("swap"),value:(0,E.isNil)((0,E.get)(t,"swap"))?"-":(0,L.currencyFormator)((0,E.get)(t,"swap"))},{label:"T/P",value:(0,E.isNil)((0,E.get)(t,"takeProfit"))?"-":(0,L.currencyFormator)((0,E.get)(t,"takeProfit"))},{label:n("taxes"),value:(0,E.isNil)((0,E.get)(t,"taxes"))?"-":(0,L.currencyFormator)((0,E.get)(t,"taxes"))},{label:"ID",value:(0,E.get)(t,"ticket")},{label:n("charges"),value:(0,E.isNil)((0,E.get)(t,"charges"))?"-":(0,L.currencyFormator)((0,E.get)(t,"charges"))}];return(0,N.jsxs)(g.Z,{sx:{backgroundColor:d,borderRadius:.7,overflow:"hidden"},children:[(0,N.jsxs)(i.Z,{direction:"row",sx:{px:1.5,py:1},spacing:1,alignItems:"center",justifyContent:"space-between",children:[(0,N.jsxs)(g.Z,{children:[(0,N.jsxs)(i.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,N.jsx)(xe.Z,{item:t,borderColor:d}),(0,N.jsxs)(x.Z,{color:"#FFB400",children:[(0,E.get)(t,"orderCommand")," ",(0,L.currencyFormator)((0,E.get)(t,"lot"))]})]}),(0,N.jsxs)(i.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,N.jsx)(x.Z,{fontSize:"12px",children:(0,L.currencyFormatorWithDecimal)((0,E.get)(t,"startPrice"),null,10,!1)}),(0,N.jsx)(fe.Z,{sx:{fontSize:12},color:f}),(0,N.jsx)(be,{item:t,getStockColorValue:u})]})]}),(0,N.jsxs)(i.Z,{direction:"row",alignItems:"center",space:2,children:["open"!=r&&(0,N.jsx)(ye,{item:t,getStockColorValue:u}),(0,N.jsx)(g.Z,{animate:{transform:[{rotate:s?"0deg":"180deg"}]},onClick:function(){return c((function(e){return!e}))},children:s?(0,N.jsx)(he.Z,{}):(0,N.jsx)(pe.Z,{})})]})]}),s&&(0,N.jsxs)(g.Z,{children:[(0,N.jsx)(ge.Z,{}),(0,N.jsxs)(g.Z,{sx:{px:1.5,py:1},children:[(0,N.jsx)(i.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:(0,N.jsx)(x.Z,{color:f,children:(0,me.o0)((0,E.get)(t,"createdAt"))})}),(0,N.jsx)(i.Z,{spacing:1,children:(0,E.chunk)(p,2).map((function(e,t){return(0,N.jsx)(i.Z,{direction:"row",alignItems:"center",spacing:3,children:e.map((function(e,t){return(0,N.jsxs)(i.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",flex:1,children:[(0,N.jsx)(x.Z,{color:f,children:(0,E.get)(e,"label")}),(0,N.jsx)(x.Z,{children:(0,E.get)(e,"value")})]},t)}))},t)}))})]})]})]})},Ce=function(e){var t=e.detail,r=(e.request,(0,w.IEK)({login:(0,E.get)(t,"rawData.:signalAccount.login")})),n=r.data,o=(r.mutate,r.isValidating,r.isLoading),a=r.page,l=r.setPage,s=r.totalPage,c=(0,h.Z)().t;return(0,N.jsxs)(i.Z,{spacing:1,children:[n.length>0?(0,N.jsx)(i.Z,{spacing:1,children:n.map((function(e){return(0,N.jsx)(we,{item:e,type:"closed"},e.id)}))}):o?(0,N.jsx)(i.Z,{alignItems:"center",sx:{py:2},children:(0,N.jsx)(W.Z,{})}):(0,N.jsx)(i.Z,{alignItems:"center",sx:{py:2},children:(0,N.jsx)(x.Z,{children:c("noData")})}),(0,N.jsx)(g.Z,{sx:{display:"flex",justifyContent:"center",pb:2},children:(0,N.jsx)(M.Z,{count:s,shape:"rounded",page:a,onChange:function(e,t){l(t),window.scrollTo({top:0,behavior:"smooth"})}})})]})},ke=(r(60950),r(72917)),Ne=r(37347),Se=function(e){return(0,L.currencyFormator)(Math.abs(e),"$")},Ae=function(e){var t=e.data,r=e.formatter,n=e.label,o=(0,h.Z)(),i=o.currentLang,a=(o.t,(0,m.useRef)()),l=[{name:n||"value",data:t}],s=r||Se,c={chart:{height:350,type:"area",locales:[ke,Ne],defaultLocale:"zh-CN"===i.backendValue?"zh-cn":"en",toolbar:{show:!1,tools:{download:!0,selection:!1,zoom:!1,zoomin:!1,zoomout:!1,pan:!1,reset:!1}}},stroke:{show:!0,width:2,curve:"smooth"},colors:["#34d399"],dataLabels:{enabled:!1,enabledOnSeries:[2],formatter:s,background:{enabled:!1},offsetY:-8,style:{}},xaxis:{labels:{style:{colors:"#B4B4C8",fontSize:"10px"}}},yaxis:[{labels:{formatter:s,style:{colors:"#B4B4C8",fontSize:"10px"}},min:0}],grid:{borderColor:"rgba(180, 180, 200,0.2)"}};return(0,N.jsx)(A.Z,{ref:a,options:c,series:l,type:"area",height:"300",width:"100%"})},Ie=function(e){var t=e.detail,r=(0,h.Z)().t,n=(0,m.useState)("day"),a=(0,o.Z)(n,2),l=a[0],s=a[1],c=(0,w.xzY)({id:(0,E.get)(t,"id"),type:l}),u=c.data,d=c.isLoading;console.log(u);var g=[{name:r("day"),value:"day"},{name:r("week"),value:"week"},{name:r("month"),value:"month"}];return(0,N.jsxs)(i.Z,{sx:{px:2,py:1,borderRadius:1,overflow:"hidden",backgroundColor:"rgb(40, 40, 60)"},children:[(0,N.jsx)(i.Z,{children:(0,N.jsx)(x.Z,{variant:"subtitle1",fontWeight:"500",children:r("followerTrends")})}),d?(0,N.jsx)(i.Z,{flex:1,alignItems:"center",justifyContent:"center",sx:{minHeight:315},children:(0,N.jsx)(W.Z,{})}):(0,N.jsx)(Ae,{data:u.map((function(e){return e.data})),formatter:function(e){return(0,L.currencyFormator)(e)},label:r("follower")}),(0,N.jsx)(i.Z,{alignItems:"center",justifyContent:"center",sx:{pb:1},children:(0,N.jsx)(f.pn,{btns:g,onChange:function(e,t){s(e)}})})]})},Re=function(e){var t=e.detail;(0,R.p)();return(0,N.jsx)(i.Z,{sx:{px:0},children:(0,N.jsx)(Ie,{detail:t})})},Fe=function(e){var t=e.detail,r=(0,w.mxK)({type:"positions",pageSize:10,trader:(0,E.get)(t,"id"),login:(0,E.get)(t,"rawData.:signalAccount.login")}),n=r.data,o=(r.mutate,r.isValidating,r.isLoading),a=(r.page,r.setPage,r.totalPage,(0,h.Z)().t);return(0,de.b)((0,E.uniq)(n.map((function(e){return e.symbol})))),(0,N.jsx)(i.Z,{spacing:1,children:n.length>0?(0,N.jsx)(i.Z,{spacing:1,children:n.map((function(e){return(0,N.jsx)(we,{item:e,type:"positions"},e.id)}))}):o?(0,N.jsx)(i.Z,{alignItems:"center",sx:{py:2},children:(0,N.jsx)(W.Z,{})}):(0,N.jsx)(i.Z,{alignItems:"center",sx:{py:2},children:(0,N.jsx)(x.Z,{children:a("noData")})})})},Te=function(e){var t=e.detail,r=(0,h.Z)().t,n=(0,m.useState)("day"),a=(0,o.Z)(n,2),l=a[0],s=a[1],c=(0,w.x9L)({id:(0,E.get)(t,"id"),type:l}),u=c.data,d=c.isLoading,g=[{name:r("day"),value:"day"},{name:r("week"),value:"week"},{name:r("month"),value:"month"}];return(0,N.jsx)(i.Z,{sx:{px:2,py:1,borderRadius:1,overflow:"hidden",backgroundColor:"rgb(40, 40, 60)"},children:(0,N.jsxs)(i.Z,{children:[(0,N.jsx)(x.Z,{variant:"subtitle1",fontWeight:"500",children:r("balanceTrends")}),d?(0,N.jsx)(i.Z,{flex:1,alignItems:"center",justifyContent:"center",sx:{minHeight:315},children:(0,N.jsx)(W.Z,{})}):(0,N.jsx)(Ae,{data:u.map((function(e){return e.data})),label:r("balance")}),(0,N.jsx)(i.Z,{alignItems:"center",justifyContent:"center",sx:{pb:1},children:(0,N.jsx)(f.pn,{btns:g,onChange:function(e,t){s(e)}})})]})})},De=r(59315),Pe=r(12411),Le=r(13013),We=function(e){var t=e.selectedAccountDetail,r=(0,h.Z)().t;console.log(t.list);var n=["euqity","margin","availableMargin","marginLevel"],o=(0,m.useRef)(t.list.filter((function(e){return!n.includes(e.key)})).map((function(e){return(0,m.createRef)(e.value)})));return(0,m.useEffect)((function(){return De.useForexAccountsTickStore.subscribe((function(e){if(Boolean((0,E.get)(e.realTimeAccounts,"".concat(t.login))||t.rawData)){var r,i=(0,Le.getList)((0,E.get)(e.realTimeAccounts,"".concat(t.login))||t.rawData).filter((function(e){return!n.includes(e.key)}));null===(r=o.current)||void 0===r||r.map((function(e,t){e.current.innerHTML=i[t].value}))}}))}),[t,t.login]),(0,Pe.useForexAccountTick)({logins:t.isLiquidation?[]:[t.login]}),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(i.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,N.jsx)(x.Z,{sx:{color:"#B4B4C8"},children:r("leverage")}),(0,N.jsx)(x.Z,{sx:{color:"#B4B4C8"},children:(0,E.get)(t,"leverage")})]}),t.list.filter((function(e){return!n.includes(e.key)})).map((function(e,t){var n;return(0,N.jsxs)(i.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,N.jsx)(x.Z,{sx:{color:"#B4B4C8"},children:r((0,E.get)(e,"key"))}),(0,N.jsx)(x.Z,{sx:{color:"#B4B4C8"},ref:null===o||void 0===o||null===(n=o.current)||void 0===n?void 0:n[t],children:e.value||"-/-"})]},e.lebel)}))]})},Be=function(e){var t=e.detail,r=(0,h.Z)().t,n=(0,Ze.F)({disableSyncService:!0}),o=n.stockUpColor,a=n.stockDownColor,l=function(e){return e>0?o:e<0?a:"#ffffff"},s=[{label:r("return52W"),value:(0,E.isNil)((0,E.get)(t,"return52W"))?"-/-":(0,E.get)(t,"return52W")+"%",color:o},{label:r("maxDD52W"),value:(0,E.isNil)((0,E.get)(t,"maxDD52W"))?"-/-":(0,E.get)(t,"maxDD52W")+"%",color:a},{label:r("totalProfit"),value:"".concat((0,L.currencyFormator)((0,E.get)(t,"totalProfit"),"$")),color:l((0,E.get)(t,"totalProfit"))},{label:r("follower"),value:(0,L.KFormator)((0,E.get)(t,"copiers"))},{label:r("WEEKLY_RETURN_RANKING"),value:(0,E.isNil)((0,E.get)(t,"returnWeek"))?"-/-":"".concat((0,L.currencyFormator)((0,E.get)(t,"returnWeek"),"$")),color:l((0,E.get)(t,"returnWeek"))},{label:r("MONTHLY_RETURN_RANKING"),value:(0,E.isNil)((0,E.get)(t,"returnMonth"))?"-/-":"".concat((0,L.currencyFormator)((0,E.get)(t,"returnMonth"),"$")),color:l((0,E.get)(t,"returnMonth"))},{label:r("HALF_YEAR_RETURN_RANKING"),value:(0,E.isNil)((0,E.get)(t,"returnHalfYear"))?"-/-":"$".concat((0,L.currencyFormator)((0,E.get)(t,"returnHalfYear"))),color:l((0,E.get)(t,"returnHalfYear"))},{label:r("ABSOLUTE_GAIN_RANKING"),value:(0,E.isNil)((0,E.get)(t,"absoluteGain"))?"-/-":"".concat((0,L.currencyFormator)((0,E.get)(t,"absoluteGain"),"$")),color:l((0,E.get)(t,"absoluteGain"))},{label:r("TOTAL_RETURN_RANKING"),value:(0,E.isNil)((0,E.get)(t,"returnTotal"))?"-/-":"".concat((0,L.currencyFormator)((0,E.get)(t,"returnTotal"),"$")),color:l((0,E.get)(t,"returnTotal"))},{label:r("MAX_PROFIT_RANKING"),value:(0,E.isNil)((0,E.get)(t,"maxProfit"))?"-/-":"".concat((0,L.currencyFormator)((0,E.get)(t,"maxProfit"),"$")),color:l((0,E.get)(t,"maxProfit"))}],c=(0,E.get)(t,"rawData.:signalAccount")?(0,Le.processForexAccountList)((0,E.get)(t,"rawData.:signalAccount")):null;return(0,N.jsxs)(i.Z,{spacing:1,children:[(0,N.jsx)(i.Z,{sx:{px:2,py:1,borderRadius:1,overflow:"hidden",backgroundColor:"rgb(40, 40, 60)"},spacing:1,children:c?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(x.Z,{variant:"subtitle1",fontWeight:"500",children:r("signalAccountDetail")}),(0,N.jsx)(We,{selectedAccountDetail:c})]}):(0,N.jsx)(x.Z,{children:r("noSignalAccount")})}),(0,N.jsx)(i.Z,{sx:{px:2,py:1,borderRadius:1,overflow:"hidden",backgroundColor:"rgb(40, 40, 60)"},spacing:1,children:(0,E.chunk)(s,5).map((function(e,t){return(0,N.jsx)(i.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:e.map((function(e,t){return(0,N.jsxs)(i.Z,{flex:1,alignItems:"center",children:[(0,N.jsx)(x.Z,{color:e.color,fontSize:"14px",fontWeight:"bold",children:e.value}),(0,N.jsx)(x.Z,{color:"#B4B4C8",fontSize:"12px",children:e.label})]},t)}))},t)}))}),(0,N.jsx)(Te,{detail:t})]})},_e=function(e){var t=e.detail,r=e.onClose,a=e.onRefresh,l=void 0===a?function(){}:a,s=(0,m.useState)(!1),d=(0,o.Z)(s,2),p=d[0],Z=d[1],v=(0,m.useState)(null),j=(0,o.Z)(v,2),y=j[0],C=j[1],k=(0,m.useState)({}),S=(0,o.Z)(k,2),A=S[0],I=S[1],R=(0,h.Z)().t,F=(0,w._pY)().data,T=(0,b.Ds)().enqueueSnackbar,D=F.filter((function(e){return e.copiedAccount===(0,E.get)(t,"signalAccount")})).map((function(e){return(0,n.Z)((0,n.Z)({},e),{},{label:"".concat(e.currency," Account ").concat(e.login),value:e.id})})),P=function(){var e=(0,u.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Z(!0),C(!1),e.next=5,(0,w.uz6)({copyTradeAccount:A.account});case 5:r(),T(R("unfollowSuccess"),{variant:"success"}),l(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),T(R("unfollowFailed"),{variant:"error"}),C(R((0,O.getErrorMessage)(e.t0)));case 14:return e.prev=14,Z(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,10,14,17]])})));return function(){return e.apply(this,arguments)}}(),L=(0,E.isNil)(A.account);return(0,N.jsxs)(i.Z,{sx:{width:600,mx:"auto"},spacing:2,children:[(0,N.jsx)(x.Z,{textAlign:"center",children:R("unfollowTrader")}),(0,N.jsx)(i.Z,{children:(0,N.jsxs)(q.dz,{values:A,setValues:I,children:[(0,N.jsx)(q.Nz,{field:"account",options:D,placeholder:R("followedAccountsOfCurrentSignal")+"*",sx:{width:"100%",my:1}}),y&&(0,N.jsx)(g.Z,{children:(0,N.jsx)(x.Z,{textAlign:"center",color:"red",children:y})})]})}),(0,N.jsxs)(i.Z,{alignItems:"center",direction:"row",justifyContent:"center",spacing:2,children:[(0,N.jsx)(f.Ns,{sx:{mr:3},onClick:r,children:R("cancel")}),(0,N.jsx)(f.sq,{loading:p,disabled:L,onClick:P,children:R("unfollow")})]})]})},ze=(0,m.memo)((function(e){var t=e.open,r=e.onClose,n=e.detail,o=e.onRefresh;return(0,N.jsx)(q.ZP,{defaultBtn:!1,fullWidth:!0,maxWidth:"md",open:t,onClose:r,children:t&&(0,N.jsx)(_e,{detail:n,onClose:r,onRefresh:o})})})),Ee=r(94063),qe=function(e){var t,r=e.id,n=(0,h.Z)().t,a=(0,F.useSearchParams)(),l=(0,o.Z)(a,1)[0].get("tab"),s=(0,m.useState)(l||"summary"),c=(0,o.Z)(s,2),u=c[0],d=c[1],g=(0,w.WCD)({id:r}),p=g.data,Z=g.isLoading,v=g.mutate,j=(0,w.EEy)().data,b=(0,m.useState)(!1),y=(0,o.Z)(b,2),C=y[0],k=y[1],S=(0,m.useState)(!1),A=(0,o.Z)(S,2),R=A[0],T=A[1],D=(0,I.Z)().user,q=[{name:n("summary"),value:"summary",component:Be}].concat((0,P.Z)((0,E.get)(p,"isFollow")?[{name:n("pendingOrderTrade"),value:"pendingOrder",component:Fe}]:[]),[{name:n("closedOrder"),value:"closedOrder",component:Ce},{name:n("followers"),value:"followers",component:Re},{name:n("tradeArticles"),value:"tradeArticles",component:ue}]),O=null===(t=(0,E.find)(q,(function(e){return e.value===u})))||void 0===t?void 0:t.component,G=((0,E.get)(p,"followInfo")||[]).length;return(0,N.jsx)(i.Z,{sx:{maxWidth:800},children:Z?(0,N.jsx)(i.Z,{alignItems:"center",children:(0,N.jsx)(W.Z,{})}):(0,E.isNil)((0,E.get)(p,"signalAccount"))?(0,N.jsx)(i.Z,{children:(0,N.jsx)(x.Z,{children:n("traderNotAvailable")})}):(0,N.jsxs)(i.Z,{spacing:1,children:[(0,N.jsxs)(i.Z,{children:[(0,N.jsxs)(i.Z,{direction:"row",alignItems:"stretch",spacing:2,children:[(0,E.get)(p,"avatar")?(0,N.jsx)(z.Z,{src:(0,E.get)(p,"avatar"),sx:{width:80,height:80,borderRadius:1,overflow:"hidden"}}):(0,N.jsx)(i.Z,{sx:{width:80,height:80,borderRadius:1,overflow:"hidden",backgroundColor:"rgb(40, 40, 60)",fontSize:24,fontWeight:"600"},alignItems:"center",justifyContent:"center",children:(0,E.get)(p,"shortName")}),(0,N.jsxs)(i.Z,{flex:1,justifyContent:"space-between",children:[(0,N.jsx)(x.Z,{fontWeight:"bold",fontSize:24,children:(0,E.get)(p,"rawData.:signalAccountRequest.nickname")||(0,E.get)(p,"name")}),(0,N.jsxs)(i.Z,{children:[(0,N.jsxs)(i.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,N.jsxs)(x.Z,{children:[n("traderLevel"),": ",n("".concat((0,E.get)(p,"traderLevel.name"),"Level"))]}),(0,N.jsx)(B.Z,{title:(0,N.jsx)("span",{style:{whiteSpace:"pre-line"},children:n("traderLevelTips",{platformPercentage:(0,L.percentageFormator)((0,E.get)(j,"sunLineCommissionRate")),topLevelTraderShare:(0,L.percentageFormator)((0,E.get)(j,"topLevel.traderCommissionRate",0)),topLevelClientShare:(0,L.percentageFormator)((0,E.get)(j,"topLevel.clientCommissionRate",0)),superLevelTraderShare:(0,L.percentageFormator)((0,E.get)(j,"superLevel.traderCommissionRate",0)),superLevelClientShare:(0,L.percentageFormator)((0,E.get)(j,"superLevel.clientCommissionRate",0)),highLevelTraderShare:(0,L.percentageFormator)((0,E.get)(j,"highLevel.traderCommissionRate",0)),highLevelClientShare:(0,L.percentageFormator)((0,E.get)(j,"highLevel.clientCommissionRate",0)),generalLevelTraderShare:(0,L.percentageFormator)((0,E.get)(j,"generalLevel.traderCommissionRate",0)),generalLevelClientShare:(0,L.percentageFormator)((0,E.get)(j,"generalLevel.clientCommissionRate",0))})}),placement:"top",children:(0,N.jsx)(Ee.Z,{sx:{fontSize:16,ml:1}})})]}),(0,N.jsxs)(i.Z,{direction:"row",spacing:2,children:[(0,N.jsxs)(x.Z,{children:[(0,L.KFormator)((0,E.get)(p,"copiers"))," ",n("follower")]}),(0,N.jsxs)(x.Z,{children:[(0,L.KFormator)((0,E.get)(p,"tradeArticles"))," ",n("tradeArticles")]})]})]})]})]}),(0,N.jsx)(x.Z,{mt:1,fontSize:"12px",color:"#B4B4C8",children:(0,E.get)(p,"desc")}),(null===D||void 0===D?void 0:D.id)!==(0,E.get)(p,"id")&&(0,N.jsxs)(i.Z,{direction:"row",spacing:1,sx:{pt:1},alignItems:"center",children:[(0,N.jsx)(_.Z,{sx:{flex:1},variant:"contained",size:"small",onClick:function(){k(!0),T(!1)},children:n("follow")+((0,E.get)(p,"isFollow")?" (".concat(G,")"):"")}),(0,E.get)(p,"isFollow")&&(0,N.jsx)(_.Z,{variant:"outlined",size:"small",onClick:function(){k(!1),T(!0)},sx:{flex:1,borderColor:"#B4B4C8",color:"#B4B4C8",":hover":{borderColor:"#B4B4C8"}},children:n("unfollow")})]})]}),(0,N.jsx)(f.pn,{btns:q,onChange:function(e,t){d(e)},initIndex:(0,E.findIndex)(q,(function(e){return e.value==u}))}),O&&(0,N.jsx)(i.Z,{children:(0,N.jsx)(O,{detail:p})}),(0,N.jsx)(K,{detail:p,open:C,onClose:function(){return k(!1)},onRefresh:v}),(0,N.jsx)(ze,{detail:p,open:R,onClose:function(){return T(!1)},onRefresh:v})]})})},Oe=r(15916),Ge=r(24572),Ke=(r(56770),r(99748)),Me=r(50446),Ue=r(24528),He=function(e){var t,r,n=e.item,a=e.sort,l=(0,h.Z)().t,s=(0,Ze.F)({disableSyncService:!0}),c=s.stockUpColor,u=s.stockDownColor,d=function(e){return e>0?c:e<0?u:"#ffffff"},g=(0,m.useState)(!1),f=(0,o.Z)(g,2),p=f[0],Z=f[1],v=n.isFollow,j=(0,ce.Z)(),b={TOTAL_PROFIT_RANKING:{text:(0,E.isNil)((0,E.get)(n,"totalProfit"))?"-/-":"".concat((0,L.currencyFormatorOfficial)((0,E.get)(n,"totalProfit"),"$",!0)),color:d((0,E.get)(n,"totalProfit"))},YEARLY_RETURN:{text:(0,E.isNil)((0,E.get)(n,"return52W"))?"-/-":(0,E.get)(n,"return52W")+"%",color:c},MAX_DRAWDOWN:{text:(0,E.isNil)((0,E.get)(n,"maxDD52W"))?"-/-":(0,E.get)(n,"maxDD52W")+"%",color:u},WEEKLY_RETURN_RANKING:{text:(0,E.isNil)((0,E.get)(n,"returnWeek"))?"-/-":"".concat((0,L.currencyFormatorOfficial)((0,E.get)(n,"returnWeek"),"$",!0)),color:d((0,E.get)(n,"returnWeek"))},MONTHLY_RETURN_RANKING:{text:(0,E.isNil)((0,E.get)(n,"returnMonth"))?"-/-":"".concat((0,L.currencyFormatorOfficial)((0,E.get)(n,"returnMonth"),"$",!0)),color:d((0,E.get)(n,"returnMonth"))},ABSOLUTE_GAIN_RANKING:{text:(0,E.isNil)((0,E.get)(n,"absoluteGain"))?"-/-":"".concat((0,L.currencyFormatorOfficial)((0,E.get)(n,"absoluteGain"),"",!0)),color:d((0,E.get)(n,"absoluteGain"))},HALF_YEAR_RETURN_RANKING:{text:(0,E.isNil)((0,E.get)(n,"returnHalfYear"))?"-/-":"".concat((0,L.currencyFormatorOfficial)((0,E.get)(n,"returnHalfYear"),"$",!0)),color:d((0,E.get)(n,"returnHalfYear"))},TOTAL_RETURN_RANKING:{text:(0,E.isNil)((0,E.get)(n,"returnTotal"))?"-/-":"".concat((0,L.currencyFormatorOfficial)((0,E.get)(n,"returnTotal"),"$",!0)),color:d((0,E.get)(n,"returnTotal"))},MAX_PROFIT_RANKING:{text:(0,E.isNil)((0,E.get)(n,"maxProfit"))?"-/-":"".concat((0,L.currencyFormatorOfficial)((0,E.get)(n,"maxProfit"),"$",!0)),color:d((0,E.get)(n,"maxProfit"))}},y=[{label:l("return52W"),value:(0,E.isNil)((0,E.get)(n,"return52W"))?"-/-":(0,E.get)(n,"return52W")+"%",color:c},{label:l("maxDD52W"),value:(0,E.isNil)((0,E.get)(n,"maxDD52W"))?"-/-":(0,E.get)(n,"maxDD52W")+"%",color:u},{label:l("totalProfit"),value:"".concat((0,L.currencyFormator)((0,E.get)(n,"totalProfit"),"$")),color:d((0,E.get)(n,"totalProfit"))},{label:l("follower"),value:(0,L.KFormator)((0,E.get)(n,"copiers"))},{label:l("WEEKLY_RETURN_RANKING"),value:(0,E.isNil)((0,E.get)(n,"returnWeek"))?"-/-":"".concat((0,L.currencyFormator)((0,E.get)(n,"returnWeek"),"$")),color:d((0,E.get)(n,"returnWeek"))},{label:l("MONTHLY_RETURN_RANKING"),value:(0,E.isNil)((0,E.get)(n,"returnMonth"))?"-/-":"".concat((0,L.currencyFormator)((0,E.get)(n,"returnMonth"),"$")),color:d((0,E.get)(n,"returnMonth"))},{label:l("HALF_YEAR_RETURN_RANKING"),value:(0,E.isNil)((0,E.get)(n,"returnHalfYear"))?"-/-":"$".concat((0,L.currencyFormator)((0,E.get)(n,"returnHalfYear"))),color:d((0,E.get)(n,"returnHalfYear"))},{label:l("ABSOLUTE_GAIN_RANKING"),value:(0,E.isNil)((0,E.get)(n,"absoluteGain"))?"-/-":"".concat((0,L.currencyFormator)((0,E.get)(n,"absoluteGain"),"")),color:d((0,E.get)(n,"absoluteGain"))},{label:l("TOTAL_RETURN_RANKING"),value:(0,E.isNil)((0,E.get)(n,"returnTotal"))?"-/-":"".concat((0,L.currencyFormator)((0,E.get)(n,"returnTotal"),"$")),color:d((0,E.get)(n,"returnTotal"))},{label:l("MAX_PROFIT_RANKING"),value:(0,E.isNil)((0,E.get)(n,"maxProfit"))?"-/-":"".concat((0,L.currencyFormator)((0,E.get)(n,"maxProfit"),"$")),color:d((0,E.get)(n,"maxProfit"))}];return(0,N.jsxs)(i.Z,{onClick:function(){j(se.cR.menu.forex,{tradeLead:1,tradeLeaderId:null===n||void 0===n?void 0:n.id})},sx:(0,Ge.Z)({backgroundColor:"",borderRadius:.7,overflow:"hidden"},"backgroundColor","rgb(40, 40, 60)"),children:[(0,N.jsxs)(i.Z,{direction:"row",sx:{px:2,py:1},alignItems:"center",justifyContent:"space-between",children:[(0,N.jsxs)(i.Z,{direction:"row",spacing:2,alignItems:"center",children:[(0,N.jsx)(i.Z,{alignItems:"center",justifyContent:"center",height:36,width:36,rounded:"md",overflow:"hidden",children:(0,E.get)(n,"avatar")?(0,N.jsx)(z.Z,{src:(0,E.get)(n,"avatar"),sx:{width:"100%",height:"100%",borderRadius:1,overflow:"hidden"}}):(0,N.jsx)(i.Z,{sx:{width:"100%",height:"100%",borderRadius:1,overflow:"hidden",backgroundColor:"#141428",fontWeight:"600"},alignItems:"center",justifyContent:"center",children:(0,E.get)(n,"shortName")})}),(0,N.jsx)(x.Z,{fontWeight:"bold",children:(0,E.get)(n,"rawData.:signalAccountRequest.nickname")||(0,E.get)(n,"name")})]}),(0,N.jsxs)(i.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,N.jsx)(x.Z,{sx:{color:(null===(t=b[a])||void 0===t?void 0:t.color)||"white",fontWeight:"600",fontSize:"24px"},textAlign:"right",children:null===(r=b[a])||void 0===r?void 0:r.text}),(0,N.jsx)(i.Z,{minWidth:"150px",direction:"row",justifyContent:"flex-end",children:(0,N.jsxs)(i.Z,{alignItems:"center",space:-1,children:[(0,N.jsx)(x.Z,{fontSize:"14px",fontWeight:"bold",children:(0,L.KFormator)((0,E.get)(n,"copiers"))}),(0,N.jsx)(x.Z,{color:"#B4B4C8",fontSize:"12px",children:l("follower")})]})}),(0,N.jsxs)(i.Z,{alignItems:"center",space:-1,children:[(0,N.jsx)(x.Z,{fontSize:"14px",fontWeight:"bold",children:(0,L.KFormator)((0,E.get)(n,"equity"))}),(0,N.jsx)(x.Z,{color:"#B4B4C8",fontSize:"12px",children:l("equity")})]}),v?(0,N.jsx)(Me.Z,{sx:{color:"rgb(255,197,0)"}}):(0,N.jsx)(i.Z,{sx:{opacity:0},children:(0,N.jsx)(Me.Z,{sx:{color:"#B4B4C8"}})}),(0,N.jsx)(Ue.Z,{sx:{color:"#B4B4C8",cursor:"pointer",transform:"rotate(".concat(p?180:0,"deg)"),transition:"ease-in-out",transitionDuration:"0.2s"},fontSize:"large",onClick:function(e){e.stopPropagation(),Z((function(e){return!e}))}})]})]}),(0,N.jsx)(Ke.Z,{in:p,children:(0,N.jsxs)(i.Z,{children:[(0,N.jsx)(ge.Z,{}),(0,N.jsx)(i.Z,{sx:{px:2,py:1},children:(0,E.chunk)(y,5).map((function(e,t){return(0,N.jsx)(i.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:e.map((function(e,t){return(0,N.jsxs)(i.Z,{flex:1,alignItems:"center",children:[(0,N.jsx)(x.Z,{color:e.color,fontSize:"14px",fontWeight:"bold",children:e.value}),(0,N.jsx)(x.Z,{color:"#B4B4C8",fontSize:"12px",children:e.label})]},t)}))},t)}))})]})})]})},Ye=r(31652),Ve=function(e){var t=(0,h.Z)().t,r=(0,m.useState)("ABSOLUTE_GAIN_RANKING"),n=(0,o.Z)(r,2),a=n[0],l=n[1],s=(0,w.Bzj)().data,c=(0,m.useState)(""),u=(0,o.Z)(c,2),d=(u[0],u[1],(0,w.lMo)({sort:a})),f=d.data,p=d.page,Z=d.setPage,v=d.totalPage,j=d.isLoading,b=s,y=(0,m.useState)(null),C=(0,o.Z)(y,2),k=C[0],S=C[1],A=Boolean(k);return(0,N.jsxs)(i.Z,{sx:{width:{md:800,sm:300}},spacing:1,children:[(0,N.jsxs)(i.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:1,children:[(0,N.jsxs)(i.Z,{alignItem:"center",position:"relative",direction:"row",flex:1,children:[(0,N.jsxs)(i.Z,{position:"absolute",right:0,direction:"row",alignItems:"center",spacing:.5,sx:{color:"#B4B4C8"},children:[(0,N.jsx)(x.Z,{children:t("orderBy")}),(0,N.jsxs)(i.Z,{direction:"row",alignItems:"center",onClick:function(e){S(e.currentTarget)},sx:{cursor:"pointer",color:"rgb(255,197,0)"},children:[(0,N.jsx)(x.Z,{children:t(a)}),(0,N.jsx)(Ue.Z,{sx:{color:"rgb(255,197,0)"}})]})]}),(0,N.jsx)(x.Z,{textAlign:"center",flex:1,fontSize:"18px",fontWeight:500,children:t("tradeLeaderBoard")})]}),(0,N.jsx)(Oe.Z,{id:"basic-menu",anchorEl:k,open:A,onClose:function(){S(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:b.map((function(e){return(0,N.jsxs)(X.Z,{onClick:function(){return t=e.value,S(null),void l(t);var t},children:[e.value===a?(0,N.jsx)(Ye.Z,{fontSize:"small",sx:{color:"rgb(255,197,0)",width:"30px"}}):(0,N.jsx)(g.Z,{sx:{width:"30px"}}),(0,N.jsx)(x.Z,{sx:{color:e.value===a?"rgb(255,197,0)":"#B4B4C8"},children:e.label})]},e.value)}))})]}),(0,N.jsxs)(i.Z,{spacing:1,children:[j?(0,N.jsx)(i.Z,{sx:{py:1,height:30},alignItems:"center",justifyContent:"center",children:(0,N.jsx)(W.Z,{size:24})}):f.map((function(e,t){return(0,N.jsx)(He,{item:e,sort:a},e.id)})),(0,N.jsx)(g.Z,{sx:{display:"flex",justifyContent:"center",pb:2},children:(0,N.jsx)(M.Z,{count:v,shape:"rounded",page:p,onChange:function(e,t){Z(t),window.scrollTo({top:0,behavior:"smooth"})}})})]})]})},$e=function(e){var t=(0,F.useSearchParams)(),r=(0,o.Z)(t,1)[0].get("tradeLeaderId");return(0,N.jsx)(i.Z,{direction:"row",sx:{mt:1},spacing:2,children:r?(0,N.jsx)(i.Z,{sx:{flex:1},children:(0,N.jsx)(qe,{id:r})}):(0,N.jsx)(Ve,{})})};function Xe(){var e=(0,R.p)(),t=(0,F.useSearchParams)(),r=(0,o.Z)(t,1)[0],a=((0,I.Z)().user,r.get("id")),c=r.get("login"),u=r.get("subType"),d=r.get("tradeLead"),g=!(0,E.isNil)(d);return(0,N.jsxs)(i.Z,{direction:"row",sx:{height:"100%",flexDirection:{xs:"column",md:"row"}},children:[(0,N.jsx)(i.Z,{spacing:1,sx:{width:375,height:"100%"},children:(0,N.jsx)(l.Z,(0,n.Z)((0,n.Z)({},e),{},{params:{login:Number(c)},children:(0,N.jsx)(s.Z,{sx:{}})}))}),(0,N.jsx)(i.Z,{spacing:1,sx:{ml:2,flexGrow:1,height:"100%"},children:g?(0,N.jsx)($e,{}):a?(0,N.jsx)(S,{accountId:a,login:c,subType:u}):(0,N.jsx)(T,{})})]})}}}]);