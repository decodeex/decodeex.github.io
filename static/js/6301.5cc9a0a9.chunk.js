"use strict";(self.webpackChunk_decode_crm_client=self.webpackChunk_decode_crm_client||[]).push([[6301],{66301:function(e,n,s){s.r(n),s.d(n,{default:function(){return _}});var t=s(2211),r=s(12130),o=s(99317),a=s(11001),c=s(74715),i=s(35787),l=s(92680),u=s(24190),d=s(2458),p=s(26521),x=s(24786),h=s(64505),f=(s(81452),s(88658)),Z=s(56383),g=s(31530),m=s(34337),v=s(49105),j=s(95984),k=s(28418),b=s(64965),w=s(45927),C=s(79418),A=s(98845);function S(e){var n=e.accountId,s=e.login,o=(0,f.Z)().t,c=(0,g.useState)(null),i=(0,r.Z)(c,2),v=i[0],S=i[1],y=(0,g.useState)(!1),I=(0,r.Z)(y,2),P=I[0],T=I[1],_=(0,g.useState)(!1),D=(0,r.Z)(_,2),O=D[0],q=D[1],z=(0,g.useState)(!1),H=(0,r.Z)(z,2),V=H[0],B=H[1],E=(0,g.useState)(!0),F=(0,r.Z)(E,2),G=F[0],N=F[1],R=(0,k.Ds)().enqueueSnackbar,X=(0,g.useRef)(null),J=(0,g.useState)("positions"),K=(0,r.Z)(J,2),L=K[0],M=K[1],Q=function(){S(null)},U=Boolean(v),W=U?"simple-popover":void 0,Y=[{name:o("forexPendingOrder"),value:"positions"},{name:o("forexOpenOrder"),value:"open"},{name:o("closedTrades"),value:"closedTrades"},{name:o("tradeTransactions"),value:"transactions"}],$=function(){var e=(0,u.Z)((0,l.Z)().mark((function e(n){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"positions"!==L){e.next=11;break}return q(!0),Q(),e.next=6,(0,w.zX)((0,t.Z)({login:s},n?{password:n}:{}));case 6:q(!1),R(o("updateSuccess"),{variant:"success"}),X.current.resetValue(),e.next=18;break;case 11:return q(!0),Q(),e.next=15,(0,w.Hd)((0,t.Z)({login:s},n?{password:n}:{}));case 15:q(!1),R(o("updateSuccess"),{variant:"success"}),X.current.resetValue();case 18:e.next=26;break;case 20:e.prev=20,e.t0=e.catch(0),console.clear(),console.log(e.t0),q(!1),R(o(e.t0.message),{variant:"error"});case 26:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(n){return e.apply(this,arguments)}}();return(0,A.jsxs)(a.rg,{sx:{p:0},children:[(0,A.jsx)(p.Z,{sx:{p:2},children:(0,A.jsx)(a.ll,{leftComponent:function(){return(0,A.jsx)(h.pn,{btns:Y,onChange:function(e,n){M(e)}})},rightComponent:function(){return(0,A.jsxs)(A.Fragment,{children:[s&&("positions"===L||"open"===L)&&(0,A.jsx)(h.sq,{onClick:function(e){B(!0)},size:"small",sx:{backgroundColor:"#505064",p:0,py:.3,px:1,color:"primary.rise",alignItems:"center"},disabled:G,children:o("positions"===L?"closeAll":"cancelAll")}),(0,A.jsx)(d.ZP,{id:W,open:U,anchorEl:v,onClose:Q,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,A.jsxs)(p.Z,{sx:{width:200,textAlign:"center",py:1},children:[(0,A.jsx)(x.Z,{sx:{mb:1},children:o("positions"===L?"whetherToCloseAll":"cancelPendingAll")}),(0,A.jsx)(h.sq,{sx:{backgroundColor:"#505064",p:0,py:.3,px:1,alignItems:"center",mr:1},onClick:Q,children:o("cancel")}),(0,A.jsx)(h.sq,{sx:{backgroundColor:"#505064",p:0,py:.3,px:1,alignItems:"center"},onClick:(0,u.Z)((0,l.Z)().mark((function e(){var n,s;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==(null===(n=X.current.firstTrade)||void 0===n||null===(s=n.rawData)||void 0===s?void 0:s.hasPassword)){e.next=5;break}Q(),T(!0),e.next=7;break;case 5:return e.next=7,$();case 7:case"end":return e.stop()}}),e)}))),children:o("confirm")})]})})]})}})}),(0,A.jsxs)(p.Z,{children:["positions"===L&&(0,A.jsx)(j.Z,{type:"positions",autoHeight:!0,hidePagination:!0,login:s,forexAccountId:n,ref:X,closeAll:V,setCloseAll:B,setDisabled:N}),"open"===L&&(0,A.jsx)(j.Z,{type:"open",autoHeight:!0,login:s,forexAccountId:n,hidePagination:!0,ref:X,closeAll:V,setCloseAll:B,setDisabled:N}),"transactions"===L&&(0,A.jsx)(Z.Z,{accountId:n}),"closedTrades"===L&&(0,A.jsx)(m.Z,{login:s})]}),(0,A.jsx)(b.Z,{loading:O}),(0,A.jsx)(C.Z,{open:P,onClose:function(){return T(!1)},callback:function(){var e=(0,u.Z)((0,l.Z)().mark((function e(n){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$(n);case 3:T(!1),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),T(!1);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(n){return e.apply(this,arguments)}}()})]})}s(81514);s(93534);var y=s(43248),I=s(42733),P=s(64234);s(66133);function T(e){var n=(0,f.Z)().t,s=(0,g.useState)("transactions"),t=(0,r.Z)(s,2);t[0],t[1],n("transactions"),n("Today's trades");return(0,A.jsxs)(a.rg,{sx:{p:0},children:[(0,A.jsx)(p.Z,{sx:{pt:2}}),(0,A.jsx)(v.Z,{autoHeight:!0})]})}s(25506);function _(){var e=(0,I.p)(),n=(0,P.useSearchParams)(),s=(0,r.Z)(n,1)[0],a=((0,y.Z)().user,s.get("id")),l=s.get("login");return(0,A.jsxs)(o.Z,{direction:"row",sx:{height:"100%",flexDirection:{xs:"column",md:"row"}},children:[(0,A.jsx)(o.Z,{spacing:1,sx:{width:375,height:"100%"},children:(0,A.jsx)(c.Z,(0,t.Z)((0,t.Z)({},e),{},{params:{login:Number(l)},children:(0,A.jsx)(i.Z,{sx:{}})}))}),(0,A.jsx)(o.Z,{spacing:1,sx:{ml:1,flexGrow:1,height:"100%"},children:a?(0,A.jsx)(S,{accountId:a,login:l}):(0,A.jsx)(T,{})})]})}}}]);