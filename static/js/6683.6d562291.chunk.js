"use strict";(self.webpackChunk_decode_crm_client=self.webpackChunk_decode_crm_client||[]).push([[6683],{8675:function(e,n,r){r(17969);var t=r(3536),a=r(1532),l=r(70289);n.Z=function(e){var n=e.loading;return(0,l.jsx)(t.Z,{sx:{zIndex:"9999999"},open:n,children:(0,l.jsx)(a.Z,{})})}},40208:function(e,n,r){r.d(n,{Z:function(){return v}});var t=r(75782),a=r(68901),l=(r(17969),r(79110)),i=r(2657),s=r(30572),o=r(15246),d=r(66296),c=r(74482),u=r(19015),x=r(8223),f=r(2898),m=r(26456),y=r(70289),b=(0,m.ZP)("div")((function(){return{borderRadius:"8px"}})),p=((0,m.ZP)("div")((function(){return{height:"100%",width:"100%"}})),(0,m.ZP)("div")((function(){return{display:"flex",flexDirection:"column",height:"100%",overflow:"scroll"}})),["showCard","cardTitle","columns","rows","toolBar","density","actionComponent","headerClassName","cellClassName","hidePagination","totalPage","page","onChangePage","autoHeight","sx"]),h=[{systemValue:"en",language:l._},{systemValue:"cn",language:i.U},{systemValue:"cnTw",language:i.U}];function v(e){var n=(0,f.Z)().currentLang,r=e.showCard,l=void 0!==r&&r,i=e.cardTitle,m=e.columns,v=void 0===m?[]:m,g=e.rows,j=void 0===g?[]:g,Z=e.toolBar,C=e.density,w=void 0===C?"compact":C,N=e.actionComponent,k=e.headerClassName,I=e.cellClassName,A=e.hidePagination,q=void 0===A||A,S=e.totalPage,R=void 0===S?1:S,T=e.page,W=void 0===T?1:T,B=e.onChangePage,O=void 0===B?function(){}:B,P=e.autoHeight,F=void 0!==P&&P,M=e.sx,X=(0,a.Z)(e,p),Y=h.find((function(e){return e.systemValue===n.value})),D=(0,t.Z)({rows:j,columns:k||I?v.map((function(e){return(0,t.Z)((0,t.Z)({},e),{},{headerClassName:k,cellClassName:I})})):v,density:w,components:Z||N?{Toolbar:function(){return(0,y.jsxs)(d.Z,{direction:"row",alignItems:"center",sx:{backgroundColor:"#F4F6F8"},children:[Z?(0,y.jsx)(s.n,{}):(0,y.jsx)("span",{}),N&&(0,y.jsx)(c.Z,{sx:{p:16,flexGrow:1},children:N()})]})}}:null},X);return Y.language&&(D.localeText=Y.language.components.MuiDataGrid.defaultProps.localeText),l?(0,y.jsxs)(c.Z,{sx:{width:"100%",display:"flex",flexDirection:"column"},children:[(0,y.jsxs)(b,{sx:{flexGrow:1,borderRadius:0,flex:1},children:[i&&(0,y.jsx)(u.Z,{title:i,sx:{mb:3}}),(0,y.jsx)(o._,(0,t.Z)((0,t.Z)({disableColumnFilter:!0,disableColumnSelector:!0,disableColumnMenu:!0,sortingMode:"server",ColumnSortedAscendingIcon:null,sx:(0,t.Z)({"& .MuiDataGrid-sortIcon":{display:"none"}},M)},D),{},{autoHeight:F}))]}),!q&&(0,y.jsx)(c.Z,{sx:{display:"flex",justifyContent:"center",py:2},children:(0,y.jsx)(x.Z,{count:R,shape:"rounded",page:W,onChange:function(e,n){O(n),window.scrollTo({top:0,behavior:"smooth"})}})})]}):(0,y.jsxs)(c.Z,{sx:{height:"100%",width:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,y.jsx)(b,{sx:{flexGrow:1,borderRadius:0,flex:1},children:(0,y.jsx)(o._,(0,t.Z)((0,t.Z)({disableColumnFilter:!0,disableColumnSelector:!0,disableColumnMenu:!0,sortingMode:"server",ColumnSortedAscendingIcon:null,sx:(0,t.Z)({"& .MuiDataGrid-sortIcon":{display:"none"}},M)},D),{},{autoHeight:F}))}),!q&&(0,y.jsx)(c.Z,{sx:{display:"flex",justifyContent:"center",py:2,backgroundColor:"rgb(32,32,51)"},children:(0,y.jsx)(x.Z,{count:R,shape:"rounded",page:W,onChange:function(e,n){O(n),window.scrollTo({top:0,behavior:"smooth"})}})})]})}},56683:function(e,n,r){r.r(n),r.d(n,{default:function(){return A}});var t=r(99932),a=r(78450),l=r(75782),i=r(52398),s=r(17969),o=r(74482),d=r(25624),c=r(2028),u=r(22105),x=(r(63512),r(9703)),f=(r(40208),r(51909)),m=r(8675),y=r(2898),b=r(68846),p=(r(52126),r(34184),r(1079)),h=(r(52534),r(26949)),v=r(58173),g=r(99350),j=r(10487),Z=r(28197),C=r(27491),w=r.n(C),N=r(70289),k=function(e){return!e||(0,Z.default)(e,"any",{strictMode:!0})},I=function(e){var n=this.parent.network;return w().validate(e,{BSC:"ETH",ETH:"ETH",TRON:"TRON"}[n])};function A(e){e.setStep;var n=(0,h.useSearchParams)(),r=(0,i.Z)(n,1)[0],Z=r.get("id"),C=r.get("walletType"),w=(0,y.Z)().t,A=(0,s.useState)({isSelfAccount:!1}),q=(0,i.Z)(A,2),S=q[0],R=q[1],T=(0,g.Ds)().enqueueSnackbar,W=(0,s.useState)(C||"fiatWallet"),B=(0,i.Z)(W,2),O=B[0],P=B[1],F=(0,s.useState)({amount:""}),M=(0,i.Z)(F,2),X=(M[0],M[1],(0,u.s0)()),Y=(0,s.useState)({}),D=(0,i.Z)(Y,2),_=D[0],z=D[1],G=(0,s.useState)(null),E=(0,i.Z)(G,2),L=E[0],H=E[1],U=(0,s.useState)({}),V=(0,i.Z)(U,2),K=(V[0],V[1],(0,s.useState)(null)),J=(0,i.Z)(K,2),Q=(J[0],J[1],(0,s.useState)(!1)),$=(0,i.Z)(Q,2),ee=$[0],ne=$[1],re=(0,s.useState)(null),te=(0,i.Z)(re,2),ae=te[0],le=te[1],ie=(0,b.nXt)().data,se=(0,b.TKR)().data,oe=(0,b.vLk)().data,de=(0,b.c08)(),ce=de.data,ue=de.isLoading,xe=de.create,fe=de.update,me=(de.mutate,(0,b.GAv)({id:Z,request:"cryptoWallet"===O})),ye=me.data,be=me.isLoading,pe="fiatWallet"===O?ue:be,he=((0,b._i7)().data,(0,b.a9L)(null===S||void 0===S?void 0:S.currency).data),ve=c.object().shape((0,l.Z)({accountNumberOrIban:c.string().required(w("IsRequired",{field:w("accountNumberOrIban")})),region:c.string().required(w("IsRequired",{field:w("region")})),currency:c.string().required(w("IsRequired",{field:w("currency")})),city:c.string().required(w("IsRequired",{field:w("city")})),address1:c.string().required(w("IsRequired",{field:w("address")})),displayName:c.string().required(w("IsRequired",{field:w("displayName")})),name:c.string().required(w("IsRequired",{field:w("name")})),accountName:c.string().required(w("IsRequired",{field:w("accountName")}))},"CNY"===(null===S||void 0===S?void 0:S.currency)?{phone:c.string().test("mobile text",w("mobileNumberfailText"),k).required(w("IsRequired",{field:w("bankLinkMobile")}))}:{phone:c.string()})),ge=c.object().shape({crypto:c.string().required(w("IsRequired",{field:w("crypto")})),network:c.string().required(w("IsRequired",{field:w("network")})),walletAddress:c.string().test("address text",w("walletAddressFalid"),I).required(w("IsRequired",{field:w("walletAddress")}))}),je=(w("date/time"),w("type"),w("amount"),w("status"),[{name:w("fiatWallet"),value:"fiatWallet"},{name:w("cryptoWallet"),value:"cryptoWallet"}]),Ze=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ne(!0),H(null),e.prev=2,!Z){e.next=13;break}if("fiatWallet"!==O){e.next=9;break}return e.next=7,fe(Z,n);case 7:e.next=11;break;case 9:return e.next=11,(0,b.ywb)(Z,{walletAddress:S.walletAddress,cryptoCurrency:S.crypto,chainType:S.network});case 11:e.next=20;break;case 13:if("fiatWallet"!==O){e.next=18;break}return e.next=16,xe((0,l.Z)((0,l.Z)({},n),{},{isSelfAccount:n.isSelfAccount||!1}));case 16:e.next=20;break;case 18:return e.next=20,(0,b.M8Z)({walletAddress:S.walletAddress,cryptoCurrency:S.crypto,chainType:S.network});case 20:T(w(Z?"updateSuccess":"createSuccess"),{variant:"success"}),R({}),X("/crm/fiat"),e.next=29;break;case 25:e.prev=25,e.t0=e.catch(2),T(w(Z?"updateFailed":"createFailed"),{variant:"error"}),H(w((0,j.getErrorMessage)(e.t0)));case 29:return e.prev=29,ne(!1),e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[2,25,29,32]])})));return function(n){return e.apply(this,arguments)}}(),Ce=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:("fiatWallet"===O?ve:ge).validate(S).then((function(e){z({}),Ze(S)})).catch((function(e){z({}),z((function(n){return n[e.path]=e.message,(0,l.Z)({},n)}))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){if("fiatWallet"===O&&Z){var e=null===ce||void 0===ce?void 0:ce.find((function(e){return Number(e.id)===Number(Z)}));le(e),R((0,l.Z)({},e)||{})}else R({crypto:ye.cryptoCurrency,network:ye.chainType,walletAddress:ye.walletAddress})}),[pe,O,Z]),(0,s.useEffect)((function(){R((function(e){return null!==ae&&e.currency!==(null===ae||void 0===ae?void 0:ae.currency)&&(e.name="",e.displayName="",e.accountName="",e.address1="",e.address2="",e.city="",e.state="",e.branchOrABARoutingCode="",e.accountName="",e.phone=""),(0,l.Z)({},e)}))}),[null===S||void 0===S?void 0:S.currency]),(0,s.useEffect)((function(){console.log(S)}),[S]);c.object().shape({forexAccountBalance:c.string().required(),amount:c.string().required()});var we=(0,v.find)(se,(function(e){return e.crypto===S.crypto})),Ne=(0,v.get)(we,":networks",[]).map((function(e){return(0,l.Z)({label:w(e.chain),value:e.chain},e)}))||[];return(0,N.jsxs)(o.Z,{children:[(0,N.jsx)(x.dz,{values:S,setValues:R,errors:_,children:(0,N.jsxs)(o.Z,{sx:{width:600,mx:"auto",my:4},children:[(0,N.jsx)(d.Z,{children:w("createWithdrawalRules")}),(0,v.isNil)(Z)&&(0,N.jsx)(o.Z,{sx:{py:1},children:(0,N.jsx)(p.pn,{btns:je,onChange:function(e,n){P(e)}})}),"fiatWallet"===O?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(x.Nz,{field:"currency",options:oe.map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{label:(0,N.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,N.jsx)(f.Z,{type:"country",code:e.entity})," ",(0,N.jsx)(o.Z,{sx:{ml:1},children:e.label})]})})})),placeholder:w("currency")+"*",sx:{my:2,width:"100%"},size:"middle",labelColor:"background.default"}),["AUD","GBP","EUR","SGD","USD"].includes(null===S||void 0===S?void 0:S.currency)||void 0===(null===S||void 0===S?void 0:S.currency)?(0,N.jsx)(x.o7,{field:"name",label:w("bankName")+"*",sx:{my:2}}):(0,N.jsx)(x.N2,{options:he.map((function(e){return{value:e[":bank"].name,label:e[":bank"].name}})),field:"name",label:w("bankName"),sx:{my:1}}),"CNY"===(null===S||void 0===S?void 0:S.currency)?(0,N.jsx)(x.XI,{field:"displayName",label:w("displayName")+"*",sx:{my:2}}):(0,N.jsx)(x.o7,{field:"displayName",label:w("displayName")+"*",sx:{my:2}}),"CNY"===(null===S||void 0===S?void 0:S.currency)?(0,N.jsx)(x.XI,{field:"accountName",label:w("accountName")+"*",sx:{my:2}}):(0,N.jsx)(x.o7,{field:"accountName",label:w("accountName")+"*",sx:{my:2}}),"CNY"===(null===S||void 0===S?void 0:S.currency)&&(0,N.jsx)(x.XI,{field:"phone",label:w("bankLinkMobile")+"*",sx:{my:2}}),"CNY"===(null===S||void 0===S?void 0:S.currency)?(0,N.jsx)(x.XI,{field:"address1",label:w("bankAdderss1")+"*",sx:{my:2}}):(0,N.jsx)(x.o7,{field:"address1",label:w("bankAdderss1")+"*",sx:{my:2}}),"CNY"===(null===S||void 0===S?void 0:S.currency)?(0,N.jsx)(x.XI,{field:"address2",label:w("bankAdderss2"),sx:{my:2}}):(0,N.jsx)(x.o7,{field:"address2",label:w("bankAdderss2"),sx:{my:2}}),"CNY"===(null===S||void 0===S?void 0:S.currency)?(0,N.jsx)(x.XI,{field:"city",label:w("bankCity")+"*",sx:{my:2}}):(0,N.jsx)(x.o7,{field:"city",label:w("bankCity")+"*",sx:{my:2}}),"CNY"===(null===S||void 0===S?void 0:S.currency)?(0,N.jsx)(x.XI,{field:"state",label:w("bankProvince"),sx:{my:2}}):(0,N.jsx)(x.o7,{field:"state",label:w("bankProvince"),sx:{my:2}}),"CNY"===(null===S||void 0===S?void 0:S.currency)?(0,N.jsx)(x.XI,{field:"postcode",label:w("bankZipCode"),sx:{my:2}}):(0,N.jsx)(x.o7,{field:"postcode",label:w("bankZipCode"),sx:{my:2}}),(0,N.jsx)(x.N2,{field:"region",options:ie,label:w("bankCountry")+"*",sx:{my:1,width:"100%"},getOptionLabel:function(e){return""===e?"":e.label?w("".concat(e.label)):w("countrys.".concat(e))},size:"middle"}),"CNY"===(null===S||void 0===S?void 0:S.currency)?(0,N.jsx)(x.XI,{field:"accountNumberOrIban",label:w("accountNumberOrIban")+"*",sx:{my:2}}):(0,N.jsx)(x.o7,{field:"accountNumberOrIban",label:w("accountNumberOrIban")+"*",sx:{my:2}}),"CNY"===(null===S||void 0===S?void 0:S.currency)?(0,N.jsx)(x.XI,{field:"swiftCodeOrBic",label:w("BIC/SWIFT"),sx:{my:2}}):(0,N.jsx)(x.o7,{field:"swiftCodeOrBic",label:w("BIC/SWIFT"),sx:{my:2}}),"CNY"===(null===S||void 0===S?void 0:S.currency)?(0,N.jsx)(x.XI,{field:"branchOrABARoutingCode",label:w("bankBranch")+"*",sx:{my:2}}):(0,N.jsx)(x.o7,{field:"branchOrABARoutingCode",label:w("bankBranch")+"*",sx:{my:2}}),(0,N.jsx)(x.RM,{field:"isSelfAccount",label:w("isSelfAccount"),sx:{my:2}})]}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(x.Nz,{field:"crypto",options:se.map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{label:(0,N.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,N.jsx)(f.Z,{type:"cryptocurrency",code:e.code})," ",(0,N.jsx)(o.Z,{sx:{ml:1},children:e.name})]}),value:e.code})})),placeholder:w("crypto")+"*",sx:{my:2,width:"100%"},size:"middle",labelColor:"background.default"}),S.crypto&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(x.Nz,{field:"network",options:Ne,placeholder:w("network")+"*",sx:{my:2,width:"100%"},size:"middle",labelColor:"background.default"}),(0,N.jsx)(x.o7,{field:"walletAddress",label:w("walletAddress")+"*",sx:{my:2}})]})]})]})}),(0,N.jsx)(m.Z,{loading:ee}),L&&(0,N.jsx)(d.Z,{color:"red",textAlign:"center",children:L}),(0,N.jsx)(o.Z,{sx:{textAlign:"center"},children:(0,N.jsx)(p.C5,{onClick:Ce,children:w("submit")})})]})}}}]);