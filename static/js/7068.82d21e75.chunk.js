"use strict";(self.webpackChunk_decode_crm_client=self.webpackChunk_decode_crm_client||[]).push([[7068],{4189:function(e,t,n){n.d(t,{ZP:function(){return v},m4:function(){return m}});var r=n(16487),o=n(2211),a=n(76956),i=n(7403),l=n(56141),s=n(43565),c=n(75108),d=n(54708),u=n(31530),f=n(11836),g=n(26521);var x=n(98845),h=["style","children","lines","sx"],m={overflow:"hidden",overflowWrap:"break-word",textOverflow:"ellipsis",whiteSpace:"nowrap",wordBreak:"break-all"},p=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).state={hasOverflowingChildren:!1,text:void 0,prevPropsChildren:e.children},r.updateOverflow=r.updateOverflow.bind((0,s.Z)(r)),r}return(0,l.Z)(n,[{key:"updateOverflow",value:function(e){var t=e.target,n=this.state,r=n.hasOverflowingChildren,o=n.text;!r&&(t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight)?(this.setState({hasOverflowingChildren:!0}),t.textContent!==o&&this.setState({text:t.textContent})):this.setState({hasOverflowingChildren:!1})}},{key:"render",value:function(){var e=this.state,t=e.hasOverflowingChildren,n=e.text,i=this.props,l=i.style,s=void 0===l?{}:l,c=i.children,d=i.lines,u=void 0===d?1:d,p=i.sx,v=(0,a.Z)(i,h),Z={};return Z=1===u?(0,o.Z)((0,o.Z)({},m),s):(0,o.Z)((0,o.Z)({},function(e){return{overflow:"hidden",overflowWrap:"break-word",textOverflow:"ellipsis",WebkitLineClamp:e,WebkitBoxOrient:"vertical",display:"-webkit-box"}}(u)),s),t?(0,x.jsx)(f.Z,(0,o.Z)((0,o.Z)({},v),{},{id:"tooltip-".concat("xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))),title:n,children:(0,x.jsx)(g.Z,{style:Z,sx:(0,r.Z)(Array.isArray(p)?p:[p]),children:c})})):(0,x.jsx)(g.Z,{style:Z,onMouseEnter:this.updateOverflow,sx:(0,r.Z)(Array.isArray(p)?p:[p]),children:c})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.children===t.prevPropsChildren?null:{hasOverflowingChildren:!1,prevPropsChildren:e.children}}}]),n}(u.Component);p.defaultProps={placement:void 0,style:void 0};var v=p},48102:function(e,t,n){var r=n(26521),o=n(24786),a=(n(31530),n(98845));t.Z=function(e){var t=e.bg,n=e.component,i=e.text;return(0,a.jsx)(r.Z,{alignContent:"center",justifyContent:"center",sx:{minHeight:4,minWidth:4,px:1,backgroundColor:t,borderRadius:30},children:n||(0,a.jsx)(o.Z,{fontSize:12,color:"#141428",children:i})})}},10083:function(e,t,n){n.d(t,{Z:function(){return Z}});var r=n(2211),o=n(76956),a=(n(31530),n(83023)),i=n(42812),l=n(13193),s=n(98438),c=n(99317),d=n(26521),u=n(6892),f=n(97288),g=n(88658),x=n(98267),h=n(98845),m=(0,x.ZP)("div")((function(){return{borderRadius:"8px"}})),p=((0,x.ZP)("div")((function(){return{height:"100%",width:"100%"}})),(0,x.ZP)("div")((function(){return{display:"flex",flexDirection:"column",height:"100%",overflow:"scroll"}})),["showCard","cardTitle","columns","rows","toolBar","density","actionComponent","headerClassName","cellClassName","hidePagination","totalPage","page","onChangePage","autoHeight","sx"]),v=[{systemValue:"en",language:a._},{systemValue:"cn",language:i.U},{systemValue:"cnTw",language:i.U}];function Z(e){var t=(0,g.Z)().currentLang,n=e.showCard,a=void 0!==n&&n,i=e.cardTitle,x=e.columns,Z=void 0===x?[]:x,b=e.rows,C=void 0===b?[]:b,y=e.toolBar,w=e.density,j=void 0===w?"compact":w,D=e.actionComponent,k=e.headerClassName,S=e.cellClassName,A=e.hidePagination,P=void 0===A||A,N=e.totalPage,W=void 0===N?1:N,O=e.page,T=void 0===O?1:O,F=e.onChangePage,I=void 0===F?function(){}:F,M=e.autoHeight,z=void 0!==M&&M,H=e.sx,_=(0,o.Z)(e,p),G=v.find((function(e){return e.systemValue===t.value})),B=(0,r.Z)({rows:C,columns:k||S?Z.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{headerClassName:k,cellClassName:S})})):Z,density:j,components:y||D?{Toolbar:function(){return(0,h.jsxs)(c.Z,{direction:"row",alignItems:"center",sx:{backgroundColor:"#F4F6F8"},children:[y?(0,h.jsx)(l.n,{}):(0,h.jsx)("span",{}),D&&(0,h.jsx)(d.Z,{sx:{p:16,flexGrow:1},children:D()})]})}}:null},_);return G.language&&(B.localeText=G.language.components.MuiDataGrid.defaultProps.localeText),a?(0,h.jsxs)(d.Z,{sx:{width:"100%",display:"flex",flexDirection:"column"},children:[(0,h.jsxs)(m,{sx:{flexGrow:1,borderRadius:0,flex:1},children:[i&&(0,h.jsx)(u.Z,{title:i,sx:{mb:3}}),(0,h.jsx)(s._,(0,r.Z)((0,r.Z)({disableColumnFilter:!0,disableColumnSelector:!0,disableColumnMenu:!0,sortingMode:"server",ColumnSortedAscendingIcon:null,sx:(0,r.Z)({"& .MuiDataGrid-sortIcon":{display:"none"}},H)},B),{},{autoHeight:z}))]}),!P&&(0,h.jsx)(d.Z,{sx:{display:"flex",justifyContent:"center",py:2},children:(0,h.jsx)(f.Z,{count:W,shape:"rounded",page:T,onChange:function(e,t){I(t),window.scrollTo({top:0,behavior:"smooth"})}})})]}):(0,h.jsxs)(d.Z,{sx:{height:"100%",width:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,h.jsx)(m,{sx:{flexGrow:1,borderRadius:0,flex:1},children:(0,h.jsx)(s._,(0,r.Z)((0,r.Z)({disableColumnFilter:!0,disableColumnSelector:!0,disableColumnMenu:!0,sortingMode:"server",ColumnSortedAscendingIcon:null,sx:(0,r.Z)({"& .MuiDataGrid-sortIcon":{display:"none"}},H)},B),{},{autoHeight:z}))}),!P&&(0,h.jsx)(d.Z,{sx:{display:"flex",justifyContent:"center",py:2,backgroundColor:"rgb(32,32,51)"},children:(0,h.jsx)(f.Z,{count:W,shape:"rounded",page:T,onChange:function(e,t){I(t),window.scrollTo({top:0,behavior:"smooth"})}})})]})}},87068:function(e,t,n){n.d(t,{Z:function(){return P}});var r=n(92680),o=n(24190),a=n(16487),i=n(2211),l=n(12130),s=n(26521),c=n(99317),d=n(13392),u=(n(81589),n(31530)),f=n(10083),g=n(88658),x=n(45927),h=n(32112),m=n(24786),p=n(41817),v=(n(80215),n(96390)),Z=n(39702),b=n(38702),C=(n(47769),n(12570)),y=n(48102),w=n(59876),j=n(54841),D=(n(67350),n(79538)),k=n(40097),S=n(4189),A=n(98845);function P(e){var t=e.hideFilter,n=void 0!==t&&t,P=e.accountId,N=e.defaultType,W=e.pageSize,O=e.hidePagination,T=void 0!==O&&O,F=(0,g.Z)().t,I=(0,u.useState)({status:"all",type:N||"all",startDate:null,endDate:null}),M=(0,l.Z)(I,2),z=M[0],H=M[1],_=(0,x.nC)((0,i.Z)((0,i.Z)({},z),{},{searchText:P,pageSize:W})),G=_.data,B=_.totalPage,R=_.page,V=_.setPage,L=((0,b.Z)(),(0,j.H)((function(e){return e}))),E={sx:{fontSize:"12px"}};(0,u.useEffect)((function(){"deposit"===z.type&&H((function(e){return(0,i.Z)((0,i.Z)({},e),{},{status:"all"})}))}),[z.type]);var U=[{label:F("all"),value:"all"}].concat((0,a.Z)("deposit"===z.type?[]:[{label:F("pending"),value:"pending"}]),[{label:F("complete"),value:"complete"},{label:F("failed"),value:"failed"},{label:F("declined"),value:"declined"}]),X=[{label:F("all"),value:"all"},{label:F("exchange"),value:"exchange"},{label:F("deposit"),value:"deposit"},{label:F("withdrawal"),value:"withdrawal"},{label:F("commission"),value:"commission"},{label:F("transfer"),value:"transfer"}],q=[{headerName:F("updatedAt"),field:"lastestUpdatedAt",flex:1,minWidth:140,renderCell:function(e){var t=e.row;return(0,A.jsx)(m.Z,(0,i.Z)((0,i.Z)({},E),{},{children:(0,v.o0)(t.createdAt)}))}},{headerName:F("type"),field:"type",flex:1,minWidth:80,renderCell:function(e){var t=e.row;return(0,A.jsx)(S.ZP,(0,i.Z)((0,i.Z)({},E),{},{children:F(C.receiptTypeMapper[(0,Z.get)(t,"actionType")])}))}},{headerName:F("refTicket"),field:"refTicket",flex:1,minWidth:100,renderCell:function(e){var t=e.row;return(0,A.jsx)(S.ZP,(0,i.Z)((0,i.Z)({},E),{},{children:t.ticket}))}},{headerName:F("fromAccount"),field:"fromAccount",flex:1,minWidth:100,renderCell:function(e){var t=e.row;return(0,A.jsx)(m.Z,(0,i.Z)((0,i.Z)({},E),{},{children:"fiat"===(0,Z.get)(t,"from.service")?F("fiatSaving"):"forex"===(0,Z.get)(t,"from.service")?"FX ".concat((0,Z.get)(t,"from.forexAccountDetail.login")):"platformBank"===(0,Z.get)(t,"from.service")?F("fiatSaving"):"Commission"===(0,Z.get)(t,"actionType")?"Decode Global":"externalWithdrawalAccount"===(0,Z.get)(t,"from.service")?(0,Z.get)(t,"from.withdrawalAccountDetail.displayName"):""}))}},{headerName:F("fromAmount"),field:"fromAmount",flex:1,align:"right",headerAlign:"right",minWidth:100,renderCell:function(e){var t=e.row;return(0,A.jsx)(m.Z,(0,i.Z)((0,i.Z)({},E),{},{children:"Commission"===(0,Z.get)(t,"actionType")?(0,p.currencyFormatorWithDecimal)((0,Z.get)(t,"from.value"),(0,Z.get)(t,"from.currency",(0,Z.get)(t,"from.crypto")),4):(0,p.currencyFormatorOfficial)((0,Z.get)(t,"from.value"),(0,Z.get)(t,"from.currency",(0,Z.get)(t,"from.crypto")),!0)}))}},{headerName:F("toAccount"),field:"toAccount",flex:1,minWidth:100,renderCell:function(e){var t=e.row;return(0,A.jsx)(m.Z,(0,i.Z)((0,i.Z)({},E),{},{children:"fiat"===(0,Z.get)(t,"to.service")?F("fiatSaving"):"forex"===(0,Z.get)(t,"to.service")?"FX ".concat((0,Z.get)(t,"to.forexAccountDetail.login")):"platformBank"===(0,Z.get)(t,"to.service")?F("fiatSaving"):"externalWithdrawalAccount"===(0,Z.get)(t,"to.service")?(0,Z.get)(t,"to.withdrawalAccountDetail.displayName"):""}))}},{headerName:F("toAmount"),field:"toAmount",flex:1,align:"right",headerAlign:"right",minWidth:100,renderCell:function(e){var t=e.row;return(0,A.jsx)(m.Z,(0,i.Z)((0,i.Z)({},E),{},{children:"Commission"===(0,Z.get)(t,"actionType")?(0,p.currencyFormatorWithDecimal)((0,Z.get)(t,"to.value"),(0,Z.get)(t,"to.currency",(0,Z.get)(t,"to.crypto")),4,!0):(0,p.currencyFormatorOfficial)((0,Z.get)(t,"to.value"),(0,Z.get)(t,"to.currency",(0,Z.get)(t,"to.crypto")),!0)}))}},{headerName:F("status"),field:"status",flex:1,minWidth:100,renderCell:function(e){var t,n=e.row;return(0,A.jsx)(y.Z,{bg:null===(t=w.L[(0,Z.get)(n,"status")])||void 0===t?void 0:t.bgColor,text:F(n.status)})}}],J=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var t,n,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=z.startDate instanceof Date?(0,D.Z)(z.startDate)?z.startDate.toISOString():null:z.startDate,n=z.endDate instanceof Date?(0,D.Z)(z.endDate)?z.endDate.toISOString():null:z.endDate,e.next=4,(0,x.A2)({startDate:n&&(0,Z.isNil)(t)?(0,k.Z)(new Date(z.endDate),20).toISOString():t,endDate:t&&(0,Z.isNil)(n)?(new Date).toISOString():n,status:"all"===(0,Z.get)(z,"status")?null:(0,Z.get)(z,"status"),type:"all"===(0,Z.get)(z,"type")?null:(0,Z.get)(z,"type")});case 4:o=e.sent,(0,x.Sv)(o,"".concat(F("transactions"),".xlsx"));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,A.jsxs)(s.Z,{sx:{"& .style-header":{fontSize:14,backgroundColor:"#3C3C50",height:36,fontWeight:"bold"},"& .MuiDataGrid-columnHeaders":{borderRadius:0}},children:[!n&&(0,A.jsx)(s.Z,{sx:{display:"flex",justifyContent:"space-between",p:2,pt:0},children:(0,A.jsx)(h.dz,{values:z,setValues:H,children:(0,A.jsxs)(c.Z,{alignItems:"center",sx:{flexDirection:{xs:"column",md:"row"},alignItems:{xs:"flex-start",md:"center"}},direction:"row",spacing:{xs:0,md:2},children:[(0,A.jsx)(h.Nz,{options:U,field:"status",size:"small",placeholder:F("status"),labelColor:"background.nav.background",sx:{width:200,mb:{xs:1,md:0}}}),(0,A.jsx)(h.Nz,{options:X,field:"type",size:"small",placeholder:F("type"),labelColor:"background.nav.background",sx:{width:200,mb:{xs:1,md:0}}}),(0,A.jsx)(h.am,{label:F("startDate"),field:"startDate",sx:{mb:{xs:1,md:0}}}),(0,A.jsx)(h.am,{label:F("endDate"),field:"endDate",sx:{mb:{xs:1,md:0}}}),(0,A.jsx)(d.Z,{variant:"contained",onClick:J,children:"Export"})]})})}),(0,A.jsx)(f.Z,{columns:q,rows:G,headerClassName:"style-header",cellClassName:"style-cell",hideFooter:!0,autoHeight:!0,hidePagination:T,totalPage:B,page:R,onChangePage:function(e){return V(e)},onRowClick:function(e){L.openReceiptDialog({transactionId:null===e||void 0===e?void 0:e.id,type:C.receiptTypeMapper[(0,Z.get)(e,"row.actionType")]})}})]})}},59876:function(e,t,n){n.d(t,{L:function(){return s},s:function(){return c}});var r={bg:"#22c55e"},o={bg:"#0ea5e9"},a={bg:"#FFB400"},i={bg:"#f43f5e"},l={bg:"#737373"},s={complete:{bgColor:r.bg},failed:{bgColor:i.bg},pending:{bgColor:a.bg},declined:{bgColor:i.bg}},c={success:{bgColor:r.bg},info:{bgColor:o.bg},warning:{bgColor:a.bg},error:{bgColor:i.bg},draft:{bgColor:l.bg}}}}]);