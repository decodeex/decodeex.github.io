"use strict";(self.webpackChunk_decode_crm_client=self.webpackChunk_decode_crm_client||[]).push([[7243],{64965:function(e,n,t){t(31530);var a=t(47006),r=t(27203),s=t(98845);n.Z=function(e){var n=e.loading;return(0,s.jsx)(a.Z,{sx:{zIndex:"9999999"},open:n,children:(0,s.jsx)(r.Z,{})})}},10083:function(e,n,t){t.d(n,{Z:function(){return y}});var a=t(2211),r=t(76956),s=(t(31530),t(83023)),i=t(42812),o=t(13193),l=t(98438),c=t(99317),u=t(26521),d=t(6892),x=t(97288),f=t(88658),m=t(98267),b=t(98845),h=(0,m.ZP)("div")((function(){return{borderRadius:"8px"}})),p=((0,m.ZP)("div")((function(){return{height:"100%",width:"100%"}})),(0,m.ZP)("div")((function(){return{display:"flex",flexDirection:"column",height:"100%",overflow:"scroll"}})),["showCard","cardTitle","columns","rows","toolBar","density","actionComponent","headerClassName","cellClassName","hidePagination","totalPage","page","onChangePage","autoHeight","sx"]),g=[{systemValue:"en",language:s._},{systemValue:"cn",language:i.U},{systemValue:"cnTw",language:i.U}];function y(e){var n=(0,f.Z)().currentLang,t=e.showCard,s=void 0!==t&&t,i=e.cardTitle,m=e.columns,y=void 0===m?[]:m,Z=e.rows,v=void 0===Z?[]:Z,j=e.toolBar,C=e.density,w=void 0===C?"compact":C,k=e.actionComponent,I=e.headerClassName,N=e.cellClassName,S=e.hidePagination,A=void 0===S||S,P=e.totalPage,X=void 0===P?1:P,q=e.page,_=void 0===q?1:q,D=e.onChangePage,T=void 0===D?function(){}:D,B=e.autoHeight,G=void 0!==B&&B,M=e.sx,R=(0,r.Z)(e,p),F=g.find((function(e){return e.systemValue===n.value})),O=(0,a.Z)({rows:v,columns:I||N?y.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{headerClassName:I,cellClassName:N})})):y,density:w,components:j||k?{Toolbar:function(){return(0,b.jsxs)(c.Z,{direction:"row",alignItems:"center",sx:{backgroundColor:"#F4F6F8"},children:[j?(0,b.jsx)(o.n,{}):(0,b.jsx)("span",{}),k&&(0,b.jsx)(u.Z,{sx:{p:16,flexGrow:1},children:k()})]})}}:null},R);return F.language&&(O.localeText=F.language.components.MuiDataGrid.defaultProps.localeText),s?(0,b.jsxs)(u.Z,{sx:{width:"100%",display:"flex",flexDirection:"column"},children:[(0,b.jsxs)(h,{sx:{flexGrow:1,borderRadius:0,flex:1},children:[i&&(0,b.jsx)(d.Z,{title:i,sx:{mb:3}}),(0,b.jsx)(l._,(0,a.Z)((0,a.Z)({disableColumnFilter:!0,disableColumnSelector:!0,disableColumnMenu:!0,sortingMode:"server",ColumnSortedAscendingIcon:null,sx:(0,a.Z)({"& .MuiDataGrid-sortIcon":{display:"none"}},M)},O),{},{autoHeight:G}))]}),!A&&(0,b.jsx)(u.Z,{sx:{display:"flex",justifyContent:"center",py:2},children:(0,b.jsx)(x.Z,{count:X,shape:"rounded",page:_,onChange:function(e,n){T(n),window.scrollTo({top:0,behavior:"smooth"})}})})]}):(0,b.jsxs)(u.Z,{sx:{height:"100%",width:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,b.jsx)(h,{sx:{flexGrow:1,borderRadius:0,flex:1},children:(0,b.jsx)(l._,(0,a.Z)((0,a.Z)({disableColumnFilter:!0,disableColumnSelector:!0,disableColumnMenu:!0,sortingMode:"server",ColumnSortedAscendingIcon:null,sx:(0,a.Z)({"& .MuiDataGrid-sortIcon":{display:"none"}},M)},O),{},{autoHeight:G}))}),!A&&(0,b.jsx)(u.Z,{sx:{display:"flex",justifyContent:"center",py:2,backgroundColor:"rgb(32,32,51)"},children:(0,b.jsx)(x.Z,{count:X,shape:"rounded",page:_,onChange:function(e,n){T(n),window.scrollTo({top:0,behavior:"smooth"})}})})]})}},67243:function(e,n,t){t.r(n),t.d(n,{default:function(){return y}});var a=t(2211),r=t(92680),s=t(24190),i=t(12130),o=t(31530),l=t(26521),c=t(29367),u=t(15592),d=(t(11001),t(32112)),x=(t(10083),t(46899)),f=t(64965),m=t(88658),b=t(45927),h=(t(96390),t(80215),t(64505)),p=(t(58947),t(64234)),g=t(98845);function y(e){e.setStep;var n=(0,p.useSearchParams)(),t=(0,i.Z)(n,1)[0].get("id"),y=(0,m.Z)().t,Z=(0,o.useState)({isSelfAccount:!1}),v=(0,i.Z)(Z,2),j=v[0],C=v[1],w=(0,o.useState)({amount:""}),k=(0,i.Z)(w,2),I=(k[0],k[1],(0,u.s0)()),N=(0,o.useState)({}),S=(0,i.Z)(N,2),A=S[0],P=S[1],X=(0,o.useState)({}),q=(0,i.Z)(X,2),_=(q[0],q[1],(0,o.useState)(null)),D=(0,i.Z)(_,2),T=(D[0],D[1],(0,o.useState)(!1)),B=(0,i.Z)(T,2),G=B[0],M=B[1],R=(0,o.useState)(null),F=(0,i.Z)(R,2),O=F[0],z=F[1],U=(0,b.nX)().data,V=(0,b.f$)().data,E=(0,b.c0)(),H=E.data,L=E.isLoading,W=E.create,$=E.update,J=(E.mutate,(0,b._i)().data,(0,b.a9)(null===j||void 0===j?void 0:j.currency).data),K=c.object().shape({accountNumberOrIban:c.string().required(),region:c.string().required(),currency:c.string().required(),city:c.string().required(),address1:c.string().required(),displayName:c.string().required(),name:c.string().required(),accountName:c.string().required()}),Q=(y("date/time"),y("type"),y("amount"),y("status"),function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(M(!0),e.prev=1,!t){e.next=7;break}return e.next=5,$(t,n);case 5:e.next=9;break;case 7:return e.next=9,W(n);case 9:C({}),I("/crm/fiat"),M(!1),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(1);case 16:M(!1);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(n){return e.apply(this,arguments)}}()),Y=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:K.validate(j).then((function(e){P({}),Q(j)})).catch((function(e){P({}),P((function(n){return n[e.path]=y("IsRequired",{field:y(e.path)}),(0,a.Z)({},n)}))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){var e=null===H||void 0===H?void 0:H.find((function(e){return Number(e.id)===Number(t)}));z(e),C((0,a.Z)((0,a.Z)({},e),{},{isSelfAccount:!1})||{})}),[L]),(0,o.useEffect)((function(){C((function(e){return null!==O&&e.currency!==(null===O||void 0===O?void 0:O.currency)&&(e.name=""),(0,a.Z)({},e)}))}),[null===j||void 0===j?void 0:j.currency]),(0,o.useEffect)((function(){console.log(j)}),[j]);c.object().shape({forexAccountBalance:c.string().required(),amount:c.string().required()});return(0,g.jsxs)(l.Z,{children:[(0,g.jsx)(d.dz,{values:j,setValues:C,errors:A,children:(0,g.jsxs)(l.Z,{sx:{width:600,mx:"auto",my:4},children:[(0,g.jsx)(d.Nz,{field:"currency",options:V.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{label:(0,g.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,g.jsx)(x.Z,{type:"country",code:e.entity})," ",(0,g.jsx)(l.Z,{sx:{ml:1},children:e.label})]})})})),placeholder:y("currency")+"*",sx:{my:2,width:"100%"},size:"middle",labelColor:"background.default"}),["AUD","GBP","EUR","SGD","USD"].includes(null===j||void 0===j?void 0:j.currency)||void 0===(null===j||void 0===j?void 0:j.currency)?(0,g.jsx)(d.XI,{field:"name",label:y("bankName")+"*",sx:{my:2}}):(0,g.jsx)(d.N2,{options:J.map((function(e){return{value:e[":bank"].name,label:e[":bank"].name}})),field:"name",label:y("bankName"),sx:{my:2}}),(0,g.jsx)(d.XI,{field:"displayName",label:y("displayName")+"*",sx:{my:2}}),(0,g.jsx)(d.XI,{field:"accountName",label:y("accountName")+"*",sx:{my:2}}),(0,g.jsx)(d.XI,{field:"address1",label:y("bankAdderss1")+"*",sx:{my:2}}),(0,g.jsx)(d.XI,{field:"address2",label:y("bankAdderss2"),sx:{my:2}}),(0,g.jsx)(d.XI,{field:"city",label:y("bankCity")+"*",sx:{my:2}}),(0,g.jsx)(d.XI,{field:"state",label:y("bankProvince"),sx:{my:2}}),(0,g.jsx)(d.XI,{field:"postcode",label:y("bankZipCode"),sx:{my:2}}),(0,g.jsx)(d.N2,{field:"region",options:U,label:y("bankCountry")+"*",sx:{my:2,width:"100%"},getOptionLabel:function(e){return""===e?"":e.label?y("".concat(e.label)):y("countrys.".concat(e))},size:"middle"}),(0,g.jsx)(d.XI,{field:"accountNumberOrIban",label:y("accountNumberOrIban")+"*",sx:{my:2}}),(0,g.jsx)(d.XI,{field:"swiftCodeOrBic",label:y("BIC/SWIFT"),sx:{my:2}}),(0,g.jsx)(d.XI,{field:"branchOrABARoutingCode",label:y("bankBranch"),sx:{my:2}}),(0,g.jsx)(d.RM,{field:"isSelfAccount",label:y("isSelfAccount"),sx:{my:2}})]})}),(0,g.jsx)(f.Z,{loading:G}),(0,g.jsx)(l.Z,{sx:{textAlign:"center"},children:(0,g.jsx)(h.C5,{onClick:Y,children:y("submit")})})]})}}}]);