"use strict";(self.webpackChunk_decode_crm_client=self.webpackChunk_decode_crm_client||[]).push([[7769],{21011:function(e,t,r){r.d(t,{ZP:function(){return v},m4:function(){return p}});var n=r(84691),a=r(75782),o=r(68901),l=r(40936),i=r(49962),s=r(60790),c=r(65782),d=r(62680),u=r(17969),g=r(40926),f=r(74482);var x=r(70289),h=["style","children","lines","sx"],p={overflow:"hidden",overflowWrap:"break-word",textOverflow:"ellipsis",whiteSpace:"nowrap",wordBreak:"break-all"},m=function(e){(0,c.Z)(r,e);var t=(0,d.Z)(r);function r(e){var n;return(0,l.Z)(this,r),(n=t.call(this,e)).state={hasOverflowingChildren:!1,text:void 0,prevPropsChildren:e.children},n.updateOverflow=n.updateOverflow.bind((0,s.Z)(n)),n}return(0,i.Z)(r,[{key:"updateOverflow",value:function(e){var t=e.target,r=this.state,n=r.hasOverflowingChildren,a=r.text;!n&&(t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight)?(this.setState({hasOverflowingChildren:!0}),t.textContent!==a&&this.setState({text:t.textContent})):this.setState({hasOverflowingChildren:!1})}},{key:"render",value:function(){var e=this.state,t=e.hasOverflowingChildren,r=e.text,l=this.props,i=l.style,s=void 0===i?{}:i,c=l.children,d=l.lines,u=void 0===d?1:d,m=l.sx,v=(0,o.Z)(l,h),Z={};return Z=1===u?(0,a.Z)((0,a.Z)({},p),s):(0,a.Z)((0,a.Z)({},function(e){return{overflow:"hidden",overflowWrap:"break-word",textOverflow:"ellipsis",WebkitLineClamp:e,WebkitBoxOrient:"vertical",display:"-webkit-box"}}(u)),s),t?(0,x.jsx)(g.Z,(0,a.Z)((0,a.Z)({},v),{},{id:"tooltip-".concat("xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))),title:r,children:(0,x.jsx)(f.Z,{style:Z,sx:(0,n.Z)(Array.isArray(m)?m:[m]),children:c})})):(0,x.jsx)(f.Z,{style:Z,onMouseEnter:this.updateOverflow,sx:(0,n.Z)(Array.isArray(m)?m:[m]),children:c})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.children===t.prevPropsChildren?null:{hasOverflowingChildren:!1,prevPropsChildren:e.children}}}]),r}(u.Component);m.defaultProps={placement:void 0,style:void 0};var v=m},40208:function(e,t,r){r.d(t,{Z:function(){return Z}});var n=r(75782),a=r(68901),o=(r(17969),r(79110)),l=r(2657),i=r(30572),s=r(15246),c=r(66296),d=r(74482),u=r(19015),g=r(8223),f=r(2898),x=r(26456),h=r(70289),p=(0,x.ZP)("div")((function(){return{borderRadius:"8px"}})),m=((0,x.ZP)("div")((function(){return{height:"100%",width:"100%"}})),(0,x.ZP)("div")((function(){return{display:"flex",flexDirection:"column",height:"100%",overflow:"scroll"}})),["showCard","cardTitle","columns","rows","toolBar","density","actionComponent","headerClassName","cellClassName","hidePagination","totalPage","page","onChangePage","autoHeight","sx"]),v=[{systemValue:"en",language:o._},{systemValue:"cn",language:l.U},{systemValue:"cnTw",language:l.U}];function Z(e){var t=(0,f.Z)().currentLang,r=e.showCard,o=void 0!==r&&r,l=e.cardTitle,x=e.columns,Z=void 0===x?[]:x,w=e.rows,b=void 0===w?[]:w,y=e.toolBar,C=e.density,j=void 0===C?"compact":C,D=e.actionComponent,S=e.headerClassName,k=e.cellClassName,A=e.hidePagination,W=void 0===A||A,P=e.totalPage,N=void 0===P?1:P,O=e.page,T=void 0===O?1:O,F=e.onChangePage,I=void 0===F?function(){}:F,M=e.autoHeight,z=void 0!==M&&M,H=e.sx,_=(0,a.Z)(e,m),G=v.find((function(e){return e.systemValue===t.value})),B=(0,n.Z)({rows:b,columns:S||k?Z.map((function(e){return(0,n.Z)((0,n.Z)({},e),{},{headerClassName:S,cellClassName:k})})):Z,density:j,components:y||D?{Toolbar:function(){return(0,h.jsxs)(c.Z,{direction:"row",alignItems:"center",sx:{backgroundColor:"#F4F6F8"},children:[y?(0,h.jsx)(i.n,{}):(0,h.jsx)("span",{}),D&&(0,h.jsx)(d.Z,{sx:{p:16,flexGrow:1},children:D()})]})}}:null},_);return G.language&&(B.localeText=G.language.components.MuiDataGrid.defaultProps.localeText),o?(0,h.jsxs)(d.Z,{sx:{width:"100%",display:"flex",flexDirection:"column"},children:[(0,h.jsxs)(p,{sx:{flexGrow:1,borderRadius:0,flex:1},children:[l&&(0,h.jsx)(u.Z,{title:l,sx:{mb:3}}),(0,h.jsx)(s._,(0,n.Z)((0,n.Z)({disableColumnFilter:!0,disableColumnSelector:!0,disableColumnMenu:!0,sortingMode:"server",ColumnSortedAscendingIcon:null,sx:(0,n.Z)({"& .MuiDataGrid-sortIcon":{display:"none"}},H)},B),{},{autoHeight:z}))]}),!W&&(0,h.jsx)(d.Z,{sx:{display:"flex",justifyContent:"center",py:2},children:(0,h.jsx)(g.Z,{count:N,shape:"rounded",page:T,onChange:function(e,t){I(t),window.scrollTo({top:0,behavior:"smooth"})}})})]}):(0,h.jsxs)(d.Z,{sx:{height:"100%",width:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,h.jsx)(p,{sx:{flexGrow:1,borderRadius:0,flex:1},children:(0,h.jsx)(s._,(0,n.Z)((0,n.Z)({disableColumnFilter:!0,disableColumnSelector:!0,disableColumnMenu:!0,sortingMode:"server",ColumnSortedAscendingIcon:null,sx:(0,n.Z)({"& .MuiDataGrid-sortIcon":{display:"none"}},H)},B),{},{autoHeight:z}))}),!W&&(0,h.jsx)(d.Z,{sx:{display:"flex",justifyContent:"center",py:2,backgroundColor:"rgb(32,32,51)"},children:(0,h.jsx)(g.Z,{count:N,shape:"rounded",page:T,onChange:function(e,t){I(t),window.scrollTo({top:0,behavior:"smooth"})}})})]})}},47769:function(e,t,r){r.d(t,{Z:function(){return W}});var n=r(99932),a=r(78450),o=r(84691),l=r(75782),i=r(52398),s=r(74482),c=r(66296),d=r(59425),u=(r(48201),r(17969)),g=r(40208),f=r(2898),x=r(68846),h=r(9703),p=r(25624),m=r(34175),v=(r(34184),r(52126)),Z=r(58173),w=r(33320),b=(r(53944),r(26648)),y=r(27396),C=r(55908),j=r(80014),D=(r(53705),r(53664)),S=r(50227),k=r(21011),A=r(70289);function W(e){var t=e.hideFilter,r=void 0!==t&&t,W=e.accountId,P=e.defaultType,N=e.pageSize,O=e.hidePagination,T=void 0!==O&&O,F=(0,f.Z)().t,I=(0,u.useState)({status:"all",type:P||"all",startDate:null,endDate:null}),M=(0,i.Z)(I,2),z=M[0],H=M[1],_=(0,x.nCS)((0,l.Z)((0,l.Z)({},z),{},{searchText:W,pageSize:N})),G=_.data,B=_.totalPage,R=_.page,V=_.setPage;console.log(G);(0,w.Z)();var L=(0,j.H)((function(e){return e})),X={sx:{fontSize:"12px"}};(0,u.useEffect)((function(){"deposit"===z.type&&H((function(e){return(0,l.Z)((0,l.Z)({},e),{},{status:"all"})}))}),[z.type]);var U=[{label:F("all"),value:"all"}].concat((0,o.Z)("deposit"===z.type?[]:[{label:F("pending"),value:"pending"}]),[{label:F("complete"),value:"complete"},{label:F("failed"),value:"failed"},{label:F("declined"),value:"declined"}]),E=[{label:F("all"),value:"all"},{label:F("exchange"),value:"exchange"},{label:F("deposit"),value:"deposit"},{label:F("withdrawal"),value:"withdrawal"},{label:F("commission"),value:"commission"},{label:F("transfer"),value:"transfer"}],q=[{headerName:F("updatedAt"),field:"lastestUpdatedAt",flex:1,minWidth:140,renderCell:function(e){var t=e.row;return(0,A.jsx)(p.Z,(0,l.Z)((0,l.Z)({},X),{},{children:(0,v.o0)(t.createdAt)}))}},{headerName:F("type"),field:"type",flex:1,minWidth:80,renderCell:function(e){var t=e.row;return(0,A.jsx)(k.ZP,(0,l.Z)((0,l.Z)({},X),{},{children:F(b.receiptTypeMapper[(0,Z.get)(t,"actionType")])}))}},{headerName:F("refTicket"),field:"refTicket",flex:1,minWidth:100,renderCell:function(e){var t=e.row;return(0,A.jsx)(k.ZP,(0,l.Z)((0,l.Z)({},X),{},{children:t.ticket}))}},{headerName:F("fromAccount"),field:"fromAccount",flex:1,minWidth:100,renderCell:function(e){var t=e.row;return(0,A.jsx)(p.Z,(0,l.Z)((0,l.Z)({},X),{},{children:"fiat"===(0,Z.get)(t,"from.service")?F("fiatSaving"):"forex"===(0,Z.get)(t,"from.service")?"FX ".concat((0,Z.get)(t,"from.forexAccountDetail.login")):"platformBank"===(0,Z.get)(t,"from.service")?F("fiatSaving"):"Commission"===(0,Z.get)(t,"actionType")?"Decode Global":"externalWithdrawalAccount"===(0,Z.get)(t,"from.service")?(0,Z.get)(t,"from.withdrawalAccountDetail.displayName"):"crypto"===(0,Z.get)(t,"from.service")?F("cryptoWallet"):"externalWithdrawalWallet"===(0,Z.get)(t,"from.service")?"".concat((0,v.XF)((0,Z.get)(t,"from.withdrawalWalletDetail.walletAddress",""))):""}))}},{headerName:F("fromAmount"),field:"fromAmount",flex:1,align:"right",headerAlign:"right",minWidth:100,renderCell:function(e){var t=e.row;return(0,A.jsx)(p.Z,(0,l.Z)((0,l.Z)({},X),{},{children:"Commission"===(0,Z.get)(t,"actionType")?(0,m.currencyFormatorWithDecimal)((0,Z.get)(t,"from.value"),(0,Z.get)(t,"from.currency",(0,Z.get)(t,"from.crypto")),4,!0):(0,m.currencyFormatorOfficial)((0,Z.get)(t,"from.value"),(0,Z.get)(t,"from.currency",(0,Z.get)(t,"from.crypto")),!0)}))}},{headerName:F("toAccount"),field:"toAccount",flex:1,minWidth:100,renderCell:function(e){var t=e.row;return(0,A.jsx)(p.Z,(0,l.Z)((0,l.Z)({},X),{},{children:"fiat"===(0,Z.get)(t,"to.service")?F("fiatSaving"):"forex"===(0,Z.get)(t,"to.service")?"FX ".concat((0,Z.get)(t,"to.forexAccountDetail.login")):"platformBank"===(0,Z.get)(t,"to.service")?F("fiatSaving"):"externalWithdrawalAccount"===(0,Z.get)(t,"to.service")?(0,Z.get)(t,"to.withdrawalAccountDetail.displayName"):"Subscription"===(0,Z.get)(t,"actionType")?F("OrionTradingAcademy"):"crypto"===(0,Z.get)(t,"to.service")?F("cryptoWallet"):"externalWithdrawalWallet"===(0,Z.get)(t,"to.service")?"".concat((0,v.XF)((0,Z.get)(t,"to.withdrawalWalletDetail.walletAddress",""))):""}))}},{headerName:F("toAmount"),field:"toAmount",flex:1,align:"right",headerAlign:"right",minWidth:100,renderCell:function(e){var t=e.row;return(0,A.jsx)(p.Z,(0,l.Z)((0,l.Z)({},X),{},{children:"Commission"===(0,Z.get)(t,"actionType")?(0,m.currencyFormatorWithDecimal)((0,Z.get)(t,"to.value"),(0,Z.get)(t,"to.currency",(0,Z.get)(t,"to.crypto")),4,!0):(0,m.currencyFormatorOfficial)((0,Z.get)(t,"to.value"),(0,Z.get)(t,"to.currency",(0,Z.get)(t,"to.crypto")),!0)}))}},{headerName:F("status"),field:"status",flex:1,minWidth:100,renderCell:function(e){var t,r=e.row;return(0,A.jsx)(y.Z,{bg:null===(t=C.L[(0,Z.get)(r,"status")])||void 0===t?void 0:t.bgColor,text:F(r.status)})}}],J=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t,r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=z.startDate instanceof Date?(0,D.Z)(z.startDate)?z.startDate.toISOString():null:z.startDate,r=z.endDate instanceof Date?(0,D.Z)(z.endDate)?z.endDate.toISOString():null:z.endDate,e.next=4,(0,x.A2x)({startDate:r&&(0,Z.isNil)(t)?(0,S.Z)(new Date(z.endDate),20).toISOString():t,endDate:t&&(0,Z.isNil)(r)?(new Date).toISOString():r,status:"all"===(0,Z.get)(z,"status")?null:(0,Z.get)(z,"status"),type:"all"===(0,Z.get)(z,"type")?null:(0,Z.get)(z,"type")});case 4:a=e.sent,(0,x.SvO)(a,"".concat(F("transactions"),".xlsx"));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,A.jsxs)(s.Z,{sx:{"& .style-header":{fontSize:14,backgroundColor:"#3C3C50",height:36,fontWeight:"bold"},"& .MuiDataGrid-columnHeaders":{borderRadius:0}},children:[!r&&(0,A.jsx)(s.Z,{sx:{display:"flex",justifyContent:"space-between",p:2,pt:0},children:(0,A.jsx)(h.dz,{values:z,setValues:H,children:(0,A.jsxs)(c.Z,{alignItems:"center",sx:{flexDirection:{xs:"column",md:"row"},alignItems:{xs:"flex-start",md:"center"}},direction:"row",spacing:{xs:0,md:2},children:[(0,A.jsx)(h.Nz,{options:U,field:"status",size:"small",placeholder:F("status"),labelColor:"background.nav.background",sx:{width:200,mb:{xs:1,md:0}}}),(0,A.jsx)(h.Nz,{options:E,field:"type",size:"small",placeholder:F("type"),labelColor:"background.nav.background",sx:{width:200,mb:{xs:1,md:0}}}),(0,A.jsx)(h.am,{label:F("startDate"),field:"startDate",sx:{mb:{xs:1,md:0}}}),(0,A.jsx)(h.am,{label:F("endDate"),field:"endDate",sx:{mb:{xs:1,md:0}}}),(0,A.jsx)(d.Z,{variant:"contained",onClick:J,children:F("export")})]})})}),(0,A.jsx)(g.Z,{columns:q,rows:G,headerClassName:"style-header",cellClassName:"style-cell",hideFooter:!0,autoHeight:!0,hidePagination:T,totalPage:B,page:R,onChangePage:function(e){return V(e)},onRowClick:function(e){L.openReceiptDialog({transactionId:null===e||void 0===e?void 0:e.id,type:b.receiptTypeMapper[(0,Z.get)(e,"row.actionType")]})}})]})}},55908:function(e,t,r){r.d(t,{L:function(){return s},s:function(){return c}});var n={bg:"#22c55e"},a={bg:"#0ea5e9"},o={bg:"#FFB400"},l={bg:"#f43f5e"},i={bg:"#737373"},s={complete:{bgColor:n.bg},failed:{bgColor:l.bg},pending:{bgColor:o.bg},declined:{bgColor:l.bg}},c={success:{bgColor:n.bg},info:{bgColor:a.bg},warning:{bgColor:o.bg},error:{bgColor:l.bg},draft:{bgColor:i.bg}}}}]);