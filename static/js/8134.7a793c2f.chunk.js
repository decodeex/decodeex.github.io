"use strict";(self.webpackChunk_decode_crm_client=self.webpackChunk_decode_crm_client||[]).push([[8134],{79418:function(e,n,r){r.d(n,{Z:function(){return f}});var t=r(92680),o=r(24190),i=r(12130),a=r(31530),s=r(26521),c=(r(29367),r(28418)),l=r(18858),u=r(88658),d=(r(14674),r(98845));function f(e){var n=e.open,r=e.onClose,f=e.onResetPassword,h=e.type,x=e.ticket,m=e.clientApi,p=e.mutate,v=void 0===p?function(){}:p,g=e.closeAll,Z=(0,u.Z)().t,w=(0,a.useState)(!1),y=(0,i.Z)(w,2),b=y[0],j=y[1],C=(0,a.useState)({}),k=(0,i.Z)(C,2),S=(k[0],k[1],(0,a.useState)({})),D=(0,i.Z)(S,2),P=(D[0],D[1],(0,a.useState)(!1)),T=(0,i.Z)(P,2),N=(T[0],T[1],(0,c.Ds)().enqueueSnackbar),A=function(){var e=(0,o.Z)((0,t.Z)().mark((function e(){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,j(!0),"positions"!==h){e.next=15;break}if(g){e.next=9;break}return e.next=6,null===m||void 0===m?void 0:m.closePosition(x);case 6:n=e.sent,e.next=13;break;case 9:return console.log("aaaaa"),e.next=12,null===m||void 0===m?void 0:m.closeAll();case 12:n=e.sent;case 13:e.next=24;break;case 15:if(g){e.next=21;break}return e.next=18,null===m||void 0===m?void 0:m.cancelOrder(x);case 18:n=e.sent,e.next=24;break;case 21:return e.next=23,null===m||void 0===m?void 0:m.cancelAll();case 23:n=e.sent;case 24:return console.log(n),e.next=27,v();case 27:N(Z("positions"===h?"tradeCloseSuccess":"tradeCancelSuccess"),{variant:"success"}),j(!1),r(),e.next=36;break;case 32:e.prev=32,e.t0=e.catch(0),j(!1),"incorrectPassword"===e.t0.message?(N(Z("incorrectPassword"),{variant:"error"}),r(),f()):N(Z(e.t0.message),{variant:"error"});case 36:case"end":return e.stop()}}),e,null,[[0,32]])})));return function(){return e.apply(this,arguments)}}();return(0,d.jsx)(l.ZP,{open:n,onClose:r,save:A,saveLoading:b,children:(0,d.jsx)(s.Z,{sx:{width:400,mx:"auto",textAlign:"center"},children:(0,d.jsx)(s.Z,{sx:{my:2},children:Z(g?"positions"===h?"whetherToCloseAll":"cancelPendingAll":"positions"===h?"whetherToClose":"cancelPending")})})})}},64965:function(e,n,r){r(31530);var t=r(47006),o=r(27203),i=r(98845);n.Z=function(e){var n=e.loading;return(0,i.jsx)(t.Z,{sx:{zIndex:"9999999"},open:n,children:(0,i.jsx)(o.Z,{})})}},81452:function(e,n,r){r.d(n,{a:function(){return d}});var t=r(16487),o=r(2211),i=(r(31530),r(21077)),a=r(26521),s=r(99317),c=r(63094),l=r(98845),u=(0,i.Z)((function(e){return(0,l.jsx)(a.Z,(0,o.Z)({},e))}))((function(e){return{cursor:"pointer",textDecoration:"underline",color:e.theme.palette.text.secondary,fontSize:14}})),d=function(e){var n=e.text,r=e.showArrow,o=void 0!==r&&r,i=e.onClick,a=e.textSx;return n?(0,l.jsxs)(s.Z,{direction:"row",alignItems:"center",children:[(0,l.jsx)(u,{onClick:i,sx:(0,t.Z)(Array.isArray(a)?a:[a]),children:n}),o&&(0,l.jsx)(c.Z,{sx:{color:"text.secondary"}})]}):null}},59931:function(e,n,r){r.d(n,{Z:function(){return d}});var t=r(26521),o=(r(31530),r(11001)),i=r(21077),a=r(78096),s=r(69473),c=r(98845);(0,i.Z)(a.Z)((function(e){return{textTransform:"none",color:e.theme.palette.textSecondary,padding:12,paddingTop:8,paddingBottom:0,minHeight:0,fontWeight:300,borderRadius:4,marginTop:5,"&.Mui-selected":{}}})),(0,i.Z)(s.Z)((function(e){return{"& .MuiTabs-indicator":{borderRadius:5,backgroundColor:e.theme.palette.primary.main,height:3}}})),(0,i.Z)(a.Z)((function(e){var n=e.theme;return{textTransform:"none",color:"white",padding:12,paddingTop:8,paddingBottom:8,minHeight:0,fontWeight:"600",borderRadius:4,marginTop:6,"&.Mui-selected":{color:n.palette.secondary.main,backgroundColor:n.palette.primary.light}}})),(0,i.Z)(s.Z)((function(e){e.theme;return{"& .MuiTabs-indicator":{}}}));r(29367),r(28418),r(93001);var l=r(88658),u=r(87068);r(10083),r(30298);r(81452);function d(e){var n=(0,l.Z)().t,r=e.accountId;return(0,c.jsxs)(o.rg,{sx:{p:0},children:[(0,c.jsx)(t.Z,{sx:{p:2},children:(0,c.jsx)(o.ll,{leftComponent:n("transactions")})}),(0,c.jsx)(u.Z,{accountId:r,hideFilter:!!r,defaultType:r?"withdrawal":null})]})}},34337:function(e,n,r){r.d(n,{Z:function(){return m}});var t=r(2211),o=r(51110),i=r(70084),a=r(24786),s=r(26521),c=r(10083),l=r(30298),u=r(88658),d=r(39702),f=r(96390),h=r(3205),x=r(98845);function m(e){var n=e.login,r=(0,l.mT)({login:n}),m=r.data,p=r.totalPage,v=(r.totalItems,r.page),g=r.setPage,Z=(0,u.Z)().t,w=((0,i.Z)(),{sx:{fontSize:"12px"}});console.log("closedData",m);var y=[{headerName:Z("openTime"),field:"openTime",flex:1,renderCell:function(e){var n=e.row;return(0,x.jsx)(h.W,{item:n,children:(0,x.jsx)(a.Z,(0,t.Z)((0,t.Z)({},w),{},{children:(0,f.o0)((0,d.get)(n,"rawData.openTime"))}))})}},{headerName:Z("closeTime"),field:"closeTime",flex:1,renderCell:function(e){var n=e.row;return(0,x.jsx)(h.W,{item:n,children:(0,x.jsx)(a.Z,(0,t.Z)((0,t.Z)({},w),{},{children:(0,f.o0)((0,d.get)(n,"rawData.closeTime"))}))})}},{headerName:Z("volume"),field:"volume",flex:1,renderCell:function(e){var n=e.row;return(0,x.jsx)(h.W,{item:n,children:(0,x.jsx)(a.Z,(0,t.Z)((0,t.Z)({},w),{},{children:(0,f.DU)(n.volume)}))})}},{headerName:Z("symbol"),field:"symbol",flex:1,renderCell:function(e){var n=e.row;return(0,x.jsx)(h.W,{item:n,children:(0,x.jsx)(a.Z,(0,t.Z)((0,t.Z)({},w),{},{children:n.symbol}))})}},{headerName:Z("openPrice"),field:"startPrice",flex:1,renderCell:function(e){var n=e.row;return(0,x.jsx)(h.W,{item:n,children:(0,x.jsx)(a.Z,(0,t.Z)((0,t.Z)({},w),{},{children:(0,o.currencyFormatorOfficial)(n.startPrice,n.currency,!0)}))})}},{headerName:Z("closePrice"),field:"currentPrice",flex:1,renderCell:function(e){var n=e.row;return(0,x.jsx)(h.W,{item:n,children:(0,x.jsx)(a.Z,(0,t.Z)((0,t.Z)({},w),{},{children:(0,o.currencyFormatorOfficial)(n.currentPrice,n.currency,!0)}))})}},{headerName:Z("profit"),field:"profit",flex:1,renderCell:function(e){var n=e.row;return(0,x.jsx)(h.W,{item:n,children:(0,x.jsx)(a.Z,{sx:{color:n.profit>0?"success.main":"error.main",fontSize:12,fontWeight:800},children:(0,o.currencyFormatorOfficial)(n.profit,n.currency,!0)})})}}];return(0,x.jsx)(s.Z,{sx:{"& .style-header":{fontSize:14,backgroundColor:"#3C3C50",height:36,fontWeight:"bold"},"& .MuiDataGrid-columnHeaders":{borderRadius:0},height:"100%"},children:(0,x.jsx)(c.Z,{columns:y,rows:m,headerClassName:"style-header",cellClassName:"style-cell",hideFooter:!0,autoHeight:!0,hidePagination:!1,totalPage:p,page:v,onChangePage:function(e){return g(e)}})})}},3205:function(e,n,r){r.d(n,{W:function(){return h}});var t=r(12130),o=(r(10083),r(88658)),i=(r(30298),r(64505),r(26521)),a=r(2458),s=r(24786),c=r(99317),l=r(96390),u=(r(28418),r(31530)),d=(r(64965),r(39702)),f=r(98845),h=function(e){var n,r=e.children,h=e.item,x=(0,u.useState)(null),m=(0,t.Z)(x,2),p=m[0],v=m[1],g=(0,o.Z)().t,Z=function(){v(null)},w=Boolean(p),y=[{label:"S/L",value:(0,d.isNil)((0,d.get)(h,"stopLossing"))?"-":(0,l.DU)((0,d.get)(h,"stopLossing"))},{label:g("swap"),value:(0,d.isNil)((0,d.get)(h,"swap"))?"-":(0,l.DU)((0,d.get)(h,"swap"))},{label:"T/P",value:(0,d.isNil)((0,d.get)(h,"takeProfit"))?"-":(0,l.DU)((0,d.get)(h,"takeProfit"))},{label:g("taxes"),value:(0,d.isNil)((0,d.get)(h,"taxes"))?"-":(0,l.DU)((0,d.get)(h,"taxes"))},{label:"ID",value:(0,d.get)(h,"ticket")},{label:g("charges"),value:(0,d.isNil)((0,d.get)(h,"charges"))?"-":(0,l.DU)((0,d.get)(h,"charges"))},"1970-01-01T00:00:00.000Z"===(null===h||void 0===h||null===(n=h.rawData)||void 0===n?void 0:n.closeTime)?{}:{label:g("tradeCloseTime"),value:(0,l.o0)((0,d.get)(h,"rawData.closeTime"))}];return(0,f.jsxs)(i.Z,{onMouseEnter:function(e){v(e.currentTarget)},onMouseLeave:Z,children:[r,(0,f.jsx)(a.ZP,{id:"mouse-over-popover",sx:{pointerEvents:"none"},open:w,anchorEl:p,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:Z,disableRestoreFocus:!0,children:(0,f.jsxs)(i.Z,{px:3,py:2,sx:{width:400},children:[(0,f.jsx)(s.Z,{sx:{fontSize:12,mb:1},children:(0,d.isNil)((0,d.get)(h,"rawData.openTime"))?"-":(0,l.o0)((0,d.get)(h,"rawData.openTime"))}),(0,d.chunk)(y,2).map((function(e,n){return(0,f.jsx)(c.Z,{direction:"row",alignItems:"center",spacing:3,children:e.map((function(e,n){return(0,f.jsxs)(c.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",flex:1,children:[(0,f.jsx)(s.Z,{sx:{fontSize:12},children:(0,d.get)(e,"label")}),(0,f.jsx)(s.Z,{sx:{fontSize:12},children:(0,d.get)(e,"value")})]},n)}))},n)}))]})})]})}},49105:function(e,n,r){r.d(n,{Z:function(){return g}});var t=r(2211),o=(r(92680),r(24190),r(16487)),i=r(12130),a=r(76956),s=(r(2458),r(26521)),c=(r(24786),r(11001)),l=r(64505),u=(r(81452),r(56383)),d=r(88658),f=r(31530),h=(r(34337),r(95984)),x=(r(30298),r(28418)),m=r(64965),p=r(98845),v=["sx","hideClosed","autoHeight","transactions","home"];function g(e){var n=e.sx,r=e.hideClosed,g=void 0!==r&&r,Z=e.autoHeight,w=e.transactions,y=void 0===w||w,b=e.home,j=void 0!==b&&b,C=((0,a.Z)(e,v),(0,x.Ds)().enqueueSnackbar,(0,d.Z)().t),k=(0,f.useState)(null),S=(0,i.Z)(k,2),D=S[0],P=(S[1],(0,f.useState)(!1)),T=(0,i.Z)(P,2),N=T[0],A=(T[1],(0,f.useRef)(null)),W=(0,f.useState)("positions"),z=(0,i.Z)(W,2),F=z[0],I=z[1],O=(Boolean(D),[{name:C("forexPendingOrder"),value:"positions"},{name:C("forexOpenOrder"),value:"open"}].concat((0,o.Z)(g?[]:[{name:C("forexClosedOrder"),value:"closed"}]),(0,o.Z)(y?[{name:C("tradeTransactions"),value:"transactions"}]:[])));return(0,p.jsxs)(c.rg,{sx:(0,t.Z)({p:0},n),children:[(0,p.jsx)(s.Z,{sx:{px:2,pb:2},children:(0,p.jsx)(c.ll,{leftComponent:function(){return(0,p.jsx)(l.pn,{btns:O,onChange:function(e,n){I(e)}})}})}),"transactions"===F?(0,p.jsx)(u.Z,{}):(0,p.jsx)(h.Z,{type:F,home:j,autoHeight:Z,ref:A}),(0,p.jsx)(m.Z,{loading:N})]})}},56383:function(e,n,r){r.d(n,{Z:function(){return p}});var t=r(2211),o=r(51110),i=r(24786),a=r(26521),s=r(10083),c=r(48102),l=r(30298),u=r(54841),d=r(88658),f=r(39702),h=(r(47769),r(96390)),x=r(59876),m=r(98845);function p(e){var n=e.accountId,r=(0,l.OY)({searchText:n}),p=r.data,v=r.totalPage,g=(r.totalItems,r.page),Z=r.setPage,w=(0,d.Z)().t,y=(0,u.H)((function(e){return e})),b={sx:{fontSize:"12px"}},j=[{headerName:w("updatedAt"),field:"lastestUpdatedAt",flex:1,renderCell:function(e){var n=e.row;return(0,m.jsx)(i.Z,(0,t.Z)((0,t.Z)({},b),{},{children:(0,h.o0)(n.createdAt)}))}},{headerName:w("type"),field:"type",flex:1,renderCell:function(e){var n=e.row;return(0,m.jsx)(i.Z,(0,t.Z)((0,t.Z)({},b),{},{children:w((0,f.get)(n,"type"))}))}},{headerName:w("refTicket"),field:"refTicket",flex:1,renderCell:function(e){var n=e.row;return(0,m.jsx)(i.Z,(0,t.Z)((0,t.Z)({},b),{},{children:n.ticket}))}},{headerName:w("fromAccount"),field:"fromAccount",flex:1,renderCell:function(e){var n=e.row;return(0,m.jsx)(i.Z,(0,t.Z)((0,t.Z)({},b),{},{children:"fiat"===(0,f.get)(n,"from.service")?w("fiatSaving"):"FX ".concat((0,f.get)(n,"from.forexAccountDetail.login"))}))}},{headerName:w("fromAmount"),field:"fromAmount",flex:1,align:"right",headerAlign:"right",renderCell:function(e){var n=e.row;return(0,m.jsx)(i.Z,(0,t.Z)((0,t.Z)({},b),{},{children:(0,o.currencyFormatorOfficial)((0,f.get)(n,"from.value"),(0,f.get)(n,"from.currency",(0,f.get)(n,"from.crypto")),!0)}))}},{headerName:w("toAccount"),field:"toAccount",flex:1,renderCell:function(e){var n=e.row;return(0,m.jsx)(i.Z,(0,t.Z)((0,t.Z)({},b),{},{children:"fiat"===(0,f.get)(n,"to.service")?w("fiatSaving"):"FX ".concat((0,f.get)(n,"to.forexAccountDetail.login"))}))}},{headerName:w("toAmount"),field:"toAmount",flex:1,align:"right",headerAlign:"right",renderCell:function(e){var n=e.row;return(0,m.jsx)(i.Z,(0,t.Z)((0,t.Z)({},b),{},{children:(0,o.currencyFormatorOfficial)((0,f.get)(n,"to.value"),(0,f.get)(n,"to.currency",(0,f.get)(n,"to.crypto")),!0)}))}},{headerName:w("status"),field:"status",flex:1,renderCell:function(e){var n,r=e.row;return(0,m.jsx)(c.Z,{bg:null===(n=x.L[(0,f.get)(r,"status")])||void 0===n?void 0:n.bgColor,text:w(r.status)})}}];return(0,m.jsx)(a.Z,{sx:{"& .style-header":{fontSize:14,backgroundColor:"#3C3C50",height:36,fontWeight:"bold"},"& .MuiDataGrid-columnHeaders":{borderRadius:0}},children:(0,m.jsx)(s.Z,{columns:j,rows:p,headerClassName:"style-header",cellClassName:"style-cell",hideFooter:!0,autoHeight:!0,hidePagination:!1,totalPage:v,page:g,onChangePage:function(e){return Z(e)},onRowClick:function(e){return y.openReceiptDialog({forexTransactionId:null===e||void 0===e?void 0:e.id,type:"transfer"})}})})}},66133:function(e,n,r){r.d(n,{Z:function(){return f}});var t=r(12130),o=r(31530),i=r(26521),a=(r(39702),r(11001)),s=r(64505),c=(r(81452),r(10083),r(88658)),l=(r(30298),r(43248),r(80215),r(96390),r(51110),r(98845));r(95984);var u=r(49105),d=(r(59931),r(87068));function f(){var e=(0,c.Z)().t,n=[{name:e("Today's trades"),value:"todaysTrades"},{name:e("Latest transactions"),value:"transactions"}],r=(0,o.useState)("todaysTrades"),f=(0,t.Z)(r,2),h=f[0],x=f[1];return(0,l.jsx)(i.Z,{sx:{flex:1},children:(0,l.jsxs)(a.rg,{sx:{p:0,"& .style-header":{fontSize:14,backgroundColor:"#3C3C50",height:36,fontWeight:"bold"},"& .style-cell":{fontSize:14,height:36},"& .MuiDataGrid-columnHeaders":{borderRadius:0},overflow:"auto",zIndex:"999",height:"100%",display:"flex",flexDirection:"column"},children:[(0,l.jsx)(i.Z,{sx:{px:2,pt:2,pb:1},children:(0,l.jsx)(s.pn,{btns:n,onChange:function(e,n){x(e)}})}),"todaysTrades"===h?(0,l.jsx)(u.Z,{sx:{height:"100%",display:"flex",flexDirection:"column"},transactions:!1,home:!0}):(0,l.jsx)(d.Z,{hideFilter:!0,pageSize:20,hidePagination:!0})]})})}},95984:function(e,n,r){r.d(n,{Z:function(){return B}});var t=r(16487),o=r(92680),i=r(24190),a=r(2211),s=r(12130),c=r(10083),l=r(88658),u=r(30298),d=r(64505),f=r(24786),h=r(26521),x=r(2458),m=r(3019),p=r(96390),v=r(28418),g=r(31530),Z=r(64965),w=r(39702),y=r(3205),b=r(51110),j=r(14674),C=r(79418),k=r(87749),S=r(43248),D=r(95434),P=r(68468),T=r(88851),N=r(82177),A=P.url.join("wss://mt4-api.decodeex.com/","/"),W=(0,N.ZP)((function(e,n){return{response:[]}})),z=new T.Z(A,(function(e){var n=JSON.parse(e.data).map((function(e){return{symbol:e.s,contractSize:e.n,currency:e.c,digits:e.d}})),r=(0,w.keyBy)(n,"symbol");W.setState({response:n,KVResponse:r})})),F=function(e){var n=(0,g.useRef)(!1),r=(0,g.useRef)([]),t=(0,g.useId)();(0,w.isNil)(e)||0===e.length?(n.current=!1,r.current=[]):n.current&&r.current===e||(n.current=!0,r.current=e,z.send_({c:"symbol",ls:e,r:t},!0))},I=r(48466),O=(0,N.ZP)((function(e,n){return{response:{}}})),R=P.url.join("wss://mt4-api.decodeex.com/","/"),H=new T.Z(R,(function(e){var n=JSON.parse(e.data),r=n.s,t=n.b,o=n.a,i=n.o;n.h,n.l,n.c,n.v;null==i&&O.setState({response:(0,a.Z)((0,a.Z)({},O.getState().response),{},(0,I.Z)({},r,(0,a.Z)((0,a.Z)({},O.getState().response[r]||{}),{},(0,I.Z)({},"std",{bid:t,ask:o}),W.getState().KVResponse[r]||{})))})})),M=function(){var e=(0,g.useMemo)((function(){return{watch:function(){var e=(0,i.Z)((0,o.Z)().mark((function e(n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H.send_({c:"subm",ls:n},!0));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),unwatch:function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H.send_({c:"unsubm"},!0));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),watchQuote:function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H.send_({c:"subm"},!0));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),unwatchQuote:function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H.send_({c:"unsubm"},!0));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),watchHist:function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H.send_({c:"ohlc"},!0));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),unwatchHist:function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H.send_({c:"unohlc"},!0));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}),[]);return e},_=function(e,n,r,t,o,i){var a=r+n,s=t[a],c=(0,w.get)(s,"std");return null!=s&&c?(0===o?e/c.bid:e/c.ask).toFixed(2):(s=t[a=n+r],c=(0,w.get)(s,"std"),null!=s&&c?(0===o?e*c.bid:e*c.ask).toFixed(2):null)},L=r(98845),E=(0,g.memo)((function(e){var n=e.item,r=(0,g.useRef)();return(0,g.useEffect)((function(){var e=O.subscribe((function(e){var t=e.response[n.symbol];if(t){var o=t.std;r.current&&o&&(r.current.innerHTML=(0,b.currencyFormatorWithDecimal)([0,2,4].includes(n.rawData.cmd)?o.bid:o.ask,t.currency,t.digits,!0))}}));return function(){e()}}),[n.symbol]),(0,L.jsx)(f.Z,{sx:{fontSize:"12px"},ref:r,children:(0,b.currencyFormatorWithDecimal)(n.currentPrice,n.currency,n.decimal,!0)})}),(function(e,n){var r,t;return(null===e||void 0===e||null===(r=e.item)||void 0===r?void 0:r.symbol)===(null===n||void 0===n||null===(t=n.item)||void 0===t?void 0:t.symbol)})),U=(0,g.memo)((function(e){var n=e.item,r=(0,g.useRef)();return(0,g.useEffect)((function(){var e=W.subscribe((function(e){e.response;var t=(0,w.find)(e.response,(function(e){return e.symbol===n.symbol}));t&&r.current&&(r.current.innerHTML=(0,b.currencyFormatorWithDecimal)(n.startPrice,t.currency,t.digits,!0))}));return function(){e()}}),[n.symbol]),(0,L.jsx)(f.Z,{sx:{fontSize:"12px"},ref:r,children:(0,b.currencyFormatorWithDecimal)(n.startPrice,n.currency,n.decimal,!0)})}),(function(e,n){var r,t;return(null===e||void 0===e||null===(r=e.item)||void 0===r?void 0:r.symbol)===(null===n||void 0===n||null===(t=n.item)||void 0===t?void 0:t.symbol)})),q=(0,g.memo)((function(e){var n,r=e.item,t=(0,g.useRef)(),o=(0,D.F)().getStockColorValue;return(0,g.useEffect)((function(){var e=O.subscribe((function(e){var n=e.response,i=n[r.symbol];if(i){var a=i.std;if(a){var s,c,l=function(e,n,r,t,o,i,a){var s=e.cmd,c=e.volume,l=e.openPrice,u=(e.accountGroupType,c/100*t),d=0;if(d=0===s?((n-l)*u).toFixed(2):((l-r)*u).toFixed(2),o!==i){var f=_(d,o,i,a,s);return null!=f?f:null==(f=_(d,o,"USD",a,s))||null==(f=_(f,"USD",i,a,s))?0:f}return d}(r.rawData,a.bid,a.ask,i.contractSize,i.currency,null===(s=r.rawData)||void 0===s?void 0:s.accountCurrency,n);t.current.innerHTML=(0,b.currencyFormatorWithDecimal)(l,null===(c=r.rawData)||void 0===c?void 0:c.accountCurrency,i.digits,!0),t.current.style.color=o(l)}}}));return function(){e()}}),[r.symbol]),(0,L.jsx)(f.Z,{sx:{fontSize:"12px",fontWeight:700,color:o(r.profit)},ref:t,children:(0,b.currencyFormatorWithDecimal)(r.profit,null===(n=r.rawData)||void 0===n?void 0:n.accountCurrency,r.decimal,!0)})}),(function(e,n){var r,t;return(null===e||void 0===e||null===(r=e.item)||void 0===r?void 0:r.symbol)===(null===n||void 0===n||null===(t=n.item)||void 0===t?void 0:t.symbol)})),B=(0,g.forwardRef)((function(e,n){var r=e.type,b=e.autoHeight,P=void 0!==b&&b,T=e.login,N=e.home,A=void 0!==N&&N,z=e.hidePagination,I=void 0===z||z,O=e.closeAll,R=void 0!==O&&O,H=e.setCloseAll,_=void 0===H?function(){}:H,B=e.forexAccountId,V=e.setDisabled,G=void 0===V?function(){}:V,J=(0,l.Z)().t,K=(0,v.Ds)().enqueueSnackbar,Q=(0,g.useState)(!1),X=(0,s.Z)(Q,2),Y=X[0],$=X[1],ee=(0,g.useState)(null),ne=(0,s.Z)(ee,2),re=ne[0],te=ne[1],oe=(0,g.useState)(T),ie=(0,s.Z)(oe,2),ae=ie[0],se=ie[1],ce=(0,g.useState)(null),le=(0,s.Z)(ce,2),ue=le[0],de=le[1],fe=(0,g.useState)(!1),he=(0,s.Z)(fe,2),xe=he[0],me=he[1],pe=(0,g.useState)(!1),ve=(0,s.Z)(pe,2),ge=ve[0],Ze=ve[1],we=(0,g.useState)({}),ye=(0,s.Z)(we,2),be=ye[0],je=ye[1],Ce=((0,S.Z)().user,(0,D.F)().getStockColorValue,(0,u.mx)((0,a.Z)({type:r,login:T},A&&"closed"===r?{startDate:(0,p.xA)(new Date((new Date).getTime()-5184e5).toISOString()),endDate:(0,p.xA)((new Date).toISOString())}:{}))),ke=Ce.data,Se=Ce.mutate,De=Ce.isValidating,Pe=(0,u.Oh)({accountId:ue||B}).data;!function(e){F(e);var n=M();(0,g.useEffect)((function(){if(!(0,w.isNil)(e)&&0!==e.length){var r=W.subscribe((function(e){var r=e.response;console.log("watch symbols",r.map((function(e){return e.symbol}))),n.watch(r.map((function(e){return e.symbol})))}));return function(){r&&r(),n.unwatch()}}n.unwatch()}),[e])}("closed"===r?null:(0,w.uniq)(ke.map((function(e){return e.symbol})))),(0,g.useEffect)((function(){R&&Ze(!0)}),[R]),(0,g.useEffect)((function(){console.log(ke),ke.length>0?G(!1):G(!0)}),[De]);var Te=(0,j.Z)(null===Pe||void 0===Pe?void 0:Pe.login,null===Pe||void 0===Pe?void 0:Pe.password,null===Pe||void 0===Pe?void 0:Pe.groupType),Ne=function(){te(null)};(0,g.useImperativeHandle)(n,(function(){return{resetValue:function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),firstTrade:null===ke||void 0===ke?void 0:ke[0]}}));var Ae=Boolean(re),We=Ae?"simple-popover":void 0,ze=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $(!0),e.prev=1,e.next=4,(0,u.Hq)(n);case 4:return e.next=6,Se();case 6:K(J("updateSuccess"),{variant:"success"}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),K("".concat(J("updateFailed"),": ").concat(JSON.parse(e.t0.message).error.message),{variant:"error"});case 13:$(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(n){return e.apply(this,arguments)}}(),Fe=[{headerName:J("login"),field:"login",flex:1,minWidth:80,renderCell:function(e){var n=e.row;return(0,L.jsx)(y.W,{item:n,children:(0,L.jsx)(f.Z,{sx:{fontSize:"12px"},children:(0,w.get)(n,"rawData.login")})})}},{headerName:J("volume"),field:"volume",flex:.5,minWidth:60,renderCell:function(e){var n=e.row;return(0,L.jsx)(y.W,{item:n,children:(0,L.jsx)(f.Z,{sx:{fontSize:"12px"},children:(0,p.DU)(n.lot)})})}},{headerName:J("symbol"),field:"symbol",flex:.5,minWidth:75,renderCell:function(e){var n=e.row;return(0,L.jsx)(y.W,{item:n,children:(0,L.jsx)(f.Z,{sx:{fontSize:"12px"},children:(0,w.get)(n,"displaySymbol")})})}},{headerName:J("type"),field:"type",flex:.5,minWidth:60,renderCell:function(e){var n=e.row;return(0,L.jsx)(y.W,{item:n,children:(0,L.jsx)(f.Z,{sx:{fontSize:"12px"},children:(0,w.get)(n,"orderCommand")})})}},{headerName:J("open"===r?"forexPendingOpenPrice":"forexOpenPrice"),field:"openPrice",minWidth:110,flex:1,align:"right",headerAlign:"right",renderCell:function(e){var n=e.row;return(0,L.jsx)(y.W,{item:n,children:(0,L.jsx)(U,{item:n})})}},{headerName:J("closed"===r?"forexClosedClosePrice":"forexNormalClosePrice"),field:"closePrice",minWidth:110,flex:1,align:"right",headerAlign:"right",renderCell:function(e){var n=e.row;return(0,L.jsx)(y.W,{item:n,children:(0,L.jsx)(E,{item:n})})}},{headerName:J("tradeCloseTime"),field:"closeTime",flex:1,minWidth:130,hide:"closed"!==r,renderCell:function(e){var n=e.row;return(0,L.jsxs)(y.W,{item:n,children:[(0,L.jsx)(f.Z,{sx:{fontSize:"12px",textOverflow:"ellipsis",overflow:"hidden",width:"100%"},children:(0,p.o0)(n.rawData.closeTime)})," "]})}}].concat((0,t.Z)("open"===r?[]:[{headerName:J("profit"),field:"profit",flex:1,minWidth:100,align:"right",headerAlign:"right",renderCell:function(e){var n=e.row;return(0,L.jsx)(y.W,{item:n,children:(0,L.jsx)(q,{item:n})})}}]),[{headerName:J("actions"),field:"action",flex:1,minWidth:120,hide:"closed"===r,renderCell:function(e){var n=e.row;return(0,L.jsx)(h.Z,{children:"closed"!==r&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(d.sq,{sx:{backgroundColor:"#505064",p:0,py:.3,px:1,alignItems:"center"},onClick:function(e){je(n),se(n.login),de(n.rawData.accountId),n.hasPassword?(Ze(!0),se(n.rawData.accountId)):(se(n.rawData.accountId),me(!0))},children:[(0,L.jsx)(h.Z,{sx:{backgroundColor:"primary.rise",height:15,width:15,borderRadius:"50%",display:"flex",alignItems:"center",justifyItems:"center",textAlign:"center"},children:"positions"!==r?(0,L.jsx)(m.Z,{fontSize:"18px",sx:{color:"#fff"}}):(0,L.jsx)("img",{src:"/assets/icons/shut-down-line.svg",style:{width:"12px",position:"relative",left:"1px"}})}),(0,L.jsx)(f.Z,{sx:{fontSize:"12px",color:"primary.rise",ml:1},children:J("positions"===r?"positionClose":"cancel")})]}),(0,L.jsx)(x.ZP,{id:We,open:Ae&be.ticket===n.ticket,anchorEl:re,onClose:Ne,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,L.jsxs)(h.Z,{sx:{width:200,textAlign:"center",py:1},children:[(0,L.jsx)(f.Z,{sx:{mb:1},children:J("positions"===r?"whetherToClose":"cancelPending")}),(0,L.jsx)(d.sq,{sx:{backgroundColor:"#505064",p:0,py:.3,px:1,alignItems:"center",mr:1},onClick:Ne,children:J("cancel")}),(0,L.jsx)(d.sq,{sx:{backgroundColor:"#505064",p:0,py:.3,px:1,alignItems:"center"},onClick:(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==n.rawData.hasPassword){e.next=5;break}Ne(),me(!0),e.next=8;break;case 5:return Ne(),e.next=8,ze({ticket:n.ticket,type:"positions"===r?"positions":"open",login:n.login});case 8:case"end":return e.stop()}}),e)}))),children:J("confirm")})]})})]})})}}]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(h.Z,{sx:{"& .style-header":{fontSize:14,backgroundColor:"#3C3C50",height:36,fontWeight:"bold"},"& .MuiDataGrid-columnHeaders":{borderRadius:0},height:"100%"},children:[(0,L.jsx)(c.Z,{columns:Fe,rows:ke,headerClassName:"style-header",cellClassName:"style-cell",hideFooter:!0,hidePagination:I,autoHeight:P}),(0,L.jsx)(C.Z,{open:ge,onClose:function(){Ze(!1),_(!1)},onResetPassword:function(){return me(!0)},accountLogin:null===Pe||void 0===Pe?void 0:Pe.login,password:null===Pe||void 0===Pe?void 0:Pe.password,groupType:null===Pe||void 0===Pe?void 0:Pe.groupType,type:r,ticket:be.ticket,clientApi:Te,mutate:Se,closeAll:R}),(0,L.jsx)(k.Z,{open:xe,onClose:function(){return me(!1)},forexAccountId:ae,onSuccess:function(){var e=(0,i.Z)((0,o.Z)().mark((function e(n){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("---------------------"),"positions"!==r){e.next=13;break}if(R){e.next=9;break}return e.next=5,null===n||void 0===n?void 0:n.closePosition(null===be||void 0===be?void 0:be.ticket);case 5:t=e.sent,console.log(t),e.next=11;break;case 9:return e.next=11,null===n||void 0===n?void 0:n.closeAll();case 11:case 16:e.next=20;break;case 13:if(R){e.next=18;break}return e.next=16,null===n||void 0===n?void 0:n.cancelOrder(null===be||void 0===be?void 0:be.ticket);case 18:return e.next=20,null===n||void 0===n?void 0:n.cancelAll();case 20:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()})]}),(0,L.jsx)(Z.Z,{loading:Y})]})}))},25506:function(e,n,r){var t="/api/ws";new(r(88465).dK)("https://crm-api.decodeex.com",{path:t.endsWith("/")?t:"/api/ws/",reconnectionDelayMax:1e4,transports:["websocket"],autoConnect:!1})}}]);