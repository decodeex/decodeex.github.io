"use strict";(self.webpackChunk_decode_crm_client=self.webpackChunk_decode_crm_client||[]).push([[8356],{67444:function(e,n,r){r.d(n,{Z:function(){return f}});var t=r(92680),o=r(24190),i=r(12130),a=r(77317),s=r(40911),l=(r(66841),r(15898)),c=r(25076),u=r(55685),d=(r(21719),r(40860));function f(e){var n=e.open,r=e.onClose,f=e.onResetPassword,x=e.type,h=e.ticket,m=e.clientApi,p=e.mutate,v=void 0===p?function(){}:p,g=e.closeAll,Z=(0,u.Z)().t,y=(0,a.useState)(!1),w=(0,i.Z)(y,2),b=w[0],j=w[1],C=(0,a.useState)({}),S=(0,i.Z)(C,2),k=(S[0],S[1],(0,a.useState)({})),D=(0,i.Z)(k,2),T=(D[0],D[1],(0,a.useState)(!1)),P=(0,i.Z)(T,2),N=(P[0],P[1],(0,l.Ds)().enqueueSnackbar),A=function(){var e=(0,o.Z)((0,t.Z)().mark((function e(){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,j(!0),"positions"!==x){e.next=15;break}if(g){e.next=9;break}return e.next=6,null===m||void 0===m?void 0:m.closePosition(h);case 6:n=e.sent,e.next=13;break;case 9:return console.log("aaaaa"),e.next=12,null===m||void 0===m?void 0:m.closeAll();case 12:n=e.sent;case 13:e.next=24;break;case 15:if(g){e.next=21;break}return e.next=18,null===m||void 0===m?void 0:m.cancelOrder(h);case 18:n=e.sent,e.next=24;break;case 21:return e.next=23,null===m||void 0===m?void 0:m.cancelAll();case 23:n=e.sent;case 24:return console.log(n),e.next=27,v();case 27:N(Z("positions"===x?"tradeCloseSuccess":"tradeCancelSuccess"),{variant:"success"}),j(!1),r(),e.next=36;break;case 32:e.prev=32,e.t0=e.catch(0),j(!1),"incorrectPassword"===e.t0.message?(N(Z("incorrectPassword"),{variant:"error"}),r(),f()):N(Z(e.t0.message),{variant:"error"});case 36:case"end":return e.stop()}}),e,null,[[0,32]])})));return function(){return e.apply(this,arguments)}}();return(0,d.jsx)(c.ZP,{open:n,onClose:r,save:A,saveLoading:b,children:(0,d.jsx)(s.Z,{sx:{width:400,mx:"auto",textAlign:"center"},children:(0,d.jsx)(s.Z,{sx:{my:2},children:Z(g?"positions"===x?"whetherToCloseAll":"cancelPendingAll":"positions"===x?"whetherToClose":"cancelPending")})})})}},81898:function(e,n,r){r(77317);var t=r(52228),o=r(63158),i=r(40860);n.Z=function(e){var n=e.loading;return(0,i.jsx)(t.Z,{sx:{zIndex:"9999999"},open:n,children:(0,i.jsx)(o.Z,{})})}},41222:function(e,n,r){r.d(n,{a:function(){return d}});var t=r(16487),o=r(2211),i=(r(77317),r(58056)),a=r(40911),s=r(38263),l=r(29437),c=r(40860),u=(0,i.Z)((function(e){return(0,c.jsx)(a.Z,(0,o.Z)({},e))}))((function(e){return{cursor:"pointer",textDecoration:"underline",color:e.theme.palette.text.secondary,fontSize:14}})),d=function(e){var n=e.text,r=e.showArrow,o=void 0!==r&&r,i=e.onClick,a=e.textSx;return n?(0,c.jsxs)(s.Z,{direction:"row",alignItems:"center",children:[(0,c.jsx)(u,{onClick:i,sx:(0,t.Z)(Array.isArray(a)?a:[a]),children:n}),o&&(0,c.jsx)(l.Z,{sx:{color:"text.secondary"}})]}):null}},56952:function(e,n,r){r.d(n,{Z:function(){return d}});var t=r(40911),o=(r(77317),r(45339)),i=r(58056),a=r(82613),s=r(67114),l=r(40860);(0,i.Z)(a.Z)((function(e){return{textTransform:"none",color:e.theme.palette.textSecondary,padding:12,paddingTop:8,paddingBottom:0,minHeight:0,fontWeight:300,borderRadius:4,marginTop:5,"&.Mui-selected":{}}})),(0,i.Z)(s.Z)((function(e){return{"& .MuiTabs-indicator":{borderRadius:5,backgroundColor:e.theme.palette.primary.main,height:3}}})),(0,i.Z)(a.Z)((function(e){var n=e.theme;return{textTransform:"none",color:"white",padding:12,paddingTop:8,paddingBottom:8,minHeight:0,fontWeight:"600",borderRadius:4,marginTop:6,"&.Mui-selected":{color:n.palette.secondary.main,backgroundColor:n.palette.primary.light}}})),(0,i.Z)(s.Z)((function(e){e.theme;return{"& .MuiTabs-indicator":{}}}));r(66841),r(15898),r(96262);var c=r(55685),u=r(51554);r(70999),r(63996);r(41222);function d(e){var n=(0,c.Z)().t,r=e.accountId;return(0,l.jsxs)(o.rg,{sx:{p:0},children:[(0,l.jsx)(t.Z,{sx:{p:2},children:(0,l.jsx)(o.ll,{leftComponent:n("transactions")})}),(0,l.jsx)(u.Z,{accountId:r,hideFilter:!!r,defaultType:r?"withdrawal":null})]})}},32709:function(e,n,r){r.d(n,{Z:function(){return m}});var t=r(2211),o=r(90669),i=r(25579),a=r(45771),s=r(40911),l=r(70999),c=r(63996),u=r(55685),d=r(40165),f=r(74114),x=r(62842),h=r(40860);function m(e){var n=e.login,r=(0,c.mT)({login:n}),m=r.data,p=r.totalPage,v=(r.totalItems,r.page),g=r.setPage,Z=(0,u.Z)().t,y=((0,i.Z)(),{sx:{fontSize:"12px"}});console.log("closedData",m);var w=[{headerName:Z("openTime"),field:"openTime",flex:1,renderCell:function(e){var n=e.row;return(0,h.jsx)(x.W,{item:n,children:(0,h.jsx)(a.Z,(0,t.Z)((0,t.Z)({},y),{},{children:(0,f.o0)((0,d.get)(n,"rawData.openTime"))}))})}},{headerName:Z("closeTime"),field:"closeTime",flex:1,renderCell:function(e){var n=e.row;return(0,h.jsx)(x.W,{item:n,children:(0,h.jsx)(a.Z,(0,t.Z)((0,t.Z)({},y),{},{children:(0,f.o0)((0,d.get)(n,"rawData.closeTime"))}))})}},{headerName:Z("volume"),field:"volume",flex:1,renderCell:function(e){var n=e.row;return(0,h.jsx)(x.W,{item:n,children:(0,h.jsx)(a.Z,(0,t.Z)((0,t.Z)({},y),{},{children:(0,f.DU)(n.volume)}))})}},{headerName:Z("symbol"),field:"symbol",flex:1,renderCell:function(e){var n=e.row;return(0,h.jsx)(x.W,{item:n,children:(0,h.jsx)(a.Z,(0,t.Z)((0,t.Z)({},y),{},{children:n.symbol}))})}},{headerName:Z("openPrice"),field:"startPrice",flex:1,renderCell:function(e){var n=e.row;return(0,h.jsx)(x.W,{item:n,children:(0,h.jsx)(a.Z,(0,t.Z)((0,t.Z)({},y),{},{children:(0,o.currencyFormatorOfficial)(n.startPrice,n.currency,!0)}))})}},{headerName:Z("closePrice"),field:"currentPrice",flex:1,renderCell:function(e){var n=e.row;return(0,h.jsx)(x.W,{item:n,children:(0,h.jsx)(a.Z,(0,t.Z)((0,t.Z)({},y),{},{children:(0,o.currencyFormatorOfficial)(n.currentPrice,n.currency,!0)}))})}},{headerName:Z("profit"),field:"profit",flex:1,renderCell:function(e){var n=e.row;return(0,h.jsx)(x.W,{item:n,children:(0,h.jsx)(a.Z,{sx:{color:n.profit>0?"success.main":"error.main",fontSize:12,fontWeight:800},children:(0,o.currencyFormatorOfficial)(n.profit,n.currency,!0)})})}}];return(0,h.jsx)(s.Z,{sx:{"& .style-header":{fontSize:14,backgroundColor:"#3C3C50",height:36,fontWeight:"bold"},"& .MuiDataGrid-columnHeaders":{borderRadius:0},height:"100%"},children:(0,h.jsx)(l.Z,{columns:w,rows:m,headerClassName:"style-header",cellClassName:"style-cell",hideFooter:!0,autoHeight:!0,hidePagination:!1,totalPage:p,page:v,onChangePage:function(e){return g(e)}})})}},62842:function(e,n,r){r.d(n,{W:function(){return x}});var t=r(12130),o=(r(70999),r(55685)),i=(r(63996),r(43749),r(40911)),a=r(42393),s=r(45771),l=r(38263),c=r(74114),u=(r(15898),r(77317)),d=(r(81898),r(40165)),f=r(40860),x=function(e){var n,r=e.children,x=e.item,h=(0,u.useState)(null),m=(0,t.Z)(h,2),p=m[0],v=m[1],g=(0,o.Z)().t,Z=function(){v(null)},y=Boolean(p),w=[{label:"S/L",value:(0,d.isNil)((0,d.get)(x,"stopLossing"))?"-":(0,c.DU)((0,d.get)(x,"stopLossing"))},{label:g("swap"),value:(0,d.isNil)((0,d.get)(x,"swap"))?"-":(0,c.DU)((0,d.get)(x,"swap"))},{label:"T/P",value:(0,d.isNil)((0,d.get)(x,"takeProfit"))?"-":(0,c.DU)((0,d.get)(x,"takeProfit"))},{label:g("taxes"),value:(0,d.isNil)((0,d.get)(x,"taxes"))?"-":(0,c.DU)((0,d.get)(x,"taxes"))},{label:"ID",value:(0,d.get)(x,"ticket")},{label:g("charges"),value:(0,d.isNil)((0,d.get)(x,"charges"))?"-":(0,c.DU)((0,d.get)(x,"charges"))},"1970-01-01T00:00:00.000Z"===(null===x||void 0===x||null===(n=x.rawData)||void 0===n?void 0:n.closeTime)?{}:{label:g("tradeCloseTime"),value:(0,c.o0)((0,d.get)(x,"rawData.closeTime"))}];return(0,f.jsxs)(i.Z,{onMouseEnter:function(e){v(e.currentTarget)},onMouseLeave:Z,children:[r,(0,f.jsx)(a.ZP,{id:"mouse-over-popover",sx:{pointerEvents:"none"},open:y,anchorEl:p,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:Z,disableRestoreFocus:!0,children:(0,f.jsxs)(i.Z,{px:3,py:2,sx:{width:400},children:[(0,f.jsx)(s.Z,{sx:{fontSize:12,mb:1},children:(0,d.isNil)((0,d.get)(x,"rawData.openTime"))?"-":(0,c.o0)((0,d.get)(x,"rawData.openTime"))}),(0,d.chunk)(w,2).map((function(e,n){return(0,f.jsx)(l.Z,{direction:"row",alignItems:"center",spacing:3,children:e.map((function(e,n){return(0,f.jsxs)(l.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",flex:1,children:[(0,f.jsx)(s.Z,{sx:{fontSize:12},children:(0,d.get)(e,"label")}),(0,f.jsx)(s.Z,{sx:{fontSize:12},children:(0,d.get)(e,"value")})]},n)}))},n)}))]})})]})}},69143:function(e,n,r){r.d(n,{Z:function(){return g}});var t=r(2211),o=(r(92680),r(24190),r(16487)),i=r(12130),a=r(76956),s=(r(42393),r(40911)),l=(r(45771),r(45339)),c=r(43749),u=(r(41222),r(62742)),d=r(55685),f=r(77317),x=(r(32709),r(97424)),h=(r(63996),r(15898)),m=r(81898),p=r(40860),v=["sx","hideClosed","autoHeight","transactions","home"];function g(e){var n=e.sx,r=e.hideClosed,g=void 0!==r&&r,Z=e.autoHeight,y=e.transactions,w=void 0===y||y,b=e.home,j=void 0!==b&&b,C=((0,a.Z)(e,v),(0,h.Ds)().enqueueSnackbar,(0,d.Z)().t),S=(0,f.useState)(null),k=(0,i.Z)(S,2),D=k[0],T=(k[1],(0,f.useState)(!1)),P=(0,i.Z)(T,2),N=P[0],A=(P[1],(0,f.useState)(!1)),W=(0,i.Z)(A,2),z=W[0],F=(W[1],(0,f.useRef)(null)),I=(0,f.useState)("positions"),O=(0,i.Z)(I,2),R=O[0],H=O[1],M=(Boolean(D),[{name:C("forexPendingOrder"),value:"positions"},{name:C("forexOpenOrder"),value:"open"}].concat((0,o.Z)(g?[]:[{name:C("forexClosedOrder"),value:"closed"}]),(0,o.Z)(w?[{name:C("tradeTransactions"),value:"transactions"}]:[])));return(0,p.jsxs)(l.rg,{sx:(0,t.Z)({p:0},n),children:[(0,p.jsx)(s.Z,{sx:{px:2,pb:2},children:(0,p.jsx)(l.ll,{leftComponent:function(){return(0,p.jsx)(c.pn,{btns:M,onChange:function(e,n){H(e)}})}})}),"transactions"===R?(0,p.jsx)(u.Z,{}):(0,p.jsx)(x.Z,{type:R,home:j,autoHeight:Z,ref:F,closeAll:z}),(0,p.jsx)(m.Z,{loading:N})]})}},62742:function(e,n,r){r.d(n,{Z:function(){return p}});var t=r(2211),o=r(90669),i=r(45771),a=r(40911),s=r(70999),l=r(26354),c=r(63996),u=r(28792),d=r(55685),f=r(40165),x=(r(22061),r(74114)),h=r(26856),m=r(40860);function p(e){var n=e.accountId,r=(0,c.OY)({searchText:n}),p=r.data,v=r.totalPage,g=(r.totalItems,r.page),Z=r.setPage,y=(0,d.Z)().t,w=(0,u.H)((function(e){return e})),b={sx:{fontSize:"12px"}},j=[{headerName:y("updatedAt"),field:"lastestUpdatedAt",flex:1,renderCell:function(e){var n=e.row;return(0,m.jsx)(i.Z,(0,t.Z)((0,t.Z)({},b),{},{children:(0,x.o0)(n.createdAt)}))}},{headerName:y("type"),field:"type",flex:1,renderCell:function(e){var n=e.row;return(0,m.jsx)(i.Z,(0,t.Z)((0,t.Z)({},b),{},{children:y((0,f.get)(n,"type"))}))}},{headerName:y("refTicket"),field:"refTicket",flex:1,renderCell:function(e){var n=e.row;return(0,m.jsx)(i.Z,(0,t.Z)((0,t.Z)({},b),{},{children:n.ticket}))}},{headerName:y("fromAccount"),field:"fromAccount",flex:1,renderCell:function(e){var n=e.row;return(0,m.jsx)(i.Z,(0,t.Z)((0,t.Z)({},b),{},{children:"fiat"===(0,f.get)(n,"from.service")?y("fiatSaving"):"FX ".concat((0,f.get)(n,"from.forexAccountDetail.login"))}))}},{headerName:y("fromAmount"),field:"fromAmount",flex:1,align:"right",headerAlign:"right",renderCell:function(e){var n=e.row;return(0,m.jsx)(i.Z,(0,t.Z)((0,t.Z)({},b),{},{children:(0,o.currencyFormatorOfficial)((0,f.get)(n,"from.value"),(0,f.get)(n,"from.currency",(0,f.get)(n,"from.crypto")),!0)}))}},{headerName:y("toAccount"),field:"toAccount",flex:1,renderCell:function(e){var n=e.row;return(0,m.jsx)(i.Z,(0,t.Z)((0,t.Z)({},b),{},{children:"fiat"===(0,f.get)(n,"to.service")?y("fiatSaving"):"FX ".concat((0,f.get)(n,"to.forexAccountDetail.login"))}))}},{headerName:y("toAmount"),field:"toAmount",flex:1,align:"right",headerAlign:"right",renderCell:function(e){var n=e.row;return(0,m.jsx)(i.Z,(0,t.Z)((0,t.Z)({},b),{},{children:(0,o.currencyFormatorOfficial)((0,f.get)(n,"to.value"),(0,f.get)(n,"to.currency",(0,f.get)(n,"to.crypto")),!0)}))}},{headerName:y("status"),field:"status",flex:1,renderCell:function(e){var n,r=e.row;return(0,m.jsx)(l.Z,{bg:null===(n=h.L[(0,f.get)(r,"status")])||void 0===n?void 0:n.bgColor,text:y(r.status)})}}];return(0,m.jsx)(a.Z,{sx:{"& .style-header":{fontSize:14,backgroundColor:"#3C3C50",height:36,fontWeight:"bold"},"& .MuiDataGrid-columnHeaders":{borderRadius:0}},children:(0,m.jsx)(s.Z,{columns:j,rows:p,headerClassName:"style-header",cellClassName:"style-cell",hideFooter:!0,autoHeight:!0,hidePagination:!1,totalPage:v,page:g,onChangePage:function(e){return Z(e)},onRowClick:function(e){return w.openReceiptDialog({forexTransactionId:null===e||void 0===e?void 0:e.id,type:"transfer"})}})})}},93554:function(e,n,r){r.d(n,{Z:function(){return f}});var t=r(12130),o=r(77317),i=r(40911),a=(r(40165),r(45339)),s=r(43749),l=(r(41222),r(70999),r(55685)),c=(r(63996),r(50963),r(25757),r(74114),r(90669),r(40860));r(97424);var u=r(69143),d=(r(56952),r(51554));function f(){var e=(0,l.Z)().t,n=[{name:e("Today's trades"),value:"todaysTrades"},{name:e("Latest transactions"),value:"transactions"}],r=(0,o.useState)("todaysTrades"),f=(0,t.Z)(r,2),x=f[0],h=f[1];return(0,c.jsx)(i.Z,{sx:{flex:1},children:(0,c.jsxs)(a.rg,{sx:{p:0,"& .style-header":{fontSize:14,backgroundColor:"#3C3C50",height:36,fontWeight:"bold"},"& .style-cell":{fontSize:14,height:36},"& .MuiDataGrid-columnHeaders":{borderRadius:0},overflow:"auto",zIndex:"999",height:"100%",display:"flex",flexDirection:"column"},children:[(0,c.jsx)(i.Z,{sx:{px:2,pt:2,pb:1},children:(0,c.jsx)(s.pn,{btns:n,onChange:function(e,n){h(e)}})}),"todaysTrades"===x?(0,c.jsx)(u.Z,{sx:{height:"100%",display:"flex",flexDirection:"column"},transactions:!1,home:!0}):(0,c.jsx)(d.Z,{hideFilter:!0,pageSize:20,hidePagination:!0})]})})}},97424:function(e,n,r){r.d(n,{Z:function(){return G}});var t=r(16487),o=r(92680),i=r(24190),a=r(2211),s=r(12130),l=r(70999),c=r(55685),u=r(63996),d=r(43749),f=r(45771),x=r(40911),h=r(42393),m=r(36287),p=r(74114),v=r(15898),g=r(77317),Z=r(81898),y=r(40165),w=r(62842),b=r(90669),j=r(21719),C=r(67444),S=r(45625),k=r(50963),D=r(74384),T=r(71370),P=r(3596),N=r(43832),A=T.url.join("wss://mt4-api.dev.decodeex.com","/"),W=(0,N.ZP)((function(e,n){return{response:[]}})),z=new P.Z(A,(function(e){var n=JSON.parse(e.data).map((function(e){return{symbol:e.s,contractSize:e.n,currency:e.c,digits:e.d}})),r=(0,y.keyBy)(n,"symbol");W.setState({response:n,KVResponse:r})})),F=function(e){var n=(0,g.useRef)(!1),r=(0,g.useRef)([]),t=(0,g.useId)();(0,y.isNil)(e)||0===e.length?(n.current=!1,r.current=[]):n.current&&r.current===e||(n.current=!0,r.current=e,z.send_({c:"symbol",ls:e,r:t},!0))},I=r(48466),O=(0,N.ZP)((function(e,n){return{response:{}}})),R=T.url.join("wss://mt4-api.dev.decodeex.com","/"),H=new P.Z(R,(function(e){var n=JSON.parse(e.data),r=n.s,t=n.p,o=n.b,i=n.a;O.setState({response:(0,a.Z)((0,a.Z)({},O.getState().response),{},(0,I.Z)({},r,(0,a.Z)((0,a.Z)({},O.getState().response[r]||{}),{},(0,I.Z)({},t?"pro":"std",{bid:o,ask:i}),W.getState().KVResponse[r]||{})))})})),M=function(){var e=(0,g.useMemo)((function(){return{watch:function(){var e=(0,i.Z)((0,o.Z)().mark((function e(n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H.send_({c:"subm",ls:n},!0));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),unwatch:function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H.send_({c:"unsubm"},!0));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}),[]);return e},L=function(e,n,r,t,o,i){var a=r+n,s=t[a],l=(0,y.get)(s,i?"pro":"std");return null!=s&&l?(0===o?e/l.bid:e/l.ask).toFixed(2):(s=t[a=n+r],l=(0,y.get)(s,i?"pro":"std"),null!=s&&l?(0===o?e*l.bid:e*l.ask).toFixed(2):null)},E=r(40860),U=(0,g.memo)((function(e){var n=e.item,r=(0,g.useRef)();return(0,g.useEffect)((function(){var e=O.subscribe((function(e){var t=e.response[n.symbol];if(t){var o="STD"===n.rawData.accountGroupType?t.std:t.pro;r.current&&o&&(r.current.innerHTML=(0,b.currencyFormatorWithDecimal)([0,2,4].includes(n.rawData.cmd)?o.bid:o.ask,t.currency,t.digits,!0))}}));return function(){e()}}),[n.symbol]),(0,E.jsx)(f.Z,{sx:{fontSize:"12px"},ref:r,children:(0,b.currencyFormatorWithDecimal)(n.currentPrice,n.currency,n.decimal,!0)})}),(function(e,n){var r,t;return(null===e||void 0===e||null===(r=e.item)||void 0===r?void 0:r.symbol)===(null===n||void 0===n||null===(t=n.item)||void 0===t?void 0:t.symbol)})),_=(0,g.memo)((function(e){var n=e.item,r=(0,g.useRef)();return(0,g.useEffect)((function(){var e=W.subscribe((function(e){e.response;var t=(0,y.find)(e.response,(function(e){return e.symbol===n.symbol}));t&&r.current&&(r.current.innerHTML=(0,b.currencyFormatorWithDecimal)(n.startPrice,t.currency,t.digits,!0))}));return function(){e()}}),[n.symbol]),(0,E.jsx)(f.Z,{sx:{fontSize:"12px"},ref:r,children:(0,b.currencyFormatorWithDecimal)(n.startPrice,n.currency,n.decimal,!0)})}),(function(e,n){var r,t;return(null===e||void 0===e||null===(r=e.item)||void 0===r?void 0:r.symbol)===(null===n||void 0===n||null===(t=n.item)||void 0===t?void 0:t.symbol)})),q=(0,g.memo)((function(e){var n,r=e.item,t=(0,g.useRef)(),o=(0,D.F)().getStockColorValue;return(0,g.useEffect)((function(){var e=O.subscribe((function(e){var n=e.response,i=n[r.symbol];if(i){var a="STD"===r.rawData.accountGroupType?i.std:i.pro;if(a){var s,l,c=function(e,n,r,t,o,i,a){var s=e.cmd,l=e.volume,c=e.openPrice,u="PRO"==e.accountGroupType,d=l/100*t,f=0;if(f=0===s?((n-c)*d).toFixed(2):((c-r)*d).toFixed(2),o!==i){var x=L(f,o,i,a,s,u);return null!=x?x:null==(x=L(f,o,"USD",a,s,u))||null==(x=L(x,"USD",i,a,s,u))?0:x}return f}(r.rawData,a.bid,a.ask,i.contractSize,i.currency,null===(s=r.rawData)||void 0===s?void 0:s.accountCurrency,n);t.current.innerHTML=(0,b.currencyFormatorWithDecimal)(c,null===(l=r.rawData)||void 0===l?void 0:l.accountCurrency,i.digits,!0),t.current.style.color=o(c)}}}));return function(){e()}}),[r.symbol]),(0,E.jsx)(f.Z,{sx:{fontSize:"12px",fontWeight:700,color:o(r.profit)},ref:t,children:(0,b.currencyFormatorWithDecimal)(r.profit,null===(n=r.rawData)||void 0===n?void 0:n.accountCurrency,r.decimal,!0)})}),(function(e,n){var r,t;return(null===e||void 0===e||null===(r=e.item)||void 0===r?void 0:r.symbol)===(null===n||void 0===n||null===(t=n.item)||void 0===t?void 0:t.symbol)})),G=(0,g.forwardRef)((function(e,n){var r=e.type,b=e.autoHeight,T=void 0!==b&&b,P=e.login,N=e.home,A=void 0!==N&&N,z=e.hidePagination,I=void 0===z||z,O=e.closeAll,R=void 0!==O&&O,H=e.setCloseAll,L=void 0===H?function(){}:H,G=e.forexAccountId,B=e.setDisabled,V=void 0===B?function(){}:B,J=(0,c.Z)().t,K=(0,v.Ds)().enqueueSnackbar,X=(0,g.useState)(!1),Y=(0,s.Z)(X,2),Q=Y[0],$=Y[1],ee=(0,g.useState)(null),ne=(0,s.Z)(ee,2),re=ne[0],te=ne[1],oe=(0,g.useState)(P),ie=(0,s.Z)(oe,2),ae=ie[0],se=ie[1],le=(0,g.useState)(null),ce=(0,s.Z)(le,2),ue=ce[0],de=ce[1],fe=(0,g.useState)(!1),xe=(0,s.Z)(fe,2),he=xe[0],me=xe[1],pe=(0,g.useState)(!1),ve=(0,s.Z)(pe,2),ge=ve[0],Ze=ve[1],ye=(0,g.useState)({}),we=(0,s.Z)(ye,2),be=we[0],je=we[1],Ce=((0,k.Z)().user,(0,D.F)().getStockColorValue,(0,u.mx)((0,a.Z)({type:r,login:P},A&&"closed"===r?{startDate:(0,p.xA)(new Date((new Date).getTime()-5184e5).toISOString()),endDate:(0,p.xA)((new Date).toISOString())}:{}))),Se=Ce.data,ke=Ce.mutate,De=Ce.isValidating,Te=(0,u.Oh)({accountId:ue||G}).data;!function(e){F(e);var n=M();(0,g.useEffect)((function(){if(!(0,y.isNil)(e)&&0!==e.length){var r=W.subscribe((function(e){var r=e.response;console.log("watch symbols",r.map((function(e){return e.symbol}))),n.watch(r.map((function(e){return e.symbol})))}));return function(){r&&r(),n.unwatch()}}n.unwatch()}),[e])}("closed"===r?null:(0,y.uniq)(Se.map((function(e){return e.symbol})))),(0,g.useEffect)((function(){R&&Ze(!0)}),[R]),(0,g.useEffect)((function(){console.clear(),console.log(Se),Se.length>0?V(!1):V(!0)}),[De]);var Pe=(0,j.Z)(null===Te||void 0===Te?void 0:Te.login,null===Te||void 0===Te?void 0:Te.password,null===Te||void 0===Te?void 0:Te.groupType),Ne=function(){te(null)};(0,g.useImperativeHandle)(n,(function(){return{resetValue:function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),firstTrade:null===Se||void 0===Se?void 0:Se[0]}}));var Ae=Boolean(re),We=Ae?"simple-popover":void 0,ze=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $(!0),e.prev=1,e.next=4,(0,u.Hq)(n);case 4:return e.next=6,ke();case 6:K(J("updateSuccess"),{variant:"success"}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),K("".concat(J("updateFailed"),": ").concat(JSON.parse(e.t0.message).error.message),{variant:"error"});case 13:$(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(n){return e.apply(this,arguments)}}(),Fe=[{headerName:J("login"),field:"login",flex:.5,minWidth:60,renderCell:function(e){var n=e.row;return(0,E.jsx)(w.W,{item:n,children:(0,E.jsx)(f.Z,{sx:{fontSize:"12px"},children:(0,y.get)(n,"rawData.login")})})}},{headerName:J("volume"),field:"volume",flex:.5,minWidth:60,renderCell:function(e){var n=e.row;return(0,E.jsx)(w.W,{item:n,children:(0,E.jsx)(f.Z,{sx:{fontSize:"12px"},children:(0,p.DU)(n.lot)})})}},{headerName:J("symbol"),field:"symbol",flex:.5,minWidth:75,renderCell:function(e){var n=e.row;return(0,E.jsx)(w.W,{item:n,children:(0,E.jsx)(f.Z,{sx:{fontSize:"12px"},children:(0,y.get)(n,"displaySymbol")})})}},{headerName:J("type"),field:"type",flex:.5,minWidth:60,renderCell:function(e){var n=e.row;return(0,E.jsx)(w.W,{item:n,children:(0,E.jsx)(f.Z,{sx:{fontSize:"12px"},children:(0,y.get)(n,"orderCommand")})})}},{headerName:J("open"===r?"forexPendingOpenPrice":"forexOpenPrice"),field:"openPrice",minWidth:110,flex:1,align:"right",headerAlign:"right",renderCell:function(e){var n=e.row;return(0,E.jsx)(w.W,{item:n,children:(0,E.jsx)(_,{item:n})})}},{headerName:J("closed"===r?"forexClosedClosePrice":"forexNormalClosePrice"),field:"closePrice",minWidth:110,flex:1,align:"right",headerAlign:"right",renderCell:function(e){var n=e.row;return(0,E.jsx)(w.W,{item:n,children:(0,E.jsx)(U,{item:n})})}},{headerName:J("tradeCloseTime"),field:"closeTime",flex:1,minWidth:130,hide:"closed"!==r,renderCell:function(e){var n=e.row;return(0,E.jsxs)(w.W,{item:n,children:[(0,E.jsx)(f.Z,{sx:{fontSize:"12px",textOverflow:"ellipsis",overflow:"hidden",width:"100%"},children:(0,p.o0)(n.rawData.closeTime)})," "]})}}].concat((0,t.Z)("open"===r?[]:[{headerName:J("profit"),field:"profit",flex:1,minWidth:100,align:"right",headerAlign:"right",renderCell:function(e){var n=e.row;return(0,E.jsx)(w.W,{item:n,children:(0,E.jsx)(q,{item:n})})}}]),[{headerName:J("actions"),field:"action",flex:1,minWidth:120,hide:"closed"===r,renderCell:function(e){var n=e.row;return(0,E.jsx)(x.Z,{children:"closed"!==r&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(d.sq,{sx:{backgroundColor:"#505064",p:0,py:.3,px:1,alignItems:"center"},onClick:function(e){je(n),se(n.login),de(n.rawData.accountId),n.hasPassword?(Ze(!0),se(n.rawData.accountId)):(se(n.rawData.accountId),me(!0))},children:[(0,E.jsx)(x.Z,{sx:{backgroundColor:"primary.rise",height:15,width:15,borderRadius:"50%",display:"flex",alignItems:"center",justifyItems:"center",textAlign:"center"},children:"positions"!==r?(0,E.jsx)(m.Z,{fontSize:"18px",sx:{color:"#fff"}}):(0,E.jsx)("img",{src:"/assets/icons/shut-down-line.svg",style:{width:"12px",position:"relative",left:"1px"}})}),(0,E.jsx)(f.Z,{sx:{fontSize:"12px",color:"primary.rise",ml:1},children:J("positions"===r?"positionClose":"cancel")})]}),(0,E.jsx)(h.ZP,{id:We,open:Ae&be.ticket===n.ticket,anchorEl:re,onClose:Ne,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,E.jsxs)(x.Z,{sx:{width:200,textAlign:"center",py:1},children:[(0,E.jsx)(f.Z,{sx:{mb:1},children:J("positions"===r?"whetherToClose":"cancelPending")}),(0,E.jsx)(d.sq,{sx:{backgroundColor:"#505064",p:0,py:.3,px:1,alignItems:"center",mr:1},onClick:Ne,children:J("cancel")}),(0,E.jsx)(d.sq,{sx:{backgroundColor:"#505064",p:0,py:.3,px:1,alignItems:"center"},onClick:(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==n.rawData.hasPassword){e.next=5;break}Ne(),me(!0),e.next=8;break;case 5:return Ne(),e.next=8,ze({ticket:n.ticket,type:"positions"===r?"positions":"open",login:n.login});case 8:case"end":return e.stop()}}),e)}))),children:J("confirm")})]})})]})})}}]);return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(x.Z,{sx:{"& .style-header":{fontSize:14,backgroundColor:"#3C3C50",height:36,fontWeight:"bold"},"& .MuiDataGrid-columnHeaders":{borderRadius:0},height:"100%"},children:[(0,E.jsx)(l.Z,{columns:Fe,rows:Se,headerClassName:"style-header",cellClassName:"style-cell",hideFooter:!0,hidePagination:I,autoHeight:T}),(0,E.jsx)(C.Z,{open:ge,onClose:function(){Ze(!1),L(!1)},onResetPassword:function(){return me(!0)},accountLogin:null===Te||void 0===Te?void 0:Te.login,password:null===Te||void 0===Te?void 0:Te.password,groupType:null===Te||void 0===Te?void 0:Te.groupType,type:r,ticket:be.ticket,clientApi:Pe,mutate:ke,closeAll:R}),(0,E.jsx)(S.Z,{open:he,onClose:function(){return me(!1)},forexAccountId:ae,onSuccess:function(){var e=(0,i.Z)((0,o.Z)().mark((function e(n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("positions"!==r){e.next=10;break}if(R){e.next=6;break}return e.next=4,null===n||void 0===n?void 0:n.closePosition(null===be||void 0===be?void 0:be.ticket);case 4:e.next=8;break;case 6:return e.next=8,null===n||void 0===n?void 0:n.closeAll();case 8:case 13:e.next=17;break;case 10:if(R){e.next=15;break}return e.next=13,null===n||void 0===n?void 0:n.cancelOrder(null===be||void 0===be?void 0:be.ticket);case 15:return e.next=17,null===n||void 0===n?void 0:n.cancelAll();case 17:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()})]}),(0,E.jsx)(Z.Z,{loading:Q})]})}))},71025:function(e,n,r){var t="/api/ws";new(r(49801).dK)("https://crm-api.decodeex.com",{path:t.endsWith("/")?t:"/api/ws/",reconnectionDelayMax:1e4,transports:["websocket"],autoConnect:!1})}}]);