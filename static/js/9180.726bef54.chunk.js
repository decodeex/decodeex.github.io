"use strict";(self.webpackChunk_decode_crm_client=self.webpackChunk_decode_crm_client||[]).push([[9180],{87749:function(e,n,t){var r=t(2211),o=t(92680),s=t(24190),c=t(12130),u=t(27203),i=t(24786),a=t(26521),l=t(42924),f=t(7223),d=t(34481),p=t(1974),h=t(64505),w=t(88658),v=t(31530),Z=t(14674),k=t(62428),x=t(30096),g=t(18858),b=t(98845),S=function(e){var n=e.onSuccess,t=e.forexAccountId,r=e.onClose,l=(0,w.Z)().t,f=(0,v.useState)({password:""}),d=(0,c.Z)(f,2),S=d[0],m=d[1],y=(0,v.useState)(null),C=(0,c.Z)(y,2),O=C[0],R=C[1],j=(0,v.useState)(!1),_=(0,c.Z)(j,2),E=_[0],q=_[1],N=(0,k.OhN)({accountId:t}),I=N.data,D=(N.mutate,N.isLoading),L=(0,Z.Z)(null===I||void 0===I?void 0:I.login,null===S||void 0===S?void 0:S.password,null===I||void 0===I?void 0:I.groupType),P=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,q(!0),e.next=4,null===L||void 0===L?void 0:L.login();case 4:return e.next=6,(0,k.RjV)({accountId:null===I||void 0===I?void 0:I.id,password:null===S||void 0===S?void 0:S.password});case 6:r(),setTimeout((function(){m({password:""}),R(null),q(!1)}),200),n&&n(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),R(l((0,x.getErrorMessage)(e.t0)));case 13:return e.prev=13,q(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])})));return function(){return e.apply(this,arguments)}}();return D?(0,b.jsx)(p.Z,{sx:{py:2},direction:"row",alignItems:"center",justifyContent:"center",children:(0,b.jsx)(u.Z,{})}):(0,b.jsx)(p.Z,{spacing:2,sx:{width:"100%"},children:(0,b.jsxs)(p.Z,{spacing:2,children:[(0,b.jsx)(i.Z,{variant:"h5",children:l("requirePassword")}),(0,b.jsx)(i.Z,{variant:"body2",children:l("requirePasswordDesc",{login:null===I||void 0===I?void 0:I.login})}),(0,b.jsx)(g.dz,{values:S,setValues:m,children:(0,b.jsx)(g.xr,{field:"password",label:l("password"),sx:{my:1}})}),O&&(0,b.jsx)(a.Z,{children:(0,b.jsx)(i.Z,{textAlign:"center",color:"red",children:O})}),(0,b.jsx)(h.sq,{isLoading:E,onClick:P,children:l("confirm")})]})})};n.Z=function(e){var n=e.open,t=e.onClose,o=e.onSuccess,s=e.forexAccountId;return(0,b.jsx)(l.Z,{fullWidth:!0,maxWidth:"xs",open:n,onClose:t,PaperComponent:function(e){return(0,b.jsxs)(a.Z,{sx:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,b.jsx)(a.Z,{onClick:t,sx:{width:"100%",height:"100%",position:"fixed"}}),(0,b.jsx)(f.Z,(0,r.Z)((0,r.Z)({},e),{},{children:e.children}))]})},children:(0,b.jsx)(d.Z,{sx:{pb:5},children:(0,b.jsx)(S,{onSuccess:o,forexAccountId:s,onClose:t})})})}},48102:function(e,n,t){var r=t(26521),o=t(24786),s=(t(31530),t(98845));n.Z=function(e){var n=e.bg,t=e.component,c=e.text;return(0,s.jsx)(r.Z,{alignContent:"center",justifyContent:"center",sx:{minHeight:4,minWidth:4,px:1,backgroundColor:n,borderRadius:30},children:t||(0,s.jsx)(o.Z,{fontSize:12,color:"#141428",children:c})})}},14674:function(e,n,t){t.d(n,{M:function(){return w}});var r=t(92680),o=t(24190),s=t(31530),c=t(68468),u=t(88851),i=t(82177),a=t(39702),l=c.url.join("wss://mt4-api.decodeex.com/","/"),f=(0,i.ZP)((function(e,n){return{request:{},setRequests:function(n){return e((function(){return{request:n}}))}}})),d=(0,i.ZP)((function(e,n){return{quote:{},setQuote:function(n){return e((function(){return{quote:n}}))}}})),p=new u.Z(l,(function(e){var n,t=JSON.parse(e.data),r=t.e,o=t.c,s=t.l,c=t.s,u=t.b,i=t.a,a=t.t,l=t.tk,p=t.op;if((null===(n=f.getState().request)||void 0===n?void 0:n.login)===s){var w;if(r)return w=o===h.BAD_REQUEST?"badRequest":o===h.LOGIN_ERROR?"incorrectPassword":o===h.NOT_FOUND?"notFound":r||"serverError",void f.setState({request:{success:!1,result:null,error:w,login:null}});if(l)f.setState({request:{success:!0,result:null,error:null,login:null}});else if(c){var v={login:s,symbol:c,bid:u,ask:i,time:a};d.setState((function(){return{quote:v}}))}else{var Z;if(-3===p)return console.log("Login successfully"),void f.setState({request:{success:!0,result:null,error:null,login:null===(Z=f.getState().request)||void 0===Z?void 0:Z.login}});f.setState({request:{success:!0,result:null,error:null,login:null}}),console.warn("Received unknown ws message",t)}}})),h={BAD_REQUEST:400,NOT_FOUND:404,GENERAL_ERROR:500,LOGIN_ERROR:401},w={Buy:0,Sell:1,BuyLimit:2,SellLimit:3,BuyStop:4,SellStop:5};n.Z=function(e,n,t,c){var u="".concat(e,":").concat(encodeURIComponent(n));c&&(u+=":demo");var i=(0,s.useMemo)((function(){if((0,a.isNil)(n)||""==n)return null;var s=function(){var n=(0,o.Z)((0,r.Z)().mark((function n(){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return f.setState({request:{success:!1,result:null,error:null,login:e}}),n.next=3,new Promise((function(e,n){var t=f.subscribe((function(r){var o=r.request;console.log("request",o),o.success&&(e(o),t()),o.error&&(n(new Error(o.error)),t())}));setTimeout((function(){t(),e(!0)}),8e3)}));case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return{login:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.send_({c:"login",t:u,g:t},!0),e.next=3,s();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),watch:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n,o){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.send_({c:"sub",t:u,g:t,s:n},!0),e.abrupt("return",d.subscribe((function(e){o&&o(e)})));case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),unwatch:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.send_({c:"unsub",t:u,g:t,s:n},!0);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),closePosition:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.send_({c:"close",t:u,g:t,tk:n},!0),e.next=3,s();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),closeAll:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("close all"),p.send_({c:"close",t:u,g:t,tk:-1},!0),e.next=4,s();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),cancelOrder:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.send_({c:"cancel",t:u,g:t,tk:n},!0),e.next=3,s();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),cancelAll:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.send_({c:"cancel",t:u,g:t,tk:-1},!0),e.next=3,s();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),sendOrder:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n,o,c,i,a,l,f,d){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.send_({c:"order",t:u,g:t,s:n,op:o,vl:c,p:i,sl:a,tp:l,e:d,m:f},!0),e.next=3,s();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(n,t,r,o,s,c,u,i){return e.apply(this,arguments)}}()}}),[t,u,n]);return i}},95434:function(e,n,t){t.d(n,{F:function(){return w}});var r=t(2211),o=t(92680),s=t(24190),c=t(76956),u=t(39702),i=t(73404),a=t(31530),l=t(98961),f=t(62428),d=["stockColor","syncVerifyStatusFromProfile"],p={greenUpRedDown:{up:"stockGreen",down:"stockRed"},greenDownRedUp:{up:"stockRed",down:"stockGreen"}},h={stockRed:"#f43f5e",stockGreen:"#34d399"},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.disableSyncService,t=void 0!==n&&n,w=(0,f.Un)(),v=w.data,Z=w.isLoading,k=(0,l.usePreferenceStore)((function(e){return e})),x=k.stockColor,g=k.syncVerifyStatusFromProfile,b=(0,c.Z)(k,d),S=(0,i.pm)(),m=(0,a.useCallback)(function(){var e=(0,s.Z)((0,o.Z)().mark((function e(n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(0,u.get)(v,"preference.id")){e.next=5;break}return e.next=4,(0,f.ufZ)({payload:n,preferenceId:(0,u.get)(v,"preference.id")});case 4:return e.abrupt("return",e.sent);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),S.show({description:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),[v]),y=(0,a.useRef)(0);(0,a.useEffect)((function(){t||0!==y.current||Z||!v||(g(v),y.current+=1)}),[v,Z]);var C=x||"greenUpRedDown",O=h[p[C].up],R=h[p[C].down];return(0,r.Z)((0,r.Z)({stockColor:C,stockUpColor:O,stockDownColor:R},b),{},{getStockColorValue:function(e){return e>0?O:e<0?R:"#78716c"},updatePreference:m,isLoading:Z})}},88851:function(e,n,t){var r=t(92680),o=t(24190),s=t(7403),c=t(56141),u=t(68468),i=0,a=1,l=function(){function e(n,t){var r=this;(0,s.Z)(this,e),this.webSocketOnOpen=function(){console.log("[-- CONNECTION ESTABLISHED --]")},this.webSocketOnClose=function(){console.log("[-- CONNECTION CLOSED --]"),r.disconnect()},this.webSocketOnError=function(){console.log("[-- ERROR OCCURRED --]"),r.disconnect()},this.url=n,this.webSocketOnMessage=t}return(0,c.Z)(e,[{key:"connect_",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var n=this;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.webSocket){e.next=10;break}return this.webSocket=new WebSocket(this.url,["aspnetcore-ws.json"]),this.state=i,this.webSocket.onopen=this.webSocketOnOpen,this.webSocket.onclose=this.webSocketOnClose,this.webSocket.onerror=this.webSocketOnError,this.webSocket.onmessage=this.webSocketOnMessage,e.next=9,(0,u.waitUntil_)((function(){return null==n.webSocket||n.webSocket.readyState===a}),100,30);case 9:console.log("ready",this.webSocket.readyState);case 10:return e.abrupt("return",null!=this.webSocket&&this.webSocket.readyState===a);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){this.webSocket&&(this.webSocket.close(),delete this.webSocket)}},{key:"send_",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n,t){var o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connect_();case 2:if(!e.sent){e.next=8;break}return o=JSON.stringify(n),this.webSocket.send(o),e.abrupt("return",!0);case 8:if(t){e.next=10;break}throw new Error("Cannot connect to server.");case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,this)})));return function(n,t){return e.apply(this,arguments)}}()}]),e}();n.Z=l}}]);